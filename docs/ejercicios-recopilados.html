<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>📝 Ejercicios recopilados | Analizando datos, visualizando información, contando historias</title>
<meta name="author" content="Javier Álvarez Liébana y Gabriel Valverde Castilla">
<meta name="description" content="Aquí haremos una recopilación de los ejercicios planteados a lo largo del curso. Vuelve por aquí si quieres cuando acabas las lecciones para repasar aquellos ejercicios que más te hayan costado....">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="📝 Ejercicios recopilados | Analizando datos, visualizando información, contando historias">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/logo_R.png">
<meta property="og:description" content="Aquí haremos una recopilación de los ejercicios planteados a lo largo del curso. Vuelve por aquí si quieres cuando acabas las lecciones para repasar aquellos ejercicios que más te hayan costado....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="📝 Ejercicios recopilados | Analizando datos, visualizando información, contando historias">
<meta name="twitter:description" content="Aquí haremos una recopilación de los ejercicios planteados a lo largo del curso. Vuelve por aquí si quieres cuando acabas las lecciones para repasar aquellos ejercicios que más te hayan costado....">
<meta name="twitter:image" content="/img/logo_R.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Sen-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/_Bitter-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.18/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Analizando datos, visualizando información, contando historias</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Recursos</li>
<li><a class="active" href="ejercicios-recopilados.html">📝 Ejercicios recopilados</a></li>
<li><a class="" href="recursos-de-aprendizaje.html">📚 Recursos de aprendizaje</a></li>
<li><a class="" href="pr%C3%A1cticas-evaluables.html">🏅 Prácticas evaluables</a></li>
<li class="book-part">Toma de contacto</li>
<li><a class="" href="requisitos.html"><span class="header-section-number">1</span> Requisitos</a></li>
<li><a class="" href="instalacion.html"><span class="header-section-number">2</span> Instalación</a></li>
<li><a class="" href="que-es-R.html"><span class="header-section-number">3</span> ¿Qué es R?</a></li>
<li><a class="" href="primeros-pasos.html"><span class="header-section-number">4</span> Primeros pasos</a></li>
<li class="book-part">Conceptos básicos</li>
<li><a class="" href="tipos-datos.html"><span class="header-section-number">5</span> Tipos de datos</a></li>
<li><a class="" href="vectores.html"><span class="header-section-number">6</span> Vectores</a></li>
<li><a class="" href="operacionesvectores.html"><span class="header-section-number">7</span> Operaciones con vectores</a></li>
<li><a class="" href="datos.html"><span class="header-section-number">8</span> Datos estructurados</a></li>
<li><a class="" href="repaso-1.html"><span class="header-section-number">9</span> Repaso: empezando a trastear con datos</a></li>
<li class="book-part">Haciendo el trabajo más fácil</li>
<li><a class="" href="if-else.html"><span class="header-section-number">10</span> Estructuras de control: if-else</a></li>
<li><a class="" href="bucles.html"><span class="header-section-number">11</span> Estructuras de control: bucles</a></li>
<li><a class="" href="proyecto.html"><span class="header-section-number">12</span> Primer proyecto de trabajo</a></li>
<li><a class="" href="funciones.html"><span class="header-section-number">13</span> Funciones</a></li>
<li><a class="" href="listas.html"><span class="header-section-number">14</span> Listas</a></li>
<li class="book-part">Empezando a explorar datos</li>
<li><a class="" href="tibble.html"><span class="header-section-number">15</span> Mejorando los data.frame: datos tibble</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">16</span> Tidy vs messy data: daticos ordenados</a></li>
<li><a class="" href="importar-exportar.html"><span class="header-section-number">17</span> Sacando datos de las piedras</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">18</span> Contando los datos: rmarkdown</a></li>
<li class="book-part">Incursión a tidyverse</li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">19</span> Depuración y transformación</a></li>
<li><a class="" href="resumenes.html"><span class="header-section-number">20</span> Resumiendo y relacionado datos</a></li>
<li><a class="" href="tidyverse-2.html"><span class="header-section-number">21</span> Profundizando tidyverse: encuestas electorales</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">22</span> Visualizando datos: incursión a ggplot2</a></li>
<li><a class="" href="ggplot2_plus.html"><span class="header-section-number">23</span> Profundizando en ggplot2</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dadosdelaplace/courses-ECI-2022">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ejercicios-recopilados" class="section level1 unnumbered">
<h1>📝 Ejercicios recopilados<a class="anchor" aria-label="anchor" href="#ejercicios-recopilados"><i class="fas fa-link"></i></a>
</h1>
<p>Aquí haremos una recopilación de los ejercicios planteados a lo largo del curso. Vuelve por aquí si quieres cuando acabas las lecciones para repasar aquellos ejercicios que más te hayan costado.</p>
<div id="primeros-pasos" class="section level2 unnumbered">
<h2>Primeros pasos<a class="anchor" aria-label="anchor" href="#primeros-pasos"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script04.R"><strong>script04.R</strong></a>: toma de contacto. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script04.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script04.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: en tu consola (parte inferior de tu pantalla), asigna los valores <code>2</code> y <code>5</code> a dos variables <code>a</code> y <code>b</code>. Tras asignarles valores, multiplica los números en consola (<strong>haz click</strong> en la flecha para la solución propuesta). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Para poner comentarios en el código se usa #</span>

<span class="co"># Definición de variables</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">5</span>

<span class="co"># Multiplicación</span>
<span class="va">a</span> <span class="op">*</span> <span class="va">b</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:consola-multi-2a"></span>
<img src="img/consola_multiplicacion.jpg" alt="Multiplicación de a y b." width="80%"><p class="caption">
Imagen/gráfica 0.1: Multiplicación de a y b.
</p>
</div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: modifica el código inferior para definir dos variables <code>c</code> y <code>d</code>, con valores <code>3</code> y <code>-1</code>, y calcular la división <code>c/d</code> (<strong>haz click</strong> en la flecha para la solución propuesta).</summary></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definición de variables</span>
<span class="va">c</span> <span class="op">&lt;-</span> 
<span class="va">d</span> <span class="op">&lt;-</span>

<span class="co"># Operación (división)</span>
<span class="va">c</span> <span class="op">?</span> <span class="va">d</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definición de variables</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">d</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span>

<span class="co"># División</span>
<span class="va">a</span> <span class="op">/</span> <span class="va">b</span></code></pre></div>
<pre><code>## [1] 0.4</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: repite el ejercicio 1 pero ahora guarda el resultado de la multiplicación final en una variable <code>c</code>. Para ver el resultado guardado en <code>c</code> escribe dicha variable en consola (<strong>haz click</strong> en la flecha para la solución propuesta). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Variables</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">5</span>

<span class="co"># Resultado</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">*</span> <span class="va">b</span>

<span class="co"># Muestro en consola</span>
<span class="va">c</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:consola-multi-2b"></span>
<img src="img/consola_multiplicacion_2.jpg" alt="Multiplicación de a y b guardando el resultado." width="80%"><p class="caption">
Imagen/gráfica 0.2: Multiplicación de a y b guardando el resultado.
</p>
</div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: asigna ahora los valores <code>1</code>, <code>-2</code>, <code>3</code> a tres variables <code>a</code>, <code>b</code> y <code>c</code>, y calcula la raíz cuadrada de cada uno. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Variables</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">3</span>

<span class="co"># Resultado</span>
<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1.732051</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: repite el ejercicio 3 pero ahora escribe el código en un script (fichero de <code>.R</code>, guardado en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R"><strong>script01.R</strong></a>). Recuerda al acabar seleccionar las líneas a ejecutar y clickar <code>Run</code>, o bien guardar el script con <code>Source on save</code> activado (<strong>haz click</strong> en la flecha para la solución propuesta). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:consola-multi-3a"></span>
<img src="img/consola_multiplicacion_3.jpg" alt="Multiplicación de a y b guardando el resultado pero escribiendo en el script." width="80%"><p class="caption">
Imagen/gráfica 0.3: Multiplicación de a y b guardando el resultado pero escribiendo en el script.
</p>
</div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: calcula en consola la suma de 3 más 4, y todo ello multiplicado por 10, y asígnalo a una variable <code>x</code> (<strong>haz click</strong> en la flecha para la solución propuesta).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">4</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span></code></pre></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: asigna un valor positivo a <code>x</code> y calcula su raíz cuadrada; asigna otro negativo y calcula su valor absoluto (<strong>haz click</strong> en la flecha para la solución propuesta).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Raíz cuadrada</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">73</span>
<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 8.544004</code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Valor absoluto</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">73</span>
<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 73</code></pre>
<!-- tocstop -->
</details><p> </p>
<p><strong><span style="color: #20935E;">CONSEJO:</span></strong></p>
<p>Las órdenes <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt(x)</a></code> y <code><a href="https://rdrr.io/r/base/MathFun.html">abs(y)</a></code> se llaman <mark><strong>funciones</strong></mark>, y la variable que tienen entre paréntesis se llama <strong>argumento de la función</strong>: una variable que toma de entrada la función y con la que opera internamente.</p>
<p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: usando la variable <code>x</code> ya definida, calcula la resta <code>x - 5</code> y guárdala en una nueva variable <code>z</code> (<strong>haz click</strong> en la flecha para la solución propuesta).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">-</span> <span class="fl">5</span>
<span class="va">z</span></code></pre></div>
<pre><code>## [1] 68</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 9</strong>: usando las variables <code>x</code> y <code>z</code> ya definidas, calcula el máximo de ambas, y guárdalo en una nueva variable <code>t</code>. (<strong>haz click</strong> en la flecha para la solución propuesta).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span><span class="op">)</span>
<span class="va">t</span></code></pre></div>
<pre><code>## [1] 73</code></pre>
<!-- tocstop -->
</details><p> </p>
<p><strong><span style="color: #ffc107;">WARNING:</span></strong></p>
<p>No hace falta gastar una línea por cada orden que quieras ejecutar. Tampoco necesitas guardar cada paso intermedio que realices. <strong><span style="color: #ffc107;">Cuidado con la memoria</span></strong>: cada asignación que hagas es una variable guardada que consume recursos en tu ordenador.</p>
</div>
<div id="tipos-de-datos" class="section level2 unnumbered">
<h2>Tipos de datos<a class="anchor" aria-label="anchor" href="#tipos-de-datos"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script05.R"><strong>script05.R</strong></a>: tipos de datos y funciones usadas con ellos. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script05.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script05.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: define una variable que guarde tu edad, otra con tu nombre, otra respondiendo a la pregunta «¿tengo hermanos?» y otra con la fecha de tu nacimiento. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fl">32</span> <span class="co"># tipo numeric</span>
<span class="va">nombre</span> <span class="op">&lt;-</span> <span class="st">"Javier"</span> <span class="co"># tipo caracter</span>
<span class="va">hermanos</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># tipo hermanos</span>
<span class="va">fecha_nacimiento</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1989-09-10"</span><span class="op">)</span> <span class="co"># tipo fecha</span></code></pre></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: define otra variable con tus apellidos y junta las variables <code>nombre</code> y <code>apellidos</code> en una sola variable <code>nombre_completo</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue">glue</a></span><span class="op">)</span>

<span class="co"># Apellidos</span>
<span class="va">apellidos</span> <span class="op">&lt;-</span> <span class="st">"Álvarez Liébana"</span>

<span class="co"># Pegamos</span>
<span class="va">nombre_completo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span><span class="op">(</span><span class="st">"{nombre} {apellidos}"</span><span class="op">)</span>
<span class="va">nombre_completo</span></code></pre></div>
<pre><code>## Javier Álvarez Liébana</code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Otra forma</span>
<span class="va">nombre_completo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">nombre</span>, <span class="va">apellidos</span><span class="op">)</span>
<span class="va">nombre_completo</span></code></pre></div>
<pre><code>## [1] "Javier Álvarez Liébana"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: construye una frase que diga «Hola, me llamo … y tengo … años. Nací el … de … de …» (con el nombre completo). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="va">dia_nacimiento</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/day.html">day</a></span><span class="op">(</span><span class="va">fecha_nacimiento</span><span class="op">)</span>
<span class="va">mes_nacimiento</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/month.html">month</a></span><span class="op">(</span><span class="va">fecha_nacimiento</span><span class="op">)</span>
<span class="va">a_nacimiento</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/year.html">year</a></span><span class="op">(</span><span class="va">fecha_nacimiento</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span><span class="op">(</span><span class="st">"Hola, me llamo {nombre_completo} y tengo {edad} años. Nací el {dia_nacimiento} del {mes_nacimiento} de {a_nacimiento}"</span><span class="op">)</span></code></pre></div>
<pre><code>## Hola, me llamo Javier Álvarez Liébana y tengo 32 años. Nací el 10 del 9 de 1989</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: calcula los días que han pasado desde la fecha de tu nacimiento </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/period.html">days</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/now.html">today</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">fecha_nacimiento</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "11828d 0H 0M 0S"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: obtén una variable lógica que nos diga si se cumplen (todas) las condiciones i) menor de 30 años (<code>edad &lt; 30</code>); ii) con hermanos (<code>hermanos == TRUE</code>); iii) nacido en 1990 o posterior (<code>fecha_nacimiento &gt;= as.Date("1990-01-01")</code>). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Se tienen que cumplir todas</span>
<span class="va">edad</span> <span class="op">&lt;</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">fecha_nacimiento</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1990-01-01"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hermanos</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># otra forma</span>
<span class="va">edad</span> <span class="op">&lt;</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">fecha_nacimiento</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1990-01-01"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hermanos</span> <span class="op">==</span> <span class="cn">TRUE</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: modifica el código del ejercicio anterior para obtener una variable lógica que nos diga si se cumplen (al menos) alguna de las condiciones i) menor de 30 años; ii) con hermanos; iii) nacido en 1990 o posterior. Al contrario que antes, no necesitamos que se cumplan todas, nos basta con que se cumple al menos una. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Se tienen que cumplir todas</span>
<span class="va">edad</span> <span class="op">&lt;</span> <span class="fl">30</span> <span class="op">|</span> <span class="va">fecha_nacimiento</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1990-01-01"</span><span class="op">)</span> <span class="op">|</span> <span class="va">hermanos</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: calcula la fecha 11 días más tarde a tu fecha de nacimiento. Obtén la semana del año de dicha fecha y el día de la semana con las funciones <code>week</code>, <code>wday</code> y <code>weekdays</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Podemos sumar porque es fecha</span>
<span class="va">fecha_post</span> <span class="op">&lt;-</span> <span class="va">fecha_nacimiento</span> <span class="op">+</span> <span class="fl">11</span>
<span class="va">fecha_post</span></code></pre></div>
<pre><code>## [1] "1989-09-21"</code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Semana del año</span>
<span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/week.html">week</a></span><span class="op">(</span><span class="va">fecha_post</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 38</code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Día de la semana (versión americana, empiezan el domingo)</span>
<span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/day.html">wday</a></span><span class="op">(</span><span class="va">fecha_post</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Día de la semana (versión española)</span>
<span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/day.html">wday</a></span><span class="op">(</span><span class="va">fecha_post</span>, week_start <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Día de la semana en texto</span>
<span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">weekdays</a></span><span class="op">(</span><span class="va">fecha_post</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Thursday"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: define dos números cualesquiera en variable <code>a</code> y <code>b</code>. Calcula su suma y determina cual es mayor. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">5</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">7</span>

<span class="co"># Suma</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="va">a</span> <span class="op">+</span> <span class="va">b</span>
<span class="va">c</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Comparaciones</span>
<span class="va">a</span> <span class="op">==</span> <span class="va">b</span> <span class="co"># ¿a = b?</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;</span> <span class="va">b</span> <span class="co"># ¿a &lt; b?</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<!-- tocstop -->
</details><p> </p>
</div>
<div id="vectores" class="section level2 unnumbered">
<h2>Vectores<a class="anchor" aria-label="anchor" href="#vectores"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script06.R"><strong>script06.R</strong></a>: vectores. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script06.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script06.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: modifica el código anterior para crear un vector de nombre <code>vector_num</code> que contenga los números 1, 5 y -7.</summary></p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">vector_num</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span>
<span class="va">vector_num</span></code></pre></div>
<pre><code>## [1]  1  5 -7</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: define un vector que contenga los números 1, 10, -1 y 2, y guárdalo en una variable llamada <code>vector_num</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">vector_num</span></code></pre></div>
<pre><code>## [1]  1 10 -1  2</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: obtén la longitud del vector anterior <code>vector_num</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Longitud del vector</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: crea un vector con las palabras “Hola”, “me”, “llamo” (y tu nombre y apellidos), y pega luego sus elementos de forma que la frase esté correctamente escrita en castellano. Tras hacerlo, añade “y tengo 30 años”. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definiendo el vector</span>
<span class="va">vector_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hola"</span>, <span class="st">"me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javier"</span>,
                 <span class="st">"Álvarez"</span>, <span class="st">"Liébana"</span><span class="op">)</span>

<span class="co"># Pegamos</span>
<span class="va">frase</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">vector_char</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span>
<span class="va">frase</span></code></pre></div>
<pre><code>## [1] "Hola me llamo Javier Álvarez Liébana"</code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Añadimos frase</span>
<span class="fu"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span><span class="op">(</span><span class="st">"{frase} y tengo 30 años."</span><span class="op">)</span></code></pre></div>
<pre><code>## Hola me llamo Javier Álvarez Liébana y tengo 30 años.</code></pre>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Otra forma</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">frase</span>, <span class="st">" y tengo 30 años."</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Hola me llamo Javier Álvarez Liébana y tengo 30 años."</code></pre>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Otra forma</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">frase</span>, <span class="st">"y tengo 30 años."</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Hola me llamo Javier Álvarez Liébana y tengo 30 años."</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: el código inferior crea una secuencia de números, que empieza en <code>-1</code>, que acaba en <code>32</code>, y que va saltando de 2 en 2. Modíficalo para que haga el salto de 3 en 3 y guárdalo en una variable llamada <code>secuencia</code>.</summary></p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">32</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">secuencia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">32</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">secuencia</span></code></pre></div>
<pre><code>##  [1] -1  2  5  8 11 14 17 20 23 26 29 32</code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">secuencia</span><span class="op">)</span> <span class="co"># longitud de la secuencia</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: crea una secuencia de números, que empiece en <code>-1</code>, que acabe en <code>32</code>, y que tenga longitud 12. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">secuencia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">32</span>, l <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>
<span class="va">secuencia</span></code></pre></div>
<pre><code>##  [1] -1  2  5  8 11 14 17 20 23 26 29 32</code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">secuencia</span><span class="op">)</span> <span class="co"># longitud de la secuencia</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: crea una secuencia que empiece en 1 y recorra todos los naturales hasta el 10. Después crea otra secuencia de longitud 7 que todos los números sean <code>3</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">1</span><span class="op">:</span><span class="fl">10</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span> <span class="co"># secuencia repetida</span></code></pre></div>
<pre><code>## [1] 3 3 3 3 3 3 3</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: crea una secuencia que repita 5 veces el patrón <code>1, 2, 3</code>. Después crea otra que repita dicho patrón pero de forma intercalada, con 5 veces <code>1</code>, después 5 veces <code>2</code> y después 5 veces <code>3</code>.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span> <span class="co"># repetimos patrón (1, 2, 3) 5 veces</span></code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># repetimos patrón alternado</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 9</strong>: crea un vector con las edades de cuatro conocidos o familiares. Tras ello, determina cuáles de ellos tienen menos de 20 años, 30 años o más, menos de 40 años y más de 65 años.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">27</span>, <span class="fl">32</span>, <span class="fl">60</span>, <span class="fl">61</span><span class="op">)</span> <span class="co"># en mi caso, por ejemplo</span>
<span class="va">edades</span> <span class="op">&lt;</span> <span class="fl">20</span> <span class="co"># menos de 20 años</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edades</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="co"># 30 años o más</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edades</span> <span class="op">&lt;</span> <span class="fl">40</span> <span class="co"># menos de 40 años</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edades</span> <span class="op">&gt;</span> <span class="fl">65</span> <span class="co"># más de 65 años</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE</code></pre>
<!-- tocstop -->
</details>
</div>
<div id="operaciones-con-vectores" class="section level2 unnumbered">
<h2>Operaciones con vectores<a class="anchor" aria-label="anchor" href="#operaciones-con-vectores"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script07.R"><strong>script07.R</strong></a>: operaciones con vectores. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script07.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script07.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: define de nuevo el vector <code>vector_num</code> definido como un vector que contenga los números 1, 10, -1 y 2) y calcula su suma del vector. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co"># Suma</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: define otro vector <code>vector_num2</code> que contenga los números <code>5, -7, 8, -3</code>, y haz la suma de <code>vector_num</code> y <code>vector_num2</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">7</span>, <span class="fl">8</span>, <span class="op">-</span><span class="fl">3</span><span class="op">)</span>

<span class="co"># Suma</span>
<span class="va">vector_num</span> <span class="op">+</span> <span class="va">vector_num2</span></code></pre></div>
<pre><code>## [1]  6  3  7 -1</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: calcula el número de elementos mayores que 0 del resultado de la suma de <code>vector_num</code> y <code>vector_num2</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_suma</span> <span class="op">&lt;-</span> <span class="va">vector_num</span> <span class="op">+</span> <span class="va">vector_num2</span>

<span class="co"># Suma</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">vector_suma</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: calcula la versión ordenada del vector <code>vector_num</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ordenamos el vector (con sort)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] -1  1  2 10</code></pre>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ordenamos el vector  (con order)</span>
<span class="va">vector_num</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] -1  1  2 10</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: encuentra del vector <code>vector_num</code> original el lugar (el índice) que ocupa su mínimo y su máximo. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co"># Encontrando el lugar que ocupa el máximo y mínimo</span>
<span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: encuentra del vector <code>vector_num</code> los elementos mayores que 1 y menores que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector lógico: mayores que 1 y menores que 7</span>
<span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">vector_num</span> <span class="op">&lt;</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ¿Son todos positivos?</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: define el vector <code><a href="https://rdrr.io/r/base/c.html">c(-1, 0, 4, 5, -2)</a></code>, calcula la raíz cuadrada del vector y determina que lugares son ausente de tipo <code>NaN</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>

<span class="co"># ¿Cuáles son ausentes tras aplicar la raíz cuadrada?</span>
<span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.nan</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: define el vector de los primeros números impares (hasta el 21) y extrae los elementos que ocupan los lugares 1, 4, 5, 8. Elimina del vector el segundo elemento</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de impares (de 1 a 21 saltando de dos en dos)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">21</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="co"># Seleccionamos elementos</span>
<span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1]  1  7  9 15</code></pre>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Eliminamos elementos</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span>
<span class="va">y</span></code></pre></div>
<pre><code>##  [1]  1  5  7  9 11 13 15 17 19 21</code></pre>
<!-- tocstop -->
</details>
</div>
<div id="estructuras-de-datos-matrices-y-tablas-data.frame" class="section level2 unnumbered">
<h2>Estructuras de datos: matrices y tablas (data.frame)<a class="anchor" aria-label="anchor" href="#estructuras-de-datos-matrices-y-tablas-data.frame"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script08.R"><strong>script08.R</strong></a>: matrices y data.frames. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script08.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script08.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary><strong>Ejercicio 1</strong>: modifica el código para definir una matriz <code>x</code> de ceros de 3 filas y 7 columnas.</summary></p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
## [1,]    0    0    0    0    0    0    0
## [2,]    0    0    0    0    0    0    0
## [3,]    0    0    0    0    0    0    0</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 2</strong>: a la matriz anterior, suma un 1 a cada número de la matriz y divide el resultado entre 5.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
## [1,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2
## [2,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2
## [3,]  0.2  0.2  0.2  0.2  0.2  0.2  0.2</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 3</strong>: tras definir la matriz <code>x</code> calcula su transpuesta y obtén sus dimensiones</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Transpuesta</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0
## [3,]    0    0    0
## [4,]    0    0    0
## [5,]    0    0    0
## [6,]    0    0    0
## [7,]    0    0    0</code></pre>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Dimensiones transpuesta: pasa de ser 3x7 a 7x3</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7 3</code></pre>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="co"># número de columnas de la transpuesta</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="co"># número de filas de la transpuesta</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 4</strong>: el siguiente código define una matriz de dimensiones <code>4 x 3</code> y calcula la suma por columnas. Modifica el código para que realice la suma por filas.</summary></p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="co"># Suma por columnas</span>
<span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10 26 42</code></pre>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="co"># Suma por filas</span>
<span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 15 18 21 24</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 5</strong>: con la matriz anterior definida como <code><a href="https://rdrr.io/r/base/matrix.html">matrix(1:12, nrow = 4)</a></code>, calcula la media de todos los elementos, la media de cada fila y la media de cada columna.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="co">#  media de todos</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 6.5</code></pre>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Media por filas (MARGIN = 1 ya que es una operación por filas)</span>
<span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 5 6 7 8</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Media por filas (MARGIN = 2 ya que es una operación por filas)</span>
<span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]  2.5  6.5 10.5</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 6</strong>: el <code>data.frame</code> llamado <code>airquality</code>, del paquete <code>{datasets}</code>, contiene variables de la calidad del aire de la ciudad de Nueva York desde mayo hasta septiembre de 1973. Obtén el nombre de las variables.
</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Ozone"   "Solar.R" "Wind"    "Temp"    "Month"   "Day"</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 7</strong>: obtén las dimensiones del conjunto de datos. ¿Cuántas variables hay? ¿Cuántos días se han medido?</summary></p>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Dimensiones</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 153   6</code></pre>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 153</code></pre>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 8</strong>: modifica el código inferior para que nos filtre solo los datos del mes de julio.</summary></p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filtramos filas</span>
<span class="va">filtro_fila</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">.</span>, subset <span class="op">=</span> <span class="va">Month</span> <span class="op">&lt;</span> <span class="fl">6</span><span class="op">)</span>
<span class="va">filtro_fila</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filtramos filas</span>
<span class="va">filtro_fila</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">airquality</span>, subset <span class="op">=</span> <span class="va">Month</span> <span class="op">==</span> <span class="fl">7</span><span class="op">)</span>
<span class="va">filtro_fila</span></code></pre></div>
<pre><code>##    Ozone Solar.R Wind Temp Month Day
## 62   135     269  4.1   84     7   1
## 63    49     248  9.2   85     7   2
## 64    32     236  9.2   81     7   3
## 65    NA     101 10.9   84     7   4
## 66    64     175  4.6   83     7   5
## 67    40     314 10.9   83     7   6
## 68    77     276  5.1   88     7   7
## 69    97     267  6.3   92     7   8
## 70    97     272  5.7   92     7   9
## 71    85     175  7.4   89     7  10
## 72    NA     139  8.6   82     7  11
## 73    10     264 14.3   73     7  12
## 74    27     175 14.9   81     7  13
## 75    NA     291 14.9   91     7  14
## 76     7      48 14.3   80     7  15
## 77    48     260  6.9   81     7  16
## 78    35     274 10.3   82     7  17
## 79    61     285  6.3   84     7  18
## 80    79     187  5.1   87     7  19
## 81    63     220 11.5   85     7  20
## 82    16       7  6.9   74     7  21
## 83    NA     258  9.7   81     7  22
## 84    NA     295 11.5   82     7  23
## 85    80     294  8.6   86     7  24
## 86   108     223  8.0   85     7  25
## 87    20      81  8.6   82     7  26
## 88    52      82 12.0   86     7  27
## 89    82     213  7.4   88     7  28
## 90    50     275  7.4   86     7  29
## 91    64     253  7.4   83     7  30
## 92    59     254  9.2   81     7  31</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 9</strong>: del conjunto <code>airquality</code> selecciona aquellos datos que no sean ni de julio ni de agosto.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filtramos filas</span>
<span class="va">filtro_fila</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">airquality</span>, subset <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">Month</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">filtro_fila</span></code></pre></div>
<pre><code>##     Ozone Solar.R Wind Temp Month Day
## 1      41     190  7.4   67     5   1
## 2      36     118  8.0   72     5   2
## 3      12     149 12.6   74     5   3
## 4      18     313 11.5   62     5   4
## 5      NA      NA 14.3   56     5   5
## 6      28      NA 14.9   66     5   6
## 7      23     299  8.6   65     5   7
## 8      19      99 13.8   59     5   8
## 9       8      19 20.1   61     5   9
## 10     NA     194  8.6   69     5  10
## 11      7      NA  6.9   74     5  11
## 12     16     256  9.7   69     5  12
## 13     11     290  9.2   66     5  13
## 14     14     274 10.9   68     5  14
## 15     18      65 13.2   58     5  15
## 16     14     334 11.5   64     5  16
## 17     34     307 12.0   66     5  17
## 18      6      78 18.4   57     5  18
## 19     30     322 11.5   68     5  19
## 20     11      44  9.7   62     5  20
## 21      1       8  9.7   59     5  21
## 22     11     320 16.6   73     5  22
## 23      4      25  9.7   61     5  23
## 24     32      92 12.0   61     5  24
## 25     NA      66 16.6   57     5  25
## 26     NA     266 14.9   58     5  26
## 27     NA      NA  8.0   57     5  27
## 28     23      13 12.0   67     5  28
## 29     45     252 14.9   81     5  29
## 30    115     223  5.7   79     5  30
## 31     37     279  7.4   76     5  31
## 32     NA     286  8.6   78     6   1
## 33     NA     287  9.7   74     6   2
## 34     NA     242 16.1   67     6   3
## 35     NA     186  9.2   84     6   4
## 36     NA     220  8.6   85     6   5
## 37     NA     264 14.3   79     6   6
## 38     29     127  9.7   82     6   7
## 39     NA     273  6.9   87     6   8
## 40     71     291 13.8   90     6   9
## 41     39     323 11.5   87     6  10
## 42     NA     259 10.9   93     6  11
## 43     NA     250  9.2   92     6  12
## 44     23     148  8.0   82     6  13
## 45     NA     332 13.8   80     6  14
## 46     NA     322 11.5   79     6  15
## 47     21     191 14.9   77     6  16
## 48     37     284 20.7   72     6  17
## 49     20      37  9.2   65     6  18
## 50     12     120 11.5   73     6  19
## 51     13     137 10.3   76     6  20
## 52     NA     150  6.3   77     6  21
## 53     NA      59  1.7   76     6  22
## 54     NA      91  4.6   76     6  23
## 55     NA     250  6.3   76     6  24
## 56     NA     135  8.0   75     6  25
## 57     NA     127  8.0   78     6  26
## 58     NA      47 10.3   73     6  27
## 59     NA      98 11.5   80     6  28
## 60     NA      31 14.9   77     6  29
## 61     NA     138  8.0   83     6  30
## 124    96     167  6.9   91     9   1
## 125    78     197  5.1   92     9   2
## 126    73     183  2.8   93     9   3
## 127    91     189  4.6   93     9   4
## 128    47      95  7.4   87     9   5
## 129    32      92 15.5   84     9   6
## 130    20     252 10.9   80     9   7
## 131    23     220 10.3   78     9   8
## 132    21     230 10.9   75     9   9
## 133    24     259  9.7   73     9  10
## 134    44     236 14.9   81     9  11
## 135    21     259 15.5   76     9  12
## 136    28     238  6.3   77     9  13
## 137     9      24 10.9   71     9  14
## 138    13     112 11.5   71     9  15
## 139    46     237  6.9   78     9  16
## 140    18     224 13.8   67     9  17
## 141    13      27 10.3   76     9  18
## 142    24     238 10.3   68     9  19
## 143    16     201  8.0   82     9  20
## 144    13     238 12.6   64     9  21
## 145    23      14  9.2   71     9  22
## 146    36     139 10.3   81     9  23
## 147     7      49 10.3   69     9  24
## 148    14      20 16.6   63     9  25
## 149    30     193  6.9   70     9  26
## 150    NA     145 13.2   77     9  27
## 151    14     191 14.3   75     9  28
## 152    18     131  8.0   76     9  29
## 153    20     223 11.5   68     9  30</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 10</strong>: modifica el siguiente código para quedarte solo con las variable <code>Ozone</code> y <code>Temp</code>.</summary></p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">filtro_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">.</span>,  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ozone"</span><span class="op">)</span><span class="op">)</span>
<span class="va">filtro_col</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filtramos columnas</span>
<span class="va">filtro_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">airquality</span>,  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ozone"</span>, <span class="st">"Temp"</span><span class="op">)</span><span class="op">)</span>
<span class="va">filtro_col</span></code></pre></div>
<pre><code>##     Ozone Temp
## 1      41   67
## 2      36   72
## 3      12   74
## 4      18   62
## 5      NA   56
## 6      28   66
## 7      23   65
## 8      19   59
## 9       8   61
## 10     NA   69
## 11      7   74
## 12     16   69
## 13     11   66
## 14     14   68
## 15     18   58
## 16     14   64
## 17     34   66
## 18      6   57
## 19     30   68
## 20     11   62
## 21      1   59
## 22     11   73
## 23      4   61
## 24     32   61
## 25     NA   57
## 26     NA   58
## 27     NA   57
## 28     23   67
## 29     45   81
## 30    115   79
## 31     37   76
## 32     NA   78
## 33     NA   74
## 34     NA   67
## 35     NA   84
## 36     NA   85
## 37     NA   79
## 38     29   82
## 39     NA   87
## 40     71   90
## 41     39   87
## 42     NA   93
## 43     NA   92
## 44     23   82
## 45     NA   80
## 46     NA   79
## 47     21   77
## 48     37   72
## 49     20   65
## 50     12   73
## 51     13   76
## 52     NA   77
## 53     NA   76
## 54     NA   76
## 55     NA   76
## 56     NA   75
## 57     NA   78
## 58     NA   73
## 59     NA   80
## 60     NA   77
## 61     NA   83
## 62    135   84
## 63     49   85
## 64     32   81
## 65     NA   84
## 66     64   83
## 67     40   83
## 68     77   88
## 69     97   92
## 70     97   92
## 71     85   89
## 72     NA   82
## 73     10   73
## 74     27   81
## 75     NA   91
## 76      7   80
## 77     48   81
## 78     35   82
## 79     61   84
## 80     79   87
## 81     63   85
## 82     16   74
## 83     NA   81
## 84     NA   82
## 85     80   86
## 86    108   85
## 87     20   82
## 88     52   86
## 89     82   88
## 90     50   86
## 91     64   83
## 92     59   81
## 93     39   81
## 94      9   81
## 95     16   82
## 96     78   86
## 97     35   85
## 98     66   87
## 99    122   89
## 100    89   90
## 101   110   90
## 102    NA   92
## 103    NA   86
## 104    44   86
## 105    28   82
## 106    65   80
## 107    NA   79
## 108    22   77
## 109    59   79
## 110    23   76
## 111    31   78
## 112    44   78
## 113    21   77
## 114     9   72
## 115    NA   75
## 116    45   79
## 117   168   81
## 118    73   86
## 119    NA   88
## 120    76   97
## 121   118   94
## 122    84   96
## 123    85   94
## 124    96   91
## 125    78   92
## 126    73   93
## 127    91   93
## 128    47   87
## 129    32   84
## 130    20   80
## 131    23   78
## 132    21   75
## 133    24   73
## 134    44   81
## 135    21   76
## 136    28   77
## 137     9   71
## 138    13   71
## 139    46   78
## 140    18   67
## 141    13   76
## 142    24   68
## 143    16   82
## 144    13   64
## 145    23   71
## 146    36   81
## 147     7   69
## 148    14   63
## 149    30   70
## 150    NA   77
## 151    14   75
## 152    18   76
## 153    20   68</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 11</strong>: del conjunto <code>airquality</code> selecciona los datos de temperatura y viento de agosto.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Todo de una vez</span>
<span class="va">filtro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">airquality</span>, subset <span class="op">=</span> <span class="va">Month</span> <span class="op">==</span> <span class="fl">8</span>,
                 select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Temp"</span>, <span class="st">"Wind"</span><span class="op">)</span><span class="op">)</span>
<span class="va">filtro</span></code></pre></div>
<pre><code>##     Temp Wind
## 93    81  6.9
## 94    81 13.8
## 95    82  7.4
## 96    86  6.9
## 97    85  7.4
## 98    87  4.6
## 99    89  4.0
## 100   90 10.3
## 101   90  8.0
## 102   92  8.6
## 103   86 11.5
## 104   86 11.5
## 105   82 11.5
## 106   80  9.7
## 107   79 11.5
## 108   77 10.3
## 109   79  6.3
## 110   76  7.4
## 111   78 10.9
## 112   78 10.3
## 113   77 15.5
## 114   72 14.3
## 115   75 12.6
## 116   79  9.7
## 117   81  3.4
## 118   86  8.0
## 119   88  5.7
## 120   97  9.7
## 121   94  2.3
## 122   96  6.3
## 123   94  6.3</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 12</strong>: calcula el número de filas borradas del ejercicio anterior. Tras hacer todo ello, traduce a castellano el nombre de las columnas del <code>data.frame</code> filtrado.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filas borradas</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">filtro</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 122</code></pre>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Cambiamos nombres a castellano del conjunto filtrado</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">filtro</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"temperatura"</span>, <span class="st">"viento"</span><span class="op">)</span></code></pre></div>
</details><p> </p>
<details><p><summary><strong>Ejercicio 13</strong>: añade a los datos originales una columna con la fecha completa (recuerda que es del año 1973 todas las observaciones.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Construimos las fechas (pegamos año-mes-día con "-")</span>
<span class="va">fechas</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"1973"</span>, <span class="va">airquality</span><span class="op">$</span><span class="va">Month</span>, <span class="va">airquality</span><span class="op">$</span><span class="va">Day</span>,
                sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Añadimos</span>
<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">airquality</span>, <span class="va">fechas</span><span class="op">)</span></code></pre></div>
<pre><code>##     Ozone Solar.R Wind Temp Month Day     fechas
## 1      41     190  7.4   67     5   1 1973-05-01
## 2      36     118  8.0   72     5   2 1973-05-02
## 3      12     149 12.6   74     5   3 1973-05-03
## 4      18     313 11.5   62     5   4 1973-05-04
## 5      NA      NA 14.3   56     5   5 1973-05-05
## 6      28      NA 14.9   66     5   6 1973-05-06
## 7      23     299  8.6   65     5   7 1973-05-07
## 8      19      99 13.8   59     5   8 1973-05-08
## 9       8      19 20.1   61     5   9 1973-05-09
## 10     NA     194  8.6   69     5  10 1973-05-10
## 11      7      NA  6.9   74     5  11 1973-05-11
## 12     16     256  9.7   69     5  12 1973-05-12
## 13     11     290  9.2   66     5  13 1973-05-13
## 14     14     274 10.9   68     5  14 1973-05-14
## 15     18      65 13.2   58     5  15 1973-05-15
## 16     14     334 11.5   64     5  16 1973-05-16
## 17     34     307 12.0   66     5  17 1973-05-17
## 18      6      78 18.4   57     5  18 1973-05-18
## 19     30     322 11.5   68     5  19 1973-05-19
## 20     11      44  9.7   62     5  20 1973-05-20
## 21      1       8  9.7   59     5  21 1973-05-21
## 22     11     320 16.6   73     5  22 1973-05-22
## 23      4      25  9.7   61     5  23 1973-05-23
## 24     32      92 12.0   61     5  24 1973-05-24
## 25     NA      66 16.6   57     5  25 1973-05-25
## 26     NA     266 14.9   58     5  26 1973-05-26
## 27     NA      NA  8.0   57     5  27 1973-05-27
## 28     23      13 12.0   67     5  28 1973-05-28
## 29     45     252 14.9   81     5  29 1973-05-29
## 30    115     223  5.7   79     5  30 1973-05-30
## 31     37     279  7.4   76     5  31 1973-05-31
## 32     NA     286  8.6   78     6   1 1973-06-01
## 33     NA     287  9.7   74     6   2 1973-06-02
## 34     NA     242 16.1   67     6   3 1973-06-03
## 35     NA     186  9.2   84     6   4 1973-06-04
## 36     NA     220  8.6   85     6   5 1973-06-05
## 37     NA     264 14.3   79     6   6 1973-06-06
## 38     29     127  9.7   82     6   7 1973-06-07
## 39     NA     273  6.9   87     6   8 1973-06-08
## 40     71     291 13.8   90     6   9 1973-06-09
## 41     39     323 11.5   87     6  10 1973-06-10
## 42     NA     259 10.9   93     6  11 1973-06-11
## 43     NA     250  9.2   92     6  12 1973-06-12
## 44     23     148  8.0   82     6  13 1973-06-13
## 45     NA     332 13.8   80     6  14 1973-06-14
## 46     NA     322 11.5   79     6  15 1973-06-15
## 47     21     191 14.9   77     6  16 1973-06-16
## 48     37     284 20.7   72     6  17 1973-06-17
## 49     20      37  9.2   65     6  18 1973-06-18
## 50     12     120 11.5   73     6  19 1973-06-19
## 51     13     137 10.3   76     6  20 1973-06-20
## 52     NA     150  6.3   77     6  21 1973-06-21
## 53     NA      59  1.7   76     6  22 1973-06-22
## 54     NA      91  4.6   76     6  23 1973-06-23
## 55     NA     250  6.3   76     6  24 1973-06-24
## 56     NA     135  8.0   75     6  25 1973-06-25
## 57     NA     127  8.0   78     6  26 1973-06-26
## 58     NA      47 10.3   73     6  27 1973-06-27
## 59     NA      98 11.5   80     6  28 1973-06-28
## 60     NA      31 14.9   77     6  29 1973-06-29
## 61     NA     138  8.0   83     6  30 1973-06-30
## 62    135     269  4.1   84     7   1 1973-07-01
## 63     49     248  9.2   85     7   2 1973-07-02
## 64     32     236  9.2   81     7   3 1973-07-03
## 65     NA     101 10.9   84     7   4 1973-07-04
## 66     64     175  4.6   83     7   5 1973-07-05
## 67     40     314 10.9   83     7   6 1973-07-06
## 68     77     276  5.1   88     7   7 1973-07-07
## 69     97     267  6.3   92     7   8 1973-07-08
## 70     97     272  5.7   92     7   9 1973-07-09
## 71     85     175  7.4   89     7  10 1973-07-10
## 72     NA     139  8.6   82     7  11 1973-07-11
## 73     10     264 14.3   73     7  12 1973-07-12
## 74     27     175 14.9   81     7  13 1973-07-13
## 75     NA     291 14.9   91     7  14 1973-07-14
## 76      7      48 14.3   80     7  15 1973-07-15
## 77     48     260  6.9   81     7  16 1973-07-16
## 78     35     274 10.3   82     7  17 1973-07-17
## 79     61     285  6.3   84     7  18 1973-07-18
## 80     79     187  5.1   87     7  19 1973-07-19
## 81     63     220 11.5   85     7  20 1973-07-20
## 82     16       7  6.9   74     7  21 1973-07-21
## 83     NA     258  9.7   81     7  22 1973-07-22
## 84     NA     295 11.5   82     7  23 1973-07-23
## 85     80     294  8.6   86     7  24 1973-07-24
## 86    108     223  8.0   85     7  25 1973-07-25
## 87     20      81  8.6   82     7  26 1973-07-26
## 88     52      82 12.0   86     7  27 1973-07-27
## 89     82     213  7.4   88     7  28 1973-07-28
## 90     50     275  7.4   86     7  29 1973-07-29
## 91     64     253  7.4   83     7  30 1973-07-30
## 92     59     254  9.2   81     7  31 1973-07-31
## 93     39      83  6.9   81     8   1 1973-08-01
## 94      9      24 13.8   81     8   2 1973-08-02
## 95     16      77  7.4   82     8   3 1973-08-03
## 96     78      NA  6.9   86     8   4 1973-08-04
## 97     35      NA  7.4   85     8   5 1973-08-05
## 98     66      NA  4.6   87     8   6 1973-08-06
## 99    122     255  4.0   89     8   7 1973-08-07
## 100    89     229 10.3   90     8   8 1973-08-08
## 101   110     207  8.0   90     8   9 1973-08-09
## 102    NA     222  8.6   92     8  10 1973-08-10
## 103    NA     137 11.5   86     8  11 1973-08-11
## 104    44     192 11.5   86     8  12 1973-08-12
## 105    28     273 11.5   82     8  13 1973-08-13
## 106    65     157  9.7   80     8  14 1973-08-14
## 107    NA      64 11.5   79     8  15 1973-08-15
## 108    22      71 10.3   77     8  16 1973-08-16
## 109    59      51  6.3   79     8  17 1973-08-17
## 110    23     115  7.4   76     8  18 1973-08-18
## 111    31     244 10.9   78     8  19 1973-08-19
## 112    44     190 10.3   78     8  20 1973-08-20
## 113    21     259 15.5   77     8  21 1973-08-21
## 114     9      36 14.3   72     8  22 1973-08-22
## 115    NA     255 12.6   75     8  23 1973-08-23
## 116    45     212  9.7   79     8  24 1973-08-24
## 117   168     238  3.4   81     8  25 1973-08-25
## 118    73     215  8.0   86     8  26 1973-08-26
## 119    NA     153  5.7   88     8  27 1973-08-27
## 120    76     203  9.7   97     8  28 1973-08-28
## 121   118     225  2.3   94     8  29 1973-08-29
## 122    84     237  6.3   96     8  30 1973-08-30
## 123    85     188  6.3   94     8  31 1973-08-31
## 124    96     167  6.9   91     9   1 1973-09-01
## 125    78     197  5.1   92     9   2 1973-09-02
## 126    73     183  2.8   93     9   3 1973-09-03
## 127    91     189  4.6   93     9   4 1973-09-04
## 128    47      95  7.4   87     9   5 1973-09-05
## 129    32      92 15.5   84     9   6 1973-09-06
## 130    20     252 10.9   80     9   7 1973-09-07
## 131    23     220 10.3   78     9   8 1973-09-08
## 132    21     230 10.9   75     9   9 1973-09-09
## 133    24     259  9.7   73     9  10 1973-09-10
## 134    44     236 14.9   81     9  11 1973-09-11
## 135    21     259 15.5   76     9  12 1973-09-12
## 136    28     238  6.3   77     9  13 1973-09-13
## 137     9      24 10.9   71     9  14 1973-09-14
## 138    13     112 11.5   71     9  15 1973-09-15
## 139    46     237  6.9   78     9  16 1973-09-16
## 140    18     224 13.8   67     9  17 1973-09-17
## 141    13      27 10.3   76     9  18 1973-09-18
## 142    24     238 10.3   68     9  19 1973-09-19
## 143    16     201  8.0   82     9  20 1973-09-20
## 144    13     238 12.6   64     9  21 1973-09-21
## 145    23      14  9.2   71     9  22 1973-09-22
## 146    36     139 10.3   81     9  23 1973-09-23
## 147     7      49 10.3   69     9  24 1973-09-24
## 148    14      20 16.6   63     9  25 1973-09-25
## 149    30     193  6.9   70     9  26 1973-09-26
## 150    NA     145 13.2   77     9  27 1973-09-27
## 151    14     191 14.3   75     9  28 1973-09-28
## 152    18     131  8.0   76     9  29 1973-09-29
## 153    20     223 11.5   68     9  30 1973-09-30</code></pre>
</details><p> </p>
</div>
<div id="repaso-empezando-a-trastear-datos" class="section level2 unnumbered">
<h2>Repaso: empezando a trastear datos<a class="anchor" aria-label="anchor" href="#repaso-empezando-a-trastear-datos"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script09.R"><strong>script09.R</strong></a>: repaso. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script09.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script09.R</a>
</li>
</ul>
</div>
<p><mark><strong>1. ¿Cómo cargarías los datos sabiendo su nombre y el paquete en el que está?</strong></mark></p>
<p> </p>
<p>Nuestros datos se llaman <code>swiss</code> y son del paquete <code>{datasets}</code>, así que lo primero que debemos hacer es instalar el paquete (en caso de no haberlo hecho aún, con <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("datasets")</a></code>), después <strong>llamar a ese paquete</strong> (tenemos el libro comprado y lo sacamos de la estantería) con <code><a href="https://rdrr.io/r/base/library.html">library(datasets)</a></code> y escribir el nombre del conjunto de datos para mostrarlo.</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span>
<span class="va">swiss</span></code></pre></div>
<pre><code>##              Fertility Agriculture Examination Education Catholic
## Courtelary        80.2        17.0          15        12     9.96
## Delemont          83.1        45.1           6         9    84.84
## Franches-Mnt      92.5        39.7           5         5    93.40
## Moutier           85.8        36.5          12         7    33.77
## Neuveville        76.9        43.5          17        15     5.16
## Porrentruy        76.1        35.3           9         7    90.57
## Broye             83.8        70.2          16         7    92.85
## Glane             92.4        67.8          14         8    97.16
## Gruyere           82.4        53.3          12         7    97.67
## Sarine            82.9        45.2          16        13    91.38
## Veveyse           87.1        64.5          14         6    98.61
## Aigle             64.1        62.0          21        12     8.52
## Aubonne           66.9        67.5          14         7     2.27
## Avenches          68.9        60.7          19        12     4.43
## Cossonay          61.7        69.3          22         5     2.82
## Echallens         68.3        72.6          18         2    24.20
## Grandson          71.7        34.0          17         8     3.30
## Lausanne          55.7        19.4          26        28    12.11
## La Vallee         54.3        15.2          31        20     2.15
## Lavaux            65.1        73.0          19         9     2.84
## Morges            65.5        59.8          22        10     5.23
## Moudon            65.0        55.1          14         3     4.52
## Nyone             56.6        50.9          22        12    15.14
## Orbe              57.4        54.1          20         6     4.20
## Oron              72.5        71.2          12         1     2.40
## Payerne           74.2        58.1          14         8     5.23
## Paysd'enhaut      72.0        63.5           6         3     2.56
## Rolle             60.5        60.8          16        10     7.72
## Vevey             58.3        26.8          25        19    18.46
## Yverdon           65.4        49.5          15         8     6.10
## Conthey           75.5        85.9           3         2    99.71
## Entremont         69.3        84.9           7         6    99.68
## Herens            77.3        89.7           5         2   100.00
## Martigwy          70.5        78.2          12         6    98.96
## Monthey           79.4        64.9           7         3    98.22
## St Maurice        65.0        75.9           9         9    99.06
## Sierre            92.2        84.6           3         3    99.46
## Sion              79.3        63.1          13        13    96.83
## Boudry            70.4        38.4          26        12     5.62
## La Chauxdfnd      65.7         7.7          29        11    13.79
## Le Locle          72.7        16.7          22        13    11.22
## Neuchatel         64.4        17.6          35        32    16.92
## Val de Ruz        77.6        37.6          15         7     4.97
## ValdeTravers      67.6        18.7          25         7     8.65
## V. De Geneve      35.0         1.2          37        53    42.34
## Rive Droite       44.7        46.6          16        29    50.43
## Rive Gauche       42.8        27.7          22        29    58.33
##              Infant.Mortality
## Courtelary               22.2
## Delemont                 22.2
## Franches-Mnt             20.2
## Moutier                  20.3
## Neuveville               20.6
## Porrentruy               26.6
## Broye                    23.6
## Glane                    24.9
## Gruyere                  21.0
## Sarine                   24.4
## Veveyse                  24.5
## Aigle                    16.5
## Aubonne                  19.1
## Avenches                 22.7
## Cossonay                 18.7
## Echallens                21.2
## Grandson                 20.0
## Lausanne                 20.2
## La Vallee                10.8
## Lavaux                   20.0
## Morges                   18.0
## Moudon                   22.4
## Nyone                    16.7
## Orbe                     15.3
## Oron                     21.0
## Payerne                  23.8
## Paysd'enhaut             18.0
## Rolle                    16.3
## Vevey                    20.9
## Yverdon                  22.5
## Conthey                  15.1
## Entremont                19.8
## Herens                   18.3
## Martigwy                 19.4
## Monthey                  20.2
## St Maurice               17.8
## Sierre                   16.3
## Sion                     18.1
## Boudry                   20.3
## La Chauxdfnd             20.5
## Le Locle                 18.9
## Neuchatel                23.0
## Val de Ruz               20.0
## ValdeTravers             19.5
## V. De Geneve             18.0
## Rive Droite              18.2
## Rive Gauche              19.3</code></pre>
<p>Podríamos no pedirle el libro entero sino <strong>solo esa página</strong>, de ese conjunto de datos, usando <code><a href="https://rdrr.io/r/datasets/swiss.html">datasets::swiss</a></code> (sin hacer uso del <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> previo).</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">datasets</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/datasets/swiss.html">swiss</a></span></code></pre></div>
<p> </p>
<p><mark><strong>2. Tenemos los datos guardados en <code>swiss</code>, ¿qué tipo de objeto es?</strong></mark></p>
<p> </p>
<p>Al mostrarlos ya lo habrás intuido pero nuestro conjunto <code>swiss</code> es de tipo <code>data.frame</code>. Para comprobarlo podemos usar la función <code><a href="https://rdrr.io/r/base/class.html">class()</a></code>.</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "data.frame"</code></pre>
<p>Si somos un poco observadores/as vemos que todas las variables parecen numéricas así que…podríamos tener una matriz de números. <mark><strong>¿Cómo convertimos los datos a una matriz?</strong></mark></p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>##              Fertility Agriculture Examination Education Catholic
## Courtelary        80.2        17.0          15        12     9.96
## Delemont          83.1        45.1           6         9    84.84
## Franches-Mnt      92.5        39.7           5         5    93.40
## Moutier           85.8        36.5          12         7    33.77
## Neuveville        76.9        43.5          17        15     5.16
## Porrentruy        76.1        35.3           9         7    90.57
## Broye             83.8        70.2          16         7    92.85
## Glane             92.4        67.8          14         8    97.16
## Gruyere           82.4        53.3          12         7    97.67
## Sarine            82.9        45.2          16        13    91.38
## Veveyse           87.1        64.5          14         6    98.61
## Aigle             64.1        62.0          21        12     8.52
## Aubonne           66.9        67.5          14         7     2.27
## Avenches          68.9        60.7          19        12     4.43
## Cossonay          61.7        69.3          22         5     2.82
## Echallens         68.3        72.6          18         2    24.20
## Grandson          71.7        34.0          17         8     3.30
## Lausanne          55.7        19.4          26        28    12.11
## La Vallee         54.3        15.2          31        20     2.15
## Lavaux            65.1        73.0          19         9     2.84
## Morges            65.5        59.8          22        10     5.23
## Moudon            65.0        55.1          14         3     4.52
## Nyone             56.6        50.9          22        12    15.14
## Orbe              57.4        54.1          20         6     4.20
## Oron              72.5        71.2          12         1     2.40
## Payerne           74.2        58.1          14         8     5.23
## Paysd'enhaut      72.0        63.5           6         3     2.56
## Rolle             60.5        60.8          16        10     7.72
## Vevey             58.3        26.8          25        19    18.46
## Yverdon           65.4        49.5          15         8     6.10
## Conthey           75.5        85.9           3         2    99.71
## Entremont         69.3        84.9           7         6    99.68
## Herens            77.3        89.7           5         2   100.00
## Martigwy          70.5        78.2          12         6    98.96
## Monthey           79.4        64.9           7         3    98.22
## St Maurice        65.0        75.9           9         9    99.06
## Sierre            92.2        84.6           3         3    99.46
## Sion              79.3        63.1          13        13    96.83
## Boudry            70.4        38.4          26        12     5.62
## La Chauxdfnd      65.7         7.7          29        11    13.79
## Le Locle          72.7        16.7          22        13    11.22
## Neuchatel         64.4        17.6          35        32    16.92
## Val de Ruz        77.6        37.6          15         7     4.97
## ValdeTravers      67.6        18.7          25         7     8.65
## V. De Geneve      35.0         1.2          37        53    42.34
## Rive Droite       44.7        46.6          16        29    50.43
## Rive Gauche       42.8        27.7          22        29    58.33
##              Infant.Mortality
## Courtelary               22.2
## Delemont                 22.2
## Franches-Mnt             20.2
## Moutier                  20.3
## Neuveville               20.6
## Porrentruy               26.6
## Broye                    23.6
## Glane                    24.9
## Gruyere                  21.0
## Sarine                   24.4
## Veveyse                  24.5
## Aigle                    16.5
## Aubonne                  19.1
## Avenches                 22.7
## Cossonay                 18.7
## Echallens                21.2
## Grandson                 20.0
## Lausanne                 20.2
## La Vallee                10.8
## Lavaux                   20.0
## Morges                   18.0
## Moudon                   22.4
## Nyone                    16.7
## Orbe                     15.3
## Oron                     21.0
## Payerne                  23.8
## Paysd'enhaut             18.0
## Rolle                    16.3
## Vevey                    20.9
## Yverdon                  22.5
## Conthey                  15.1
## Entremont                19.8
## Herens                   18.3
## Martigwy                 19.4
## Monthey                  20.2
## St Maurice               17.8
## Sierre                   16.3
## Sion                     18.1
## Boudry                   20.3
## La Chauxdfnd             20.5
## Le Locle                 18.9
## Neuchatel                23.0
## Val de Ruz               20.0
## ValdeTravers             19.5
## V. De Geneve             18.0
## Rive Droite              18.2
## Rive Gauche              19.3</code></pre>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "matrix"</code></pre>
<p> </p>
<p><mark><strong>3. ¿Cómo podríamos tener una descripción detallada de los datos?</strong></mark></p>
<p> </p>
<p>La forma más inmediata es hacerlo es con la función <code><a href="https://rdrr.io/r/datasets/swiss.html">? swiss</a></code>, que nos permite ver la documentación en el panel de ayuda.</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">swiss</span></code></pre></div>
<p>También podemos ver el nombre de las columnas con <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> y el nombre de las filas con <code><a href="https://rdrr.io/r/base/row.names.html">row.names()</a></code></p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Fertility"        "Agriculture"      "Examination"      "Education"       
## [5] "Catholic"         "Infant.Mortality"</code></pre>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "Courtelary"   "Delemont"     "Franches-Mnt" "Moutier"      "Neuveville"  
##  [6] "Porrentruy"   "Broye"        "Glane"        "Gruyere"      "Sarine"      
## [11] "Veveyse"      "Aigle"        "Aubonne"      "Avenches"     "Cossonay"    
## [16] "Echallens"    "Grandson"     "Lausanne"     "La Vallee"    "Lavaux"      
## [21] "Morges"       "Moudon"       "Nyone"        "Orbe"         "Oron"        
## [26] "Payerne"      "Paysd'enhaut" "Rolle"        "Vevey"        "Yverdon"     
## [31] "Conthey"      "Entremont"    "Herens"       "Martigwy"     "Monthey"     
## [36] "St Maurice"   "Sierre"       "Sion"         "Boudry"       "La Chauxdfnd"
## [41] "Le Locle"     "Neuchatel"    "Val de Ruz"   "ValdeTravers" "V. De Geneve"
## [46] "Rive Droite"  "Rive Gauche"</code></pre>
<p>Los datos representan algunos <strong>indicadores de fertilidad y socioeconómicos</strong> (estandarizados, entre 0 y 100) de las 47 provincias francoparlantes de Suiza, con datos del año 1888. Como podemos <strong>leer en la ayuda</strong>, en la web <a href="https://opr.princeton.edu/archive/pefp/switz.aspx" class="uri">https://opr.princeton.edu/archive/pefp/switz.aspx</a> tenemos los datos de 182 distritos para dicho año.</p>
<p> </p>
<p><mark><strong>4. ¿Cómo podríamos «ver» los datos? ¿Cuántas provincias hay incluidas? ¿Cuántas variables han sido medidas en cada una de ellas?</strong></mark></p>
<p> </p>
<p>Podemos hacerlo de varias maneras, y una de ellas es pedirle una <strong>cabecera</strong> de la tabla (las primeras filas) con <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>.</p>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>##              Fertility Agriculture Examination Education Catholic
## Courtelary        80.2        17.0          15        12     9.96
## Delemont          83.1        45.1           6         9    84.84
## Franches-Mnt      92.5        39.7           5         5    93.40
## Moutier           85.8        36.5          12         7    33.77
## Neuveville        76.9        43.5          17        15     5.16
## Porrentruy        76.1        35.3           9         7    90.57
##              Infant.Mortality
## Courtelary               22.2
## Delemont                 22.2
## Franches-Mnt             20.2
## Moutier                  20.3
## Neuveville               20.6
## Porrentruy               26.6</code></pre>
<p>También podemos ver una versión «excelizada» de los datos con `View()</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<p>Para <strong>ver las dimensiones de los datos</strong> podemos recurrir a <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> (nos dará un vector de longitud 2 con el número de filas y columnas) o a <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> y <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code></p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 47  6</code></pre>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 47</code></pre>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p> </p>
<p><mark><strong>5. ¿Cómo podríamos definir una nueva variable de tipo texto con los nombres de filas que obtenemos de <code><a href="https://rdrr.io/r/base/row.names.html">row.names()</a></code>?</strong></mark></p>
<p> </p>
<p>La función <code><a href="https://rdrr.io/r/base/row.names.html">row.names()</a></code> nos devuelve los nombres de las filas, que vamos a guardar en una variable (por ejemplo, en <code>nombres</code>).</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">swiss</span><span class="op">)</span>
<span class="va">nombres</span></code></pre></div>
<pre><code>##  [1] "Courtelary"   "Delemont"     "Franches-Mnt" "Moutier"      "Neuveville"  
##  [6] "Porrentruy"   "Broye"        "Glane"        "Gruyere"      "Sarine"      
## [11] "Veveyse"      "Aigle"        "Aubonne"      "Avenches"     "Cossonay"    
## [16] "Echallens"    "Grandson"     "Lausanne"     "La Vallee"    "Lavaux"      
## [21] "Morges"       "Moudon"       "Nyone"        "Orbe"         "Oron"        
## [26] "Payerne"      "Paysd'enhaut" "Rolle"        "Vevey"        "Yverdon"     
## [31] "Conthey"      "Entremont"    "Herens"       "Martigwy"     "Monthey"     
## [36] "St Maurice"   "Sierre"       "Sion"         "Boudry"       "La Chauxdfnd"
## [41] "Le Locle"     "Neuchatel"    "Val de Ruz"   "ValdeTravers" "V. De Geneve"
## [46] "Rive Droite"  "Rive Gauche"</code></pre>
</div>
<div id="estructuras-condicionales" class="section level2 unnumbered">
<h2>Estructuras condicionales<a class="anchor" aria-label="anchor" href="#estructuras-condicionales"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script10.R"><strong>script10.R</strong></a>: if-else. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script10.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script10.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: modifica el código inferior para imprimir un mensaje por pantalla si todos los datos del conjunto <code>airquality</code> son de meses que no sean enero.</summary></p>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span> <span class="co"># paquete con los adtos</span>
<span class="va">mes</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Month</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">mes</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Ningún dato es del mes de enero"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span> <span class="co"># paquete con los datos</span>
<span class="va">mes</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Month</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">mes</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># todos con mes distinto de 1</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Ningún dato es del mes de enero"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<pre><code>## [1] "Ningún dato es del mes de enero"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: modifica el código inferior para imprimir un mensaje por pantalla si alguno de los registros tiene una temperatura mayor a 90 (Farenheit).</summary></p>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temperatura</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">temperatura</span>  <span class="op">==</span> <span class="fl">100</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Alguno de los registros tiene temperatura superior a 90 Farenheit"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temperatura</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="va">temperatura</span> <span class="op">&gt;</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Alguno de los registros tiene temperatura superior a 90 Farenheit"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<pre><code>## [1] "Alguno de los registros tiene temperatura superior a 90 Farenheit"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: modifica el código inferior para imprimir un mensaje por pantalla si alguno de los días supera la temperatura de 100.</summary></p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temperatura</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">temperatura</span> <span class="op">&lt;</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Alguno de los registros tiene temperatura superior a 100 Farenheit"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">temperatura</span> <span class="op">&lt;-</span> <span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="va">temperatura</span> <span class="op">&gt;</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># nos basta con uno</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Alguno de los registros tiene temperatura superior a 100 Farenheit"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p>No imprime nada porque ninguno cumple la condición.</p>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: del paquete <a href="https://lubridate.tidyverse.org">lubridate</a>, la función <code><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour()</a></code> nos devuelve la hora de una fecha dada, y la función <code><a href="https://rdrr.io/pkg/lubridate/man/now.html">now()</a></code> nos devuelve fecha y hora del momento actual. Con ambas funciones, y usando <code>if</code>, imprime por pantalla <code>"buenas noches"</code> solo a partir de las 21 horas. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Cargamos librería</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>

<span class="co"># Fecha-hora actual</span>
<span class="va">fecha_actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/now.html">now</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Estructura if</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">21</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Buenas noches"</span><span class="op">)</span> <span class="co"># print/cat dos formas de imprimir por pantalla</span>
<span class="op">}</span></code></pre></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: con las funciones del ejercicio anterior, y usando una estructura <code>if-else</code>, imprime por pantalla <code>"buenos días"</code> (de 6 a 14 horas), <code>"buenas tardes"</code> (de 14 a 21 horas) o <code>"buenas noches"</code> (de las 21 a las 6 horas). </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Fecha actual</span>
<span class="va">fecha_actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/now.html">now</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Estructura if-else</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">14</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Buenos días"</span><span class="op">)</span>
  
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">14</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">21</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Buenas tardes"</span><span class="op">)</span>
  
<span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Buenas noches"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## Buenos días</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: realiza el ejercicio anterior pero sin estructura de llaves, de forma concisa con <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>. Mira la ayuda si la necesitases poniendo <code><a href="https://rdrr.io/r/base/ifelse.html">? ifelse</a></code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Fecha actual</span>
<span class="va">fecha_actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/now.html">now</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Estructura if-else</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">14</span>,
           <span class="st">"Buenos días"</span>,
           <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">14</span> <span class="op">&amp;</span>
                    <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/hour.html">hour</a></span><span class="op">(</span><span class="va">fecha_actual</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">21</span>,
                  <span class="st">"Buenas tardes"</span>, <span class="st">"Buenas noches"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Buenos días</code></pre>
<!-- tocstop -->
</details><p> </p>
</div>
<div id="bucles" class="section level2 unnumbered">
<h2>Bucles<a class="anchor" aria-label="anchor" href="#bucles"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script11.R"><strong>script11.R</strong></a>: bucles. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script11.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script11.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: modifica el código interior para diseñar un bucle <code>for</code> de 5 iteraciones que recorra los 5 primeros impares y les sume uno.</summary></p>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Una forma</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 4
## [1] 6
## [1] 8
## [1] 10</code></pre>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Otra</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 4
## [1] 6
## [1] 8
## [1] 10</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: modifica el código interior para diseñar un bucle <code>while</code> que parta con una variable <code>conteo &lt;- 1</code> y pare cuando llegue a 6.</summary></p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">conteo</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="kw">while</span> <span class="op">(</span><span class="va">conteo</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">conteo</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">conteo</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="kw">while</span> <span class="op">(</span><span class="va">conteo</span> <span class="op">&lt;</span> <span class="fl">6</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">conteo</span><span class="op">)</span>
  <span class="va">conteo</span> <span class="op">&lt;-</span> <span class="va">conteo</span> <span class="op">&lt;-</span> <span class="va">conteo</span> <span class="op">+</span> <span class="fl">1</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: construye un bucle que recorra las primeras 8 filas del conjunto de datos <code><a href="https://rdrr.io/pkg/MASS/man/mammals.html">MASS::mammals</a></code> y que imprima el peso del animal (en kg) multiplicado por 1000 (gramos).</summary></p>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu">MASS</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/MASS/man/mammals.html">mammals</a></span><span class="op">$</span><span class="va">body</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">*</span> <span class="fl">1000</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code>## [1] 3385
## [1] 480
## [1] 1350
## [1] 465000
## [1] 36330
## [1] 27660
## [1] 14830
## [1] 1040</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: diseña un bucle <code>for</code> de 200 iteraciones que, empezando en un valor inicial de 100 (euros), te sume 3€ si el número actual es par y te reste 5€ si es impar.</summary></p>
<p>Un número par o impar: un número par será todo aquel número que al dividir entre 2, la división es exacta, es decir, que su resto es nulo. Por ejemplo, al dividir 5 entre 2, el resto es 1, pero al dividir 12 entre 2 el resto es 0. Para calcula ese resto usaremos la función <code><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></code>.</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">5</span> <span class="op">%%</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">12</span> <span class="op">%%</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">23</span> <span class="op">%%</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">46</span> <span class="op">%%</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dinero inicial</span>
<span class="va">dinero</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="co"># Bucle for</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">200</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">dinero</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dinero</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">dinero</span> <span class="op">+</span> <span class="fl">3</span>, <span class="va">dinero</span>  <span class="op">-</span> <span class="fl">5</span><span class="op">)</span>
  
<span class="op">}</span>
<span class="va">dinero</span></code></pre></div>
<pre><code>## [1] -100</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: diseña el anterior bucle pero guardando el dinero de cada iteración.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># vector de importes</span>
<span class="va">dinero</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">201</span><span class="op">)</span>
<span class="va">dinero</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="co"># dinero inicial</span>

<span class="co"># Bucle for</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fl">201</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># si dinero[i - 1] es par o  impar</span>
  <span class="va">dinero</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dinero</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">dinero</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="fl">3</span>,
                      <span class="va">dinero</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span><span class="op">]</span>  <span class="op">-</span> <span class="fl">5</span><span class="op">)</span>
  
<span class="op">}</span>
<span class="va">dinero</span></code></pre></div>
<pre><code>##   [1]  100  103   98  101   96   99   94   97   92   95   90   93   88   91   86
##  [16]   89   84   87   82   85   80   83   78   81   76   79   74   77   72   75
##  [31]   70   73   68   71   66   69   64   67   62   65   60   63   58   61   56
##  [46]   59   54   57   52   55   50   53   48   51   46   49   44   47   42   45
##  [61]   40   43   38   41   36   39   34   37   32   35   30   33   28   31   26
##  [76]   29   24   27   22   25   20   23   18   21   16   19   14   17   12   15
##  [91]   10   13    8   11    6    9    4    7    2    5    0    3   -2    1   -4
## [106]   -1   -6   -3   -8   -5  -10   -7  -12   -9  -14  -11  -16  -13  -18  -15
## [121]  -20  -17  -22  -19  -24  -21  -26  -23  -28  -25  -30  -27  -32  -29  -34
## [136]  -31  -36  -33  -38  -35  -40  -37  -42  -39  -44  -41  -46  -43  -48  -45
## [151]  -50  -47  -52  -49  -54  -51  -56  -53  -58  -55  -60  -57  -62  -59  -64
## [166]  -61  -66  -63  -68  -65  -70  -67  -72  -69  -74  -71  -76  -73  -78  -75
## [181]  -80  -77  -82  -79  -84  -81  -86  -83  -88  -85  -90  -87  -92  -89  -94
## [196]  -91  -96  -93  -98  -95 -100</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: diseña el bucle del ejercicio 4 parando cuando no nos quede dinero.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dinero</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="co"># dinero inicial</span>

<span class="co"># Bucle while</span>
<span class="kw">while</span> <span class="op">(</span><span class="va">dinero</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">dinero</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dinero</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">dinero</span> <span class="op">+</span> <span class="fl">3</span>, <span class="va">dinero</span> <span class="op">-</span> <span class="fl">5</span><span class="op">)</span>
  
<span class="op">}</span>
<span class="va">dinero</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<!-- tocstop -->
</details>
</div>
<div id="funciones" class="section level2 unnumbered">
<h2>Funciones<a class="anchor" aria-label="anchor" href="#funciones"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script13.R"><strong>script13.R</strong></a>: funciones. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script13.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script13.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary><strong>Ejercicio 1</strong>: modifica el código inferior para definir una función llamada <code>funcion_suma</code>, de forma que dados dos elementos, devuelve su suma.</summary></p>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">nombre</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Sumamos</span>
  <span class="va">suma</span> <span class="op">&lt;-</span> <span class="co"># código a ejecutar</span>
  
  <span class="co"># ¿Qué devolvemos?</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">suma</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">funcion_suma</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Sumamos</span>
  <span class="va">suma</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span>
  
  <span class="co"># Devolvemos la salida</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">suma</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">funcion_suma</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
</details><p>&amp;nsbp;</p>
<details><p><summary><strong>Ejercicio 2</strong>: modifica el código inferior para definir una función llamada <code>funcion_producto</code>, de forma que dados dos elementos, devuelve su producto.</summary></p>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">nombre</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Multiplicamos</span>
  <span class="va">producto</span> <span class="op">&lt;-</span> <span class="co"># código de la multiplicación</span>
  
  <span class="co"># ¿Qué devolvemos?</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">producto</span><span class="op">(</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">funcion_producto</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Multiplicamos</span>
  <span class="va">producto</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span>
  
  <span class="co"># Devolvemos la salida</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">producto</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">funcion_producto</span><span class="op">(</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] -21</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 3</strong>: modifica el código inferior para definir una función llamada <code>funcion_producto</code>, de forma que dados dos elementos, devuelve su producto, pero que por defecto calcule el cuadrado (es decir, por defecto un solo argumento, y el resultado sea el número por sí mismo)</summary></p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">nombre</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Multiplicamos</span>
  <span class="va">producto</span> <span class="op">&lt;-</span> <span class="co"># código de la multiplicación</span>
  
  <span class="co"># ¿Qué devolvemos?</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función solo con un argumento</span>
<span class="fu">producto</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>

<span class="co"># Aplicamos la función con dos argumentos</span>
<span class="fu">producto</span><span class="op">(</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span></code></pre></div>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">funcion_producto</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span> <span class="op">=</span> <span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Multiplicamos</span>
  <span class="va">producto</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">*</span> <span class="va">y</span>
  
  <span class="co"># Devolvemos la salida</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">producto</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">funcion_producto</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="co"># por defecto x = 3, y = 3</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">funcion_producto</span><span class="op">(</span><span class="fl">3</span>, <span class="op">-</span><span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] -21</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 4</strong>: define una función llamada <code>igualdad_nombres</code> que, dados dos nombres <code>persona_1</code> e <code>persona_2</code>, nos diga si son iguales o no. Hazlo considerando importantes las mayúsculas, y sin que importen las mayúsculas. Recuerda que con <code><a href="https://rdrr.io/r/base/chartr.html">toupper()</a></code> podemos pasar todo un texto a mayúscula. </summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Distinguiendo mayúsculas</span>
<span class="va">igualdad_nombres</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">persona_1</span>, <span class="va">persona_2</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">persona_1</span> <span class="op">==</span> <span class="va">persona_2</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">igualdad_nombres</span><span class="op">(</span><span class="st">"Javi"</span>, <span class="st">"javi"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">igualdad_nombres</span><span class="op">(</span><span class="st">"Javi"</span>, <span class="st">"Lucía"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sin importar mayúsculas</span>
<span class="va">igualdad_nombres</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">persona_1</span>, <span class="va">persona_2</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">persona_1</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">persona_2</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">igualdad_nombres</span><span class="op">(</span><span class="st">"Javi"</span>, <span class="st">"javi"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">igualdad_nombres</span><span class="op">(</span><span class="st">"Javi"</span>, <span class="st">"Lucía"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 5</strong>: define una función llamada <code>pares</code> que, dados dos números <code>x</code> e <code>y</code>, nos diga si la suma de ambos es par o no.</summary></p>
<p>Recuerda que con <code><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></code> podemos obtener el resto de un número al dividir entre 2.</p>
<div class="sourceCode" id="cb247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">2</span> <span class="op">%%</span> <span class="fl">2</span> <span class="co"># par, resto 0</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">3</span> <span class="op">%%</span> <span class="fl">2</span> <span class="co"># impar, resto 1</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb251"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">pares</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Sumamos</span>
  <span class="va">suma</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span>
  
  <span class="co"># Comprobamos si es par</span>
  <span class="va">par</span> <span class="op">&lt;-</span> <span class="va">suma</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>
  
  <span class="co"># Devolvemos la salida</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">par</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">pares</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span> <span class="co"># suma 4 (par)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pares</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span><span class="op">)</span> <span class="co"># suma 9 (impar)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</details><p> </p>
<p> </p>
<details><p><summary><strong>Ejercicio 6</strong>: define una función llamada <code>pasar_a_celsius</code> que, dada una temperatura <span class="math inline">\(x\)</span> en Fahrenheit, la convierta a grados Celsius (<span class="math inline">\(ºC = (ºF - 32) * \frac{5}{9}\)</span>). Aplica la función a la columna <code>Temp</code> del conjunto <code>airquality</code>, e incorpórala al fichero en una nueva columna <code>Temp_Celsius</code>.
</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos función</span>
<span class="va">pasar_a_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="co"># Temperatura en Celsius</span>
  <span class="va">x_celsius</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="fl">32</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">5</span> <span class="op">/</span> <span class="fl">9</span><span class="op">)</span>
  
  <span class="co"># Devolvemos la salida</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x_celsius</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Aplicamos la función</span>
<span class="fu">pasar_a_celsius</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] -17.77778</code></pre>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pasar_a_celsius</span><span class="op">(</span><span class="fl">80</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 26.66667</code></pre>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Aplicamos</span>
<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">airquality</span>,
           <span class="st">"Temp_Celsius"</span> <span class="op">=</span> <span class="fu">pasar_a_celsius</span><span class="op">(</span><span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##     Ozone Solar.R Wind Temp Month Day Temp_Celsius
## 1      41     190  7.4   67     5   1     19.44444
## 2      36     118  8.0   72     5   2     22.22222
## 3      12     149 12.6   74     5   3     23.33333
## 4      18     313 11.5   62     5   4     16.66667
## 5      NA      NA 14.3   56     5   5     13.33333
## 6      28      NA 14.9   66     5   6     18.88889
## 7      23     299  8.6   65     5   7     18.33333
## 8      19      99 13.8   59     5   8     15.00000
## 9       8      19 20.1   61     5   9     16.11111
## 10     NA     194  8.6   69     5  10     20.55556
## 11      7      NA  6.9   74     5  11     23.33333
## 12     16     256  9.7   69     5  12     20.55556
## 13     11     290  9.2   66     5  13     18.88889
## 14     14     274 10.9   68     5  14     20.00000
## 15     18      65 13.2   58     5  15     14.44444
## 16     14     334 11.5   64     5  16     17.77778
## 17     34     307 12.0   66     5  17     18.88889
## 18      6      78 18.4   57     5  18     13.88889
## 19     30     322 11.5   68     5  19     20.00000
## 20     11      44  9.7   62     5  20     16.66667
## 21      1       8  9.7   59     5  21     15.00000
## 22     11     320 16.6   73     5  22     22.77778
## 23      4      25  9.7   61     5  23     16.11111
## 24     32      92 12.0   61     5  24     16.11111
## 25     NA      66 16.6   57     5  25     13.88889
## 26     NA     266 14.9   58     5  26     14.44444
## 27     NA      NA  8.0   57     5  27     13.88889
## 28     23      13 12.0   67     5  28     19.44444
## 29     45     252 14.9   81     5  29     27.22222
## 30    115     223  5.7   79     5  30     26.11111
## 31     37     279  7.4   76     5  31     24.44444
## 32     NA     286  8.6   78     6   1     25.55556
## 33     NA     287  9.7   74     6   2     23.33333
## 34     NA     242 16.1   67     6   3     19.44444
## 35     NA     186  9.2   84     6   4     28.88889
## 36     NA     220  8.6   85     6   5     29.44444
## 37     NA     264 14.3   79     6   6     26.11111
## 38     29     127  9.7   82     6   7     27.77778
## 39     NA     273  6.9   87     6   8     30.55556
## 40     71     291 13.8   90     6   9     32.22222
## 41     39     323 11.5   87     6  10     30.55556
## 42     NA     259 10.9   93     6  11     33.88889
## 43     NA     250  9.2   92     6  12     33.33333
## 44     23     148  8.0   82     6  13     27.77778
## 45     NA     332 13.8   80     6  14     26.66667
## 46     NA     322 11.5   79     6  15     26.11111
## 47     21     191 14.9   77     6  16     25.00000
## 48     37     284 20.7   72     6  17     22.22222
## 49     20      37  9.2   65     6  18     18.33333
## 50     12     120 11.5   73     6  19     22.77778
## 51     13     137 10.3   76     6  20     24.44444
## 52     NA     150  6.3   77     6  21     25.00000
## 53     NA      59  1.7   76     6  22     24.44444
## 54     NA      91  4.6   76     6  23     24.44444
## 55     NA     250  6.3   76     6  24     24.44444
## 56     NA     135  8.0   75     6  25     23.88889
## 57     NA     127  8.0   78     6  26     25.55556
## 58     NA      47 10.3   73     6  27     22.77778
## 59     NA      98 11.5   80     6  28     26.66667
## 60     NA      31 14.9   77     6  29     25.00000
## 61     NA     138  8.0   83     6  30     28.33333
## 62    135     269  4.1   84     7   1     28.88889
## 63     49     248  9.2   85     7   2     29.44444
## 64     32     236  9.2   81     7   3     27.22222
## 65     NA     101 10.9   84     7   4     28.88889
## 66     64     175  4.6   83     7   5     28.33333
## 67     40     314 10.9   83     7   6     28.33333
## 68     77     276  5.1   88     7   7     31.11111
## 69     97     267  6.3   92     7   8     33.33333
## 70     97     272  5.7   92     7   9     33.33333
## 71     85     175  7.4   89     7  10     31.66667
## 72     NA     139  8.6   82     7  11     27.77778
## 73     10     264 14.3   73     7  12     22.77778
## 74     27     175 14.9   81     7  13     27.22222
## 75     NA     291 14.9   91     7  14     32.77778
## 76      7      48 14.3   80     7  15     26.66667
## 77     48     260  6.9   81     7  16     27.22222
## 78     35     274 10.3   82     7  17     27.77778
## 79     61     285  6.3   84     7  18     28.88889
## 80     79     187  5.1   87     7  19     30.55556
## 81     63     220 11.5   85     7  20     29.44444
## 82     16       7  6.9   74     7  21     23.33333
## 83     NA     258  9.7   81     7  22     27.22222
## 84     NA     295 11.5   82     7  23     27.77778
## 85     80     294  8.6   86     7  24     30.00000
## 86    108     223  8.0   85     7  25     29.44444
## 87     20      81  8.6   82     7  26     27.77778
## 88     52      82 12.0   86     7  27     30.00000
## 89     82     213  7.4   88     7  28     31.11111
## 90     50     275  7.4   86     7  29     30.00000
## 91     64     253  7.4   83     7  30     28.33333
## 92     59     254  9.2   81     7  31     27.22222
## 93     39      83  6.9   81     8   1     27.22222
## 94      9      24 13.8   81     8   2     27.22222
## 95     16      77  7.4   82     8   3     27.77778
## 96     78      NA  6.9   86     8   4     30.00000
## 97     35      NA  7.4   85     8   5     29.44444
## 98     66      NA  4.6   87     8   6     30.55556
## 99    122     255  4.0   89     8   7     31.66667
## 100    89     229 10.3   90     8   8     32.22222
## 101   110     207  8.0   90     8   9     32.22222
## 102    NA     222  8.6   92     8  10     33.33333
## 103    NA     137 11.5   86     8  11     30.00000
## 104    44     192 11.5   86     8  12     30.00000
## 105    28     273 11.5   82     8  13     27.77778
## 106    65     157  9.7   80     8  14     26.66667
## 107    NA      64 11.5   79     8  15     26.11111
## 108    22      71 10.3   77     8  16     25.00000
## 109    59      51  6.3   79     8  17     26.11111
## 110    23     115  7.4   76     8  18     24.44444
## 111    31     244 10.9   78     8  19     25.55556
## 112    44     190 10.3   78     8  20     25.55556
## 113    21     259 15.5   77     8  21     25.00000
## 114     9      36 14.3   72     8  22     22.22222
## 115    NA     255 12.6   75     8  23     23.88889
## 116    45     212  9.7   79     8  24     26.11111
## 117   168     238  3.4   81     8  25     27.22222
## 118    73     215  8.0   86     8  26     30.00000
## 119    NA     153  5.7   88     8  27     31.11111
## 120    76     203  9.7   97     8  28     36.11111
## 121   118     225  2.3   94     8  29     34.44444
## 122    84     237  6.3   96     8  30     35.55556
## 123    85     188  6.3   94     8  31     34.44444
## 124    96     167  6.9   91     9   1     32.77778
## 125    78     197  5.1   92     9   2     33.33333
## 126    73     183  2.8   93     9   3     33.88889
## 127    91     189  4.6   93     9   4     33.88889
## 128    47      95  7.4   87     9   5     30.55556
## 129    32      92 15.5   84     9   6     28.88889
## 130    20     252 10.9   80     9   7     26.66667
## 131    23     220 10.3   78     9   8     25.55556
## 132    21     230 10.9   75     9   9     23.88889
## 133    24     259  9.7   73     9  10     22.77778
## 134    44     236 14.9   81     9  11     27.22222
## 135    21     259 15.5   76     9  12     24.44444
## 136    28     238  6.3   77     9  13     25.00000
## 137     9      24 10.9   71     9  14     21.66667
## 138    13     112 11.5   71     9  15     21.66667
## 139    46     237  6.9   78     9  16     25.55556
## 140    18     224 13.8   67     9  17     19.44444
## 141    13      27 10.3   76     9  18     24.44444
## 142    24     238 10.3   68     9  19     20.00000
## 143    16     201  8.0   82     9  20     27.77778
## 144    13     238 12.6   64     9  21     17.77778
## 145    23      14  9.2   71     9  22     21.66667
## 146    36     139 10.3   81     9  23     27.22222
## 147     7      49 10.3   69     9  24     20.55556
## 148    14      20 16.6   63     9  25     17.22222
## 149    30     193  6.9   70     9  26     21.11111
## 150    NA     145 13.2   77     9  27     25.00000
## 151    14     191 14.3   75     9  28     23.88889
## 152    18     131  8.0   76     9  29     24.44444
## 153    20     223 11.5   68     9  30     20.00000</code></pre>
</details><p> </p>
</div>
<div id="listas" class="section level2 unnumbered">
<h2>Listas<a class="anchor" aria-label="anchor" href="#listas"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script14.R"><strong>script14.R</strong></a>: listas. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script14.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script14.R</a>
</li>
</ul>
</div>
<details><p><summary><strong>Ejercicio 1</strong>: define una lista de 4 elementos de tipos distintos y accede al segundo de ellos (yo incluiré uno que sea un <code>data.frame</code> para que veas que en una lista cabe de todo).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ejemplo: lista con texto, numérico, lógico y un data.frame</span>
<span class="va">lista_ejemplo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"nombre"</span> <span class="op">=</span> <span class="st">"Javier"</span>, <span class="st">"cp"</span> <span class="op">=</span> <span class="fl">28019</span>,
                      <span class="st">"soltero"</span> <span class="op">=</span> <span class="cn">TRUE</span>,
                      <span class="st">"notas"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"mates"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7.5</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span>,
                                           <span class="st">"lengua"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">lista_ejemplo</span></code></pre></div>
<pre><code>## $nombre
## [1] "Javier"
## 
## $cp
## [1] 28019
## 
## $soltero
## [1] TRUE
## 
## $notas
##   mates lengua
## 1   7.5     10
## 2   8.0      5
## 3   9.0      6</code></pre>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Longitud</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">lista_ejemplo</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos al elemento dos</span>
<span class="va">lista_ejemplo</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 28019</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 2</strong>: accede a los elementos que ocupan los lugares 1 y 4 de la lista definida anteriormente.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos al 1 y al 4</span>
<span class="va">lista_ejemplo</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## $nombre
## [1] "Javier"
## 
## $notas
##   mates lengua
## 1   7.5     10
## 2   8.0      5
## 3   9.0      6</code></pre>
<p>Otra opción es acceder con los nombres</p>
<div class="sourceCode" id="cb269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos al 1 y al 4</span>
<span class="va">lista_ejemplo</span><span class="op">$</span><span class="va">nombre</span></code></pre></div>
<pre><code>## [1] "Javier"</code></pre>
<div class="sourceCode" id="cb271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lista_ejemplo</span><span class="op">$</span><span class="va">notas</span></code></pre></div>
<pre><code>##   mates lengua
## 1   7.5     10
## 2   8.0      5
## 3   9.0      6</code></pre>
<div class="sourceCode" id="cb273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lista_ejemplo</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nombre"</span>, <span class="st">"notas"</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## $nombre
## [1] "Javier"
## 
## $notas
##   mates lengua
## 1   7.5     10
## 2   8.0      5
## 3   9.0      6</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 3</strong>: define una lista de 4 elementos que contenga, en una sola variable, tu nombre, apellido, edad y si estás soltero/a.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="co"># Creamos lista: con lubridate calculamos la diferencia de años desde la fecha de nuestro nacimiento hasta hoy (sea cuando sea hoy)</span>
<span class="va">lista_personal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"nombre"</span> <span class="op">=</span> <span class="st">"Javier"</span>,
                       <span class="st">"apellidos"</span> <span class="op">=</span> <span class="st">"Álvarez Liébana"</span>,
                       <span class="st">"edad"</span> <span class="op">=</span> <span class="fl">32</span>,
                       <span class="st">"soltero"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">lista_personal</span></code></pre></div>
<pre><code>## $nombre
## [1] "Javier"
## 
## $apellidos
## [1] "Álvarez Liébana"
## 
## $edad
## [1] 32
## 
## $soltero
## [1] TRUE</code></pre>
</details>
</div>
<div id="tibble" class="section level2 unnumbered">
<h2>Tibble<a class="anchor" aria-label="anchor" href="#tibble"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script15.R"><strong>script15.R</strong></a>: datos tibble. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script15.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script15.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: ¿es el conjunto de datos <code>airquality</code> (del paquete <code>{datasets}</code>) de tipo <code>tibble</code>? </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>Recuerda que podemos cargar elementos de un paquete (en este caso <code>{datasets}</code>) cargando <code><a href="https://rdrr.io/r/base/library.html">library(datasets)</a></code> y luego el elemento, o bien <code><a href="https://rdrr.io/r/datasets/airquality.html">datasets::airquality</a></code> (prefijo::nombre).</p>
<p>La respuesta: NO. Tienes muchas formas de comprobarlo si imprimes el conjunto por defecto.</p>
<div class="sourceCode" id="cb277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span>
<span class="va">airquality</span></code></pre></div>
<pre><code>##     Ozone Solar.R Wind Temp Month Day
## 1      41     190  7.4   67     5   1
## 2      36     118  8.0   72     5   2
## 3      12     149 12.6   74     5   3
## 4      18     313 11.5   62     5   4
## 5      NA      NA 14.3   56     5   5
## 6      28      NA 14.9   66     5   6
## 7      23     299  8.6   65     5   7
## 8      19      99 13.8   59     5   8
## 9       8      19 20.1   61     5   9
## 10     NA     194  8.6   69     5  10
## 11      7      NA  6.9   74     5  11
## 12     16     256  9.7   69     5  12
## 13     11     290  9.2   66     5  13
## 14     14     274 10.9   68     5  14
## 15     18      65 13.2   58     5  15
## 16     14     334 11.5   64     5  16
## 17     34     307 12.0   66     5  17
## 18      6      78 18.4   57     5  18
## 19     30     322 11.5   68     5  19
## 20     11      44  9.7   62     5  20
## 21      1       8  9.7   59     5  21
## 22     11     320 16.6   73     5  22
## 23      4      25  9.7   61     5  23
## 24     32      92 12.0   61     5  24
## 25     NA      66 16.6   57     5  25
## 26     NA     266 14.9   58     5  26
## 27     NA      NA  8.0   57     5  27
## 28     23      13 12.0   67     5  28
## 29     45     252 14.9   81     5  29
## 30    115     223  5.7   79     5  30
## 31     37     279  7.4   76     5  31
## 32     NA     286  8.6   78     6   1
## 33     NA     287  9.7   74     6   2
## 34     NA     242 16.1   67     6   3
## 35     NA     186  9.2   84     6   4
## 36     NA     220  8.6   85     6   5
## 37     NA     264 14.3   79     6   6
## 38     29     127  9.7   82     6   7
## 39     NA     273  6.9   87     6   8
## 40     71     291 13.8   90     6   9
## 41     39     323 11.5   87     6  10
## 42     NA     259 10.9   93     6  11
## 43     NA     250  9.2   92     6  12
## 44     23     148  8.0   82     6  13
## 45     NA     332 13.8   80     6  14
## 46     NA     322 11.5   79     6  15
## 47     21     191 14.9   77     6  16
## 48     37     284 20.7   72     6  17
## 49     20      37  9.2   65     6  18
## 50     12     120 11.5   73     6  19
## 51     13     137 10.3   76     6  20
## 52     NA     150  6.3   77     6  21
## 53     NA      59  1.7   76     6  22
## 54     NA      91  4.6   76     6  23
## 55     NA     250  6.3   76     6  24
## 56     NA     135  8.0   75     6  25
## 57     NA     127  8.0   78     6  26
## 58     NA      47 10.3   73     6  27
## 59     NA      98 11.5   80     6  28
## 60     NA      31 14.9   77     6  29
## 61     NA     138  8.0   83     6  30
## 62    135     269  4.1   84     7   1
## 63     49     248  9.2   85     7   2
## 64     32     236  9.2   81     7   3
## 65     NA     101 10.9   84     7   4
## 66     64     175  4.6   83     7   5
## 67     40     314 10.9   83     7   6
## 68     77     276  5.1   88     7   7
## 69     97     267  6.3   92     7   8
## 70     97     272  5.7   92     7   9
## 71     85     175  7.4   89     7  10
## 72     NA     139  8.6   82     7  11
## 73     10     264 14.3   73     7  12
## 74     27     175 14.9   81     7  13
## 75     NA     291 14.9   91     7  14
## 76      7      48 14.3   80     7  15
## 77     48     260  6.9   81     7  16
## 78     35     274 10.3   82     7  17
## 79     61     285  6.3   84     7  18
## 80     79     187  5.1   87     7  19
## 81     63     220 11.5   85     7  20
## 82     16       7  6.9   74     7  21
## 83     NA     258  9.7   81     7  22
## 84     NA     295 11.5   82     7  23
## 85     80     294  8.6   86     7  24
## 86    108     223  8.0   85     7  25
## 87     20      81  8.6   82     7  26
## 88     52      82 12.0   86     7  27
## 89     82     213  7.4   88     7  28
## 90     50     275  7.4   86     7  29
## 91     64     253  7.4   83     7  30
## 92     59     254  9.2   81     7  31
## 93     39      83  6.9   81     8   1
## 94      9      24 13.8   81     8   2
## 95     16      77  7.4   82     8   3
## 96     78      NA  6.9   86     8   4
## 97     35      NA  7.4   85     8   5
## 98     66      NA  4.6   87     8   6
## 99    122     255  4.0   89     8   7
## 100    89     229 10.3   90     8   8
## 101   110     207  8.0   90     8   9
## 102    NA     222  8.6   92     8  10
## 103    NA     137 11.5   86     8  11
## 104    44     192 11.5   86     8  12
## 105    28     273 11.5   82     8  13
## 106    65     157  9.7   80     8  14
## 107    NA      64 11.5   79     8  15
## 108    22      71 10.3   77     8  16
## 109    59      51  6.3   79     8  17
## 110    23     115  7.4   76     8  18
## 111    31     244 10.9   78     8  19
## 112    44     190 10.3   78     8  20
## 113    21     259 15.5   77     8  21
## 114     9      36 14.3   72     8  22
## 115    NA     255 12.6   75     8  23
## 116    45     212  9.7   79     8  24
## 117   168     238  3.4   81     8  25
## 118    73     215  8.0   86     8  26
## 119    NA     153  5.7   88     8  27
## 120    76     203  9.7   97     8  28
## 121   118     225  2.3   94     8  29
## 122    84     237  6.3   96     8  30
## 123    85     188  6.3   94     8  31
## 124    96     167  6.9   91     9   1
## 125    78     197  5.1   92     9   2
## 126    73     183  2.8   93     9   3
## 127    91     189  4.6   93     9   4
## 128    47      95  7.4   87     9   5
## 129    32      92 15.5   84     9   6
## 130    20     252 10.9   80     9   7
## 131    23     220 10.3   78     9   8
## 132    21     230 10.9   75     9   9
## 133    24     259  9.7   73     9  10
## 134    44     236 14.9   81     9  11
## 135    21     259 15.5   76     9  12
## 136    28     238  6.3   77     9  13
## 137     9      24 10.9   71     9  14
## 138    13     112 11.5   71     9  15
## 139    46     237  6.9   78     9  16
## 140    18     224 13.8   67     9  17
## 141    13      27 10.3   76     9  18
## 142    24     238 10.3   68     9  19
## 143    16     201  8.0   82     9  20
## 144    13     238 12.6   64     9  21
## 145    23      14  9.2   71     9  22
## 146    36     139 10.3   81     9  23
## 147     7      49 10.3   69     9  24
## 148    14      20 16.6   63     9  25
## 149    30     193  6.9   70     9  26
## 150    NA     145 13.2   77     9  27
## 151    14     191 14.3   75     9  28
## 152    18     131  8.0   76     9  29
## 153    20     223 11.5   68     9  30</code></pre>
<div class="sourceCode" id="cb279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "data.frame"</code></pre>
<ul>
<li>Imprime por defecto todas las filas (tiene 153 filas, debería imprimir solo 10 si fuese un tibble, para no saturar consola).</li>
<li>No especifica al imprimir que es de tipo <code>tibble</code>.</li>
<li>No especifica al imprimir el tipo de dato de las columnas.</li>
<li>Imprime el nombre de las filas (el nombre de los modelos) como si fuera una variable (¡que no existe!).</li>
</ul>
<!-- tocstop --></details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: convierte el conjunto <code>airquality</code> de <code>data.frame</code> a <code>tibble</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>Así debería de salir si fuera <code>tibble</code>.</p>
<div class="sourceCode" id="cb281"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="va">airquality_tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="va">airquality_tb</span></code></pre></div>
<pre><code>## # A tibble: 153 × 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    41     190   7.4    67     5     1
##  2    36     118   8      72     5     2
##  3    12     149  12.6    74     5     3
##  4    18     313  11.5    62     5     4
##  5    NA      NA  14.3    56     5     5
##  6    28      NA  14.9    66     5     6
##  7    23     299   8.6    65     5     7
##  8    19      99  13.8    59     5     8
##  9     8      19  20.1    61     5     9
## 10    NA     194   8.6    69     5    10
## # … with 143 more rows</code></pre>
<div class="sourceCode" id="cb283"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality_tb</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: define un <code>tibble</code> con tres variables numéricas <code>a, b, c</code>, tal que la tercera sea el producto de las dos primeras <code>c = a * b</code><mark>. Inténtalo hacer con un <code>data.frame</code></mark></summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>Un ejemplo:</p>
<div class="sourceCode" id="cb285"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/tibble/man/tibble.html">tibble</a></span><span class="op">(</span><span class="st">"a"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="st">"b"</span> <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">17</span>, <span class="st">"c"</span> <span class="op">=</span> <span class="va">a</span> <span class="op">*</span> <span class="va">b</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 3
##       a     b     c
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1     1    11    11
## 2     2    12    24
## 3     3    13    39
## 4     4    14    56
## 5     5    15    75
## 6     6    16    96
## 7     7    17   119</code></pre>
<p>Si lo intentamos con un <code>data.frame</code>, intentará buscar una variable real que tengamos guardada que se llame <code>a</code> y <code>b</code>, sin encontrarlas.</p>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"a"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="st">"b"</span> <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">17</span>, <span class="st">"c"</span> <span class="op">=</span> <span class="va">a</span> <span class="op">*</span> <span class="va">b</span><span class="op">)</span></code></pre></div>
<pre><code>##   a  b   c
## 1 1 11 -35
## 2 2 12 -35
## 3 3 13 -35
## 4 4 14 -35
## 5 5 15 -35
## 6 6 16 -35
## 7 7 17 -35</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: define un <code>tibble</code> con tres variables de nombres <code>variable</code>, <code>2</code>, <code>tercera :)</code>, e intenta acceder a ellas.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>Las variables solo con caracteres del alfabeto se podrán acceder sin necesidad de comillas.</p>
<div class="sourceCode" id="cb289"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definimos el tibble</span>
<span class="va">datos_tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/tibble.html">tibble</a></span><span class="op">(</span><span class="st">"variable"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="st">"tercera falsa :)"</span> <span class="op">=</span> <span class="fl">0</span>,
                   <span class="st">"2"</span> <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">17</span><span class="op">)</span>

<span class="co"># Accedemos a sus columnas</span>
<span class="va">datos_tb</span><span class="op">$</span><span class="va">variable</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7</code></pre>
<div class="sourceCode" id="cb291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">$</span><span class="va">`tercera falsa :)`</span></code></pre></div>
<pre><code>## [1] 0 0 0 0 0 0 0</code></pre>
<div class="sourceCode" id="cb293"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">$</span><span class="va">`2`</span></code></pre></div>
<pre><code>## [1] 11 12 13 14 15 16 17</code></pre>
<p>También se puede acceder por el orden que ocupan:</p>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   variable
##      &lt;int&gt;
## 1        1
## 2        2
## 3        3
## 4        4
## 5        5
## 6        6
## 7        7</code></pre>
<div class="sourceCode" id="cb297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   `tercera falsa :)`
##                &lt;dbl&gt;
## 1                  0
## 2                  0
## 3                  0
## 4                  0
## 5                  0
## 6                  0
## 7                  0</code></pre>
<div class="sourceCode" id="cb299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##     `2`
##   &lt;int&gt;
## 1    11
## 2    12
## 3    13
## 4    14
## 5    15
## 6    16
## 7    17</code></pre>
<p>Y también por el nombre entre corchetes (doble corchete extrae la variable fuera del tibble, corchete simple en formato tibble):</p>
<div class="sourceCode" id="cb301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="st">"variable"</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   variable
##      &lt;int&gt;
## 1        1
## 2        2
## 3        3
## 4        4
## 5        5
## 6        6
## 7        7</code></pre>
<div class="sourceCode" id="cb303"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[[</span><span class="st">"variable"</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7</code></pre>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="st">"tercera falsa :)"</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   `tercera falsa :)`
##                &lt;dbl&gt;
## 1                  0
## 2                  0
## 3                  0
## 4                  0
## 5                  0
## 6                  0
## 7                  0</code></pre>
<div class="sourceCode" id="cb307"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">datos_tb</span><span class="op">[</span><span class="st">"2"</span><span class="op">]</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##     `2`
##   &lt;int&gt;
## 1    11
## 2    12
## 3    13
## 4    14
## 5    15
## 6    16
## 7    17</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: obten de los paquetes <a href="https://dplyr.tidyverse.org">dplyr</a> y <a href="https://github.com/jennybc/gapminder">gapminder</a> los conjuntos de datos tibble <code>starwars</code> y <code>gapminder</code>. Comprueba el número de variables, de registros e imprime los datos</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># starwars</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="va">starwars</span></code></pre></div>
<pre><code>## # A tibble: 87 × 14
##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 Luke S…    172    77 blond       fair       blue            19   male  mascu…
##  2 C-3PO      167    75 &lt;NA&gt;        gold       yellow         112   none  mascu…
##  3 R2-D2       96    32 &lt;NA&gt;        white, bl… red             33   none  mascu…
##  4 Darth …    202   136 none        white      yellow          41.9 male  mascu…
##  5 Leia O…    150    49 brown       light      brown           19   fema… femin…
##  6 Owen L…    178   120 brown, grey light      blue            52   male  mascu…
##  7 Beru W…    165    75 brown       light      blue            47   fema… femin…
##  8 R5-D4       97    32 &lt;NA&gt;        white, red red             NA   none  mascu…
##  9 Biggs …    183    84 black       light      brown           24   male  mascu…
## 10 Obi-Wa…    182    77 auburn, wh… fair       blue-gray       57   male  mascu…
## # … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
## #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span> <span class="co"># resumen de columnas</span></code></pre></div>
<pre><code>## Rows: 87
## Columns: 14
## $ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia Or…
## $ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2…
## $ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…
## $ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown", N…
## $ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light", "…
## $ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blue",…
## $ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …
## $ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "male", "female",…
## $ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "femini…
## $ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan", "T…
## $ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "Huma…
## $ films      &lt;list&gt; &lt;"The Empire Strikes Back", "Revenge of the Sith", "Return…
## $ vehicles   &lt;list&gt; &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "Imp…
## $ starships  &lt;list&gt; &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1",…</code></pre>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span> <span class="co"># dimensiones</span></code></pre></div>
<pre><code>## [1] 87 14</code></pre>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># gapminder</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="va">gapminder</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # … with 1,694 more rows</code></pre>
<div class="sourceCode" id="cb317"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span> <span class="co"># resumen de columnas</span></code></pre></div>
<pre><code>## Rows: 1,704
## Columns: 6
## $ country   &lt;fct&gt; "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan", …
## $ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, …
## $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, …
## $ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8…
## $ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12…
## $ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, …</code></pre>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">gapminder</span><span class="op">)</span> <span class="co"># dimensiones</span></code></pre></div>
<pre><code>## [1] 1704    6</code></pre>
<!-- tocstop -->
</details><p> </p>
</div>
<div id="tidy-data" class="section level2 unnumbered">
<h2>Tidy data<a class="anchor" aria-label="anchor" href="#tidy-data"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script16.R"><strong>script16.R</strong></a>: tidy data. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script16.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script16.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: convierte en <em>tidy data</em> el siguiente <code>data.frame</code>.</summary></p>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="va">tabla_tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/tibble.html">tibble</a></span><span class="op">(</span><span class="st">"trimestre"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T1"</span>, <span class="st">"T2"</span>, <span class="st">"T3"</span><span class="op">)</span>,
                   <span class="st">"2020"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">12</span>, <span class="fl">7.5</span><span class="op">)</span>,
                   <span class="st">"2021"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>El problema es que las dos columnas con nombres de año son en realidad valores que deberían pasar a ser variables, así que deberíamos disminuir aplicar <code><a href="https://rdrr.io/pkg/tidyr/man/pivot_longer.html">pivot_longer()</a></code></p>
<div class="sourceCode" id="cb322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Aplicamos pivot_longer</span>
<span class="va">tabla_tb</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2020"</span>, <span class="st">"2021"</span><span class="op">)</span>,
                          names_to <span class="op">=</span> <span class="st">"año"</span>, values_to <span class="op">=</span> <span class="st">"valores"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   trimestre año   valores
##   &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt;
## 1 T1        2020     10  
## 2 T1        2021      8  
## 3 T2        2020     12  
## 4 T2        2021      0  
## 5 T3        2020      7.5
## 6 T3        2021      9</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: convierte en <em>tidy data</em> el siguiente <code>data.frame</code>.</summary></p>
<div class="sourceCode" id="cb324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabla_tb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/tibble.html">tibble</a></span><span class="op">(</span><span class="st">"año"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2019</span>, <span class="fl">2020</span>, <span class="fl">2020</span>, <span class="fl">2021</span>, <span class="fl">2021</span><span class="op">)</span>,
                   <span class="st">"variable"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,
                   <span class="st">"valor"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">9383</span>, <span class="fl">7.58</span>, <span class="fl">10839</span>, <span class="fl">9</span>, <span class="fl">32949</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>El problema es que las filas que comparten año son el mismo registro (pero con dos características que tenemos divididas en dos filas), así que deberíamos disminuir aplicar <code><a href="https://rdrr.io/pkg/tidyr/man/pivot_wider.html">pivot_wider()</a></code></p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Aplicamos pivot_wider</span>
<span class="va">tabla_tb</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"variable"</span>, values_from <span class="op">=</span> <span class="st">"valor"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##     año     A     B
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  2019 10     9383
## 2  2020  7.58 10839
## 3  2021  9    32949</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: convierte en <em>tidy data</em> la tabla <code>table5</code> del paquete <a href="https://tidyr.tidyverse.org">tidyr</a>.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<p>Primero uniremos el siglo y las dos últimas cifras del año para obtener el año completo (guardado en <code>año</code>)</p>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">table5</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/unite.html">unite</a></span><span class="op">(</span><span class="va">año</span>, <span class="va">century</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country     año   rate             
##   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 1999  745/19987071     
## 2 Afghanistan 2000  2666/20595360    
## 3 Brazil      1999  37737/172006362  
## 4 Brazil      2000  80488/174504898  
## 5 China       1999  212258/1272915272
## 6 China       2000  213766/1280428583</code></pre>
<p>Tras ello deberemos separar el valor del ratio en denominador y numerador (ya que ahora hay dos valores en una celda), y convertiremos el tipo de dato en la salida para que sea número.</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">table5</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/unite.html">unite</a></span><span class="op">(</span><span class="va">año</span>, <span class="va">century</span>, <span class="va">year</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/separate.html">separate</a></span><span class="op">(</span><span class="va">rate</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"numerador"</span>, <span class="st">"denominador"</span><span class="op">)</span>, convert <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     año   numerador denominador
##   &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;       &lt;int&gt;
## 1 Afghanistan 1999        745    19987071
## 2 Afghanistan 2000       2666    20595360
## 3 Brazil      1999      37737   172006362
## 4 Brazil      2000      80488   174504898
## 5 China       1999     212258  1272915272
## 6 China       2000     213766  1280428583</code></pre>
<!-- tocstop -->
</details>
</div>
<div id="intro-a-tidyverse" class="section level2 unnumbered">
<h2>Intro a tidyverse<a class="anchor" aria-label="anchor" href="#intro-a-tidyverse"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script19.R"><strong>script19.R</strong></a>: intro a tidyverse. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script19.R" class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script19.R</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: carga el conjunto de datos <code>starwars</code> y determina el tipo de variables, el númwero de filas y el número de columnas.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>

<span class="co"># carga</span>
<span class="va">starwars</span></code></pre></div>
<pre><code>## # A tibble: 87 × 14
##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 Luke S…    172    77 blond       fair       blue            19   male  mascu…
##  2 C-3PO      167    75 &lt;NA&gt;        gold       yellow         112   none  mascu…
##  3 R2-D2       96    32 &lt;NA&gt;        white, bl… red             33   none  mascu…
##  4 Darth …    202   136 none        white      yellow          41.9 male  mascu…
##  5 Leia O…    150    49 brown       light      brown           19   fema… femin…
##  6 Owen L…    178   120 brown, grey light      blue            52   male  mascu…
##  7 Beru W…    165    75 brown       light      blue            47   fema… femin…
##  8 R5-D4       97    32 &lt;NA&gt;        white, red red             NA   none  mascu…
##  9 Biggs …    183    84 black       light      brown           24   male  mascu…
## 10 Obi-Wa…    182    77 auburn, wh… fair       blue-gray       57   male  mascu…
## # … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
## #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># dimensiones</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 87</code></pre>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 14</code></pre>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 87 14</code></pre>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Tipos de variables</span>
<span class="fu"><a href="https://rdrr.io/pkg/pillar/man/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 87
## Columns: 14
## $ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia Or…
## $ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2…
## $ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…
## $ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown", N…
## $ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light", "…
## $ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blue",…
## $ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …
## $ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "male", "female",…
## $ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "femini…
## $ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan", "T…
## $ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "Huma…
## $ films      &lt;list&gt; &lt;"The Empire Strikes Back", "Revenge of the Sith", "Return…
## $ vehicles   &lt;list&gt; &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "Imp…
## $ starships  &lt;list&gt; &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1",…</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: del conjunto <code>starwars</code> encuentra todos los personajes cuyo peso esté entre 60kg y 90kg. Imprime todas las columnas del filtro.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb341"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># todas columnas</span>
<span class="va">filtro</span> <span class="op">&lt;-</span>
  <span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/between.html">between</a></span><span class="op">(</span><span class="va">mass</span>, <span class="fl">60</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">filtro</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 14
##    name               height  mass hair_color    skin_color eye_color birth_year
##    &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
##  1 Luke Skywalker        172    77 blond         fair       blue            19  
##  2 C-3PO                 167    75 &lt;NA&gt;          gold       yellow         112  
##  3 Beru Whitesun lars    165    75 brown         light      blue            47  
##  4 Biggs Darklighter     183    84 black         light      brown           24  
##  5 Obi-Wan Kenobi        182    77 auburn, white fair       blue-gray       57  
##  6 Anakin Skywalker      188    84 blond         fair       blue            41.9
##  7 Han Solo              180    80 brown         fair       brown           29  
##  8 Greedo                173    74 &lt;NA&gt;          green      black           44  
##  9 Wedge Antilles        170    77 brown         fair       hazel           21  
## 10 Palpatine             170    75 grey          pale       yellow          82  
##    sex    gender    homeworld species films     vehicles  starships
##    &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;list&gt;    &lt;list&gt;    &lt;list&gt;   
##  1 male   masculine Tatooine  Human   &lt;chr [5]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt;
##  2 none   masculine Tatooine  Droid   &lt;chr [6]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  3 female feminine  Tatooine  Human   &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  4 male   masculine Tatooine  Human   &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
##  5 male   masculine Stewjon   Human   &lt;chr [6]&gt; &lt;chr [1]&gt; &lt;chr [5]&gt;
##  6 male   masculine Tatooine  Human   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [3]&gt;
##  7 male   masculine Corellia  Human   &lt;chr [4]&gt; &lt;chr [0]&gt; &lt;chr [2]&gt;
##  8 male   masculine Rodia     Rodian  &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  9 male   masculine Corellia  Human   &lt;chr [3]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
## 10 male   masculine Naboo     Human   &lt;chr [5]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
## # … with 22 more rows</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: añadido al filtro anterior, encuentra todos los personajes que además tengan los ojos que no sean azules.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># todas columnas</span>
<span class="va">filtro</span> <span class="op">&lt;-</span>
  <span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/between.html">between</a></span><span class="op">(</span><span class="va">mass</span>, <span class="fl">60</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">eye_color</span> <span class="op">!=</span> <span class="st">"blue"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">filtro</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 27 × 14
##    name              height  mass hair_color    skin_color   eye_color
##    &lt;chr&gt;              &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;    
##  1 C-3PO                167  75   &lt;NA&gt;          gold         yellow   
##  2 Biggs Darklighter    183  84   black         light        brown    
##  3 Obi-Wan Kenobi       182  77   auburn, white fair         blue-gray
##  4 Han Solo             180  80   brown         fair         brown    
##  5 Greedo               173  74   &lt;NA&gt;          green        black    
##  6 Wedge Antilles       170  77   brown         fair         hazel    
##  7 Palpatine            170  75   grey          pale         yellow   
##  8 Boba Fett            183  78.2 black         fair         brown    
##  9 Lando Calrissian     177  79   black         dark         brown    
## 10 Ackbar               180  83   none          brown mottle orange   
##    birth_year sex   gender    homeworld species      films     vehicles 
##         &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;        &lt;list&gt;    &lt;list&gt;   
##  1      112   none  masculine Tatooine  Droid        &lt;chr [6]&gt; &lt;chr [0]&gt;
##  2       24   male  masculine Tatooine  Human        &lt;chr [1]&gt; &lt;chr [0]&gt;
##  3       57   male  masculine Stewjon   Human        &lt;chr [6]&gt; &lt;chr [1]&gt;
##  4       29   male  masculine Corellia  Human        &lt;chr [4]&gt; &lt;chr [0]&gt;
##  5       44   male  masculine Rodia     Rodian       &lt;chr [1]&gt; &lt;chr [0]&gt;
##  6       21   male  masculine Corellia  Human        &lt;chr [3]&gt; &lt;chr [1]&gt;
##  7       82   male  masculine Naboo     Human        &lt;chr [5]&gt; &lt;chr [0]&gt;
##  8       31.5 male  masculine Kamino    Human        &lt;chr [3]&gt; &lt;chr [0]&gt;
##  9       31   male  masculine Socorro   Human        &lt;chr [2]&gt; &lt;chr [0]&gt;
## 10       41   male  masculine Mon Cala  Mon Calamari &lt;chr [2]&gt; &lt;chr [0]&gt;
##    starships
##    &lt;list&gt;   
##  1 &lt;chr [0]&gt;
##  2 &lt;chr [1]&gt;
##  3 &lt;chr [5]&gt;
##  4 &lt;chr [2]&gt;
##  5 &lt;chr [0]&gt;
##  6 &lt;chr [1]&gt;
##  7 &lt;chr [0]&gt;
##  8 &lt;chr [1]&gt;
##  9 &lt;chr [1]&gt;
## 10 &lt;chr [0]&gt;
## # … with 17 more rows</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: añadido al filtro anterior, encuentra todos los personajes que además tengan menos de 100 años.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># todas columnas</span>
<span class="va">filtro</span> <span class="op">&lt;-</span>
  <span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/between.html">between</a></span><span class="op">(</span><span class="va">mass</span>, <span class="fl">60</span>, <span class="fl">90</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">eye_color</span> <span class="op">!=</span> <span class="st">"blue"</span> <span class="op">&amp;</span>
           <span class="va">birth_year</span> <span class="op">&lt;</span> <span class="fl">100</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">filtro</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 14
##    name              height  mass hair_color    skin_color   eye_color
##    &lt;chr&gt;              &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;    
##  1 Biggs Darklighter    183  84   black         light        brown    
##  2 Obi-Wan Kenobi       182  77   auburn, white fair         blue-gray
##  3 Han Solo             180  80   brown         fair         brown    
##  4 Greedo               173  74   &lt;NA&gt;          green        black    
##  5 Wedge Antilles       170  77   brown         fair         hazel    
##  6 Palpatine            170  75   grey          pale         yellow   
##  7 Boba Fett            183  78.2 black         fair         brown    
##  8 Lando Calrissian     177  79   black         dark         brown    
##  9 Ackbar               180  83   none          brown mottle orange   
## 10 Jar Jar Binks        196  66   none          orange       orange   
## 11 Darth Maul           175  80   none          red          yellow   
## 12 Mace Windu           188  84   none          dark         brown    
## 13 Ki-Adi-Mundi         198  82   white         pale         yellow   
## 14 Plo Koon             188  80   none          orange       black    
## 15 Jango Fett           183  79   black         tan          brown    
##    birth_year sex   gender    homeworld    species      films     vehicles 
##         &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;        &lt;list&gt;    &lt;list&gt;   
##  1       24   male  masculine Tatooine     Human        &lt;chr [1]&gt; &lt;chr [0]&gt;
##  2       57   male  masculine Stewjon      Human        &lt;chr [6]&gt; &lt;chr [1]&gt;
##  3       29   male  masculine Corellia     Human        &lt;chr [4]&gt; &lt;chr [0]&gt;
##  4       44   male  masculine Rodia        Rodian       &lt;chr [1]&gt; &lt;chr [0]&gt;
##  5       21   male  masculine Corellia     Human        &lt;chr [3]&gt; &lt;chr [1]&gt;
##  6       82   male  masculine Naboo        Human        &lt;chr [5]&gt; &lt;chr [0]&gt;
##  7       31.5 male  masculine Kamino       Human        &lt;chr [3]&gt; &lt;chr [0]&gt;
##  8       31   male  masculine Socorro      Human        &lt;chr [2]&gt; &lt;chr [0]&gt;
##  9       41   male  masculine Mon Cala     Mon Calamari &lt;chr [2]&gt; &lt;chr [0]&gt;
## 10       52   male  masculine Naboo        Gungan       &lt;chr [2]&gt; &lt;chr [0]&gt;
## 11       54   male  masculine Dathomir     Zabrak       &lt;chr [1]&gt; &lt;chr [1]&gt;
## 12       72   male  masculine Haruun Kal   Human        &lt;chr [3]&gt; &lt;chr [0]&gt;
## 13       92   male  masculine Cerea        Cerean       &lt;chr [3]&gt; &lt;chr [0]&gt;
## 14       22   male  masculine Dorin        Kel Dor      &lt;chr [3]&gt; &lt;chr [0]&gt;
## 15       66   male  masculine Concord Dawn Human        &lt;chr [1]&gt; &lt;chr [0]&gt;
##    starships
##    &lt;list&gt;   
##  1 &lt;chr [1]&gt;
##  2 &lt;chr [5]&gt;
##  3 &lt;chr [2]&gt;
##  4 &lt;chr [0]&gt;
##  5 &lt;chr [1]&gt;
##  6 &lt;chr [0]&gt;
##  7 &lt;chr [1]&gt;
##  8 &lt;chr [1]&gt;
##  9 &lt;chr [0]&gt;
## 10 &lt;chr [0]&gt;
## 11 &lt;chr [1]&gt;
## 12 &lt;chr [0]&gt;
## 13 &lt;chr [0]&gt;
## 14 &lt;chr [1]&gt;
## 15 &lt;chr [0]&gt;</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: añadido al filtro anterior, selecciona solo las columnas <code>name, mass, eye_color, birth_year</code></summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Solo name, mass, eye_color, birth_year</span>
<span class="va">filtro</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">mass</span>, <span class="va">eye_color</span>, <span class="va">birth_year</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    name               mass eye_color birth_year
##    &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
##  1 Biggs Darklighter  84   brown           24  
##  2 Obi-Wan Kenobi     77   blue-gray       57  
##  3 Han Solo           80   brown           29  
##  4 Greedo             74   black           44  
##  5 Wedge Antilles     77   hazel           21  
##  6 Palpatine          75   yellow          82  
##  7 Boba Fett          78.2 brown           31.5
##  8 Lando Calrissian   79   brown           31  
##  9 Ackbar             83   orange          41  
## 10 Jar Jar Binks      66   orange          52  
## 11 Darth Maul         80   yellow          54  
## 12 Mace Windu         84   brown           72  
## 13 Ki-Adi-Mundi       82   yellow          92  
## 14 Plo Koon           80   black           22  
## 15 Jango Fett         79   brown           66</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: selecciona solo las columnas que contengan variables numéricas.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##    height  mass birth_year
##     &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;
##  1    172    77       19  
##  2    167    75      112  
##  3     96    32       33  
##  4    202   136       41.9
##  5    150    49       19  
##  6    178   120       52  
##  7    165    75       47  
##  8     97    32       NA  
##  9    183    84       24  
## 10    182    77       57  
## # … with 77 more rows</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: añadido a la selección anterior, coloca los años de nacimiento como primera columna y cambia los nombres a castellano.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/relocate.html">relocate</a></span><span class="op">(</span><span class="va">height</span>, <span class="va">mass</span>, .after <span class="op">=</span> <span class="va">birth_year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/rename.html">rename</a></span><span class="op">(</span>edad <span class="op">=</span> <span class="va">birth_year</span>, altura <span class="op">=</span> <span class="va">height</span>, peso <span class="op">=</span> <span class="va">mass</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##     edad altura  peso
##    &lt;dbl&gt;  &lt;int&gt; &lt;dbl&gt;
##  1  19      172    77
##  2 112      167    75
##  3  33       96    32
##  4  41.9    202   136
##  5  19      150    49
##  6  52      178   120
##  7  47      165    75
##  8  NA       97    32
##  9  24      183    84
## 10  57      182    77
## # … with 77 more rows</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: calcula una nueva columna que indique el número de naves que ha pilotado cada persona (escribe <code><a href="https://rdrr.io/pkg/dplyr/man/starwars.html">? starwars</a></code> en consola para ver documentación del fichero).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars_numero_naves</span> <span class="op">&lt;-</span> 
  <span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_naves <span class="op">=</span> <span class="fu">map_chr</span><span class="op">(</span><span class="va">starships</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Imprimimos todas las columnas</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">starwars_numero_naves</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 15
##    name               height  mass hair_color    skin_color  eye_color
##    &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;    
##  1 Luke Skywalker        172    77 blond         fair        blue     
##  2 C-3PO                 167    75 &lt;NA&gt;          gold        yellow   
##  3 R2-D2                  96    32 &lt;NA&gt;          white, blue red      
##  4 Darth Vader           202   136 none          white       yellow   
##  5 Leia Organa           150    49 brown         light       brown    
##  6 Owen Lars             178   120 brown, grey   light       blue     
##  7 Beru Whitesun lars    165    75 brown         light       blue     
##  8 R5-D4                  97    32 &lt;NA&gt;          white, red  red      
##  9 Biggs Darklighter     183    84 black         light       brown    
## 10 Obi-Wan Kenobi        182    77 auburn, white fair        blue-gray
##    birth_year sex    gender    homeworld species films     vehicles  starships
##         &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;list&gt;    &lt;list&gt;    &lt;list&gt;   
##  1       19   male   masculine Tatooine  Human   &lt;chr [5]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt;
##  2      112   none   masculine Tatooine  Droid   &lt;chr [6]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  3       33   none   masculine Naboo     Droid   &lt;chr [7]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  4       41.9 male   masculine Tatooine  Human   &lt;chr [4]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
##  5       19   female feminine  Alderaan  Human   &lt;chr [5]&gt; &lt;chr [1]&gt; &lt;chr [0]&gt;
##  6       52   male   masculine Tatooine  Human   &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  7       47   female feminine  Tatooine  Human   &lt;chr [3]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  8       NA   none   masculine Tatooine  Droid   &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [0]&gt;
##  9       24   male   masculine Tatooine  Human   &lt;chr [1]&gt; &lt;chr [0]&gt; &lt;chr [1]&gt;
## 10       57   male   masculine Stewjon   Human   &lt;chr [6]&gt; &lt;chr [1]&gt; &lt;chr [5]&gt;
##    n_naves
##    &lt;chr&gt;  
##  1 2      
##  2 0      
##  3 0      
##  4 1      
##  5 0      
##  6 0      
##  7 0      
##  8 0      
##  9 1      
## 10 5      
## # … with 77 more rows</code></pre>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Solo la columna añadida</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">transmute</a></span><span class="op">(</span>n_naves <span class="op">=</span> <span class="fu">map_chr</span><span class="op">(</span><span class="va">starships</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 1
##    n_naves
##    &lt;chr&gt;  
##  1 2      
##  2 0      
##  3 0      
##  4 1      
##  5 0      
##  6 0      
##  7 0      
##  8 0      
##  9 1      
## 10 5      
## # … with 77 more rows</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: con la columna anterior añadido, crea una nueva variable <code>TRUE/FALSE</code> que nos diga si ha conducido o no alguna nave, y filtra después solo aquellos personajes que han conducido alguna nave.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Nueva columna lógica</span>
<span class="va">starwars_numero_naves</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>conducir_nave <span class="op">=</span> <span class="va">n_naves</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="va">conducir_nave</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 16
##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 Luke S…    172  77   blond       fair       blue            19   male  mascu…
##  2 Darth …    202 136   none        white      yellow          41.9 male  mascu…
##  3 Biggs …    183  84   black       light      brown           24   male  mascu…
##  4 Obi-Wa…    182  77   auburn, wh… fair       blue-gray       57   male  mascu…
##  5 Anakin…    188  84   blond       fair       blue            41.9 male  mascu…
##  6 Chewba…    228 112   brown       unknown    blue           200   male  mascu…
##  7 Han So…    180  80   brown       fair       brown           29   male  mascu…
##  8 Wedge …    170  77   brown       fair       hazel           21   male  mascu…
##  9 Jek To…    180 110   brown       fair       blue            NA   male  mascu…
## 10 Boba F…    183  78.2 black       fair       brown           31.5 male  mascu…
## 11 Lando …    177  79   black       dark       brown           31   male  mascu…
## 12 Arvel …     NA  NA   brown       fair       brown           NA   male  mascu…
## 13 Nien N…    160  68   none        grey       black           NA   male  mascu…
## 14 Ric Ol…    183  NA   brown       fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  
## 15 Darth …    175  80   none        red        yellow          54   male  mascu…
## 16 Plo Ko…    188  80   none        orange     black           22   male  mascu…
## 17 Gregar…    185  85   black       dark       brown           NA   male  mascu…
## 18 Grievo…    216 159   none        brown, wh… green, y…       NA   male  mascu…
## 19 Poe Da…     NA  NA   brown       light      brown           NA   male  mascu…
## 20 Padmé …    165  45   brown       light      brown           46   fema… femin…
## # … with 7 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;, n_naves &lt;chr&gt;, conducir_nave &lt;lgl&gt;</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 9</strong>: calcula el número de películas en las que han salido y ordena a los personajes de mayor a menor número de películas en las que ha aparecido</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="co"># Calculamos primero el número de películas</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_films <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">films</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/desc.html">desc</a></span><span class="op">(</span><span class="va">n_films</span><span class="op">)</span><span class="op">)</span> <span class="co"># Ordenamos de mayor a menor</span></code></pre></div>
<pre><code>## # A tibble: 87 × 15
##    name    height  mass hair_color  skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 R2-D2       96    32 &lt;NA&gt;        white, bl… red             33   none  mascu…
##  2 C-3PO      167    75 &lt;NA&gt;        gold       yellow         112   none  mascu…
##  3 Obi-Wa…    182    77 auburn, wh… fair       blue-gray       57   male  mascu…
##  4 Luke S…    172    77 blond       fair       blue            19   male  mascu…
##  5 Leia O…    150    49 brown       light      brown           19   fema… femin…
##  6 Chewba…    228   112 brown       unknown    blue           200   male  mascu…
##  7 Yoda        66    17 white       green      brown          896   male  mascu…
##  8 Palpat…    170    75 grey        pale       yellow          82   male  mascu…
##  9 Darth …    202   136 none        white      yellow          41.9 male  mascu…
## 10 Han So…    180    80 brown       fair       brown           29   male  mascu…
## # … with 77 more rows, and 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
## #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;, n_films &lt;int&gt;</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 10</strong>: selecciona 7 personajes al azar.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Una extracción aleatoria</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 14
##   name     height  mass hair_color skin_color eye_color birth_year sex    gender
##   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 Captain…     NA    NA unknown    unknown    unknown           NA &lt;NA&gt;   &lt;NA&gt;  
## 2 Ayla Se…    178    55 none       blue       hazel             48 female femin…
## 3 Cliegg …    183    NA brown      fair       blue              82 male   mascu…
## 4 Quarsh …    183    NA black      dark       brown             62 &lt;NA&gt;   &lt;NA&gt;  
## 5 Wedge A…    170    77 brown      fair       hazel             21 male   mascu…
## 6 Sly Moo…    178    48 none       pale       white             NA &lt;NA&gt;   &lt;NA&gt;  
## 7 Darth M…    175    80 none       red        yellow            54 male   mascu…
## # … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># otra (que sale distinta, claro)</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 14
##   name    height  mass hair_color  skin_color  eye_color birth_year sex   gender
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 Mas Am…    196    NA none        blue        blue            NA   male  mascu…
## 2 Wilhuf…    180    NA auburn, gr… fair        blue            64   male  mascu…
## 3 Anakin…    188    84 blond       fair        blue            41.9 male  mascu…
## 4 San Hi…    191    NA none        grey        gold            NA   male  mascu…
## 5 Grievo…    216   159 none        brown, whi… green, y…       NA   male  mascu…
## 6 Mon Mo…    150    NA auburn      fair        blue            48   fema… femin…
## 7 Arvel …     NA    NA brown       fair        brown           NA   male  mascu…
## # … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 11</strong>: selecciona los 5 personajes que en más películas han salido y los 5 que menos.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># personajes que en más películas han salido (metiendo empates)</span>
<span class="va">starwars</span>  <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_films <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">films</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n_films</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 15
##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender
##   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 R2-D2        96    32 &lt;NA&gt;        white, bl… red               33 none  mascu…
## 2 C-3PO       167    75 &lt;NA&gt;        gold       yellow           112 none  mascu…
## 3 Obi-Wan…    182    77 auburn, wh… fair       blue-gray         57 male  mascu…
## 4 Luke Sk…    172    77 blond       fair       blue              19 male  mascu…
## 5 Leia Or…    150    49 brown       light      brown             19 fema… femin…
## 6 Chewbac…    228   112 brown       unknown    blue             200 male  mascu…
## 7 Yoda         66    17 white       green      brown            896 male  mascu…
## 8 Palpati…    170    75 grey        pale       yellow            82 male  mascu…
## # … with 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;, n_films &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># personajes que en más películas han salido (sin empates)</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_films <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">films</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n_films</span>, n <span class="op">=</span> <span class="fl">5</span>, with_ties <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 15
##   name     height  mass hair_color  skin_color eye_color birth_year sex   gender
##   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 R2-D2        96    32 &lt;NA&gt;        white, bl… red               33 none  mascu…
## 2 C-3PO       167    75 &lt;NA&gt;        gold       yellow           112 none  mascu…
## 3 Obi-Wan…    182    77 auburn, wh… fair       blue-gray         57 male  mascu…
## 4 Luke Sk…    172    77 blond       fair       blue              19 male  mascu…
## 5 Leia Or…    150    49 brown       light      brown             19 fema… femin…
## # … with 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;, n_films &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># personajes que en menos películas han salido (metiendo empates)</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_films <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">films</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_min</a></span><span class="op">(</span><span class="va">n_films</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 46 × 15
##    name     height  mass hair_color skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 R5-D4        97    32 &lt;NA&gt;       white, red red               NA none  mascu…
##  2 Biggs D…    183    84 black      light      brown             24 male  mascu…
##  3 Greedo      173    74 &lt;NA&gt;       green      black             44 male  mascu…
##  4 Jek Ton…    180   110 brown      fair       blue              NA male  mascu…
##  5 IG-88       200   140 none       metal      red               15 none  mascu…
##  6 Bossk       190   113 none       green      red               53 male  mascu…
##  7 Lobot       175    79 none       light      blue              37 male  mascu…
##  8 Mon Mot…    150    NA auburn     fair       blue              48 fema… femin…
##  9 Arvel C…     NA    NA brown      fair       brown             NA male  mascu…
## 10 Wicket …     88    20 brown      brown      brown              8 male  mascu…
## # … with 36 more rows, and 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
## #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;, n_films &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># personajes que en menos películas han salido (sin empates)</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>n_films <span class="op">=</span> <span class="fu">map_int</span><span class="op">(</span><span class="va">films</span>, <span class="va">length</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_min</a></span><span class="op">(</span><span class="va">n_films</span>, n <span class="op">=</span> <span class="fl">5</span>, with_ties <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 15
##   name      height  mass hair_color skin_color eye_color birth_year sex   gender
##   &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 R5-D4         97    32 &lt;NA&gt;       white, red red               NA none  mascu…
## 2 Biggs Da…    183    84 black      light      brown             24 male  mascu…
## 3 Greedo       173    74 &lt;NA&gt;       green      black             44 male  mascu…
## 4 Jek Tono…    180   110 brown      fair       blue              NA male  mascu…
## 5 IG-88        200   140 none       metal      red               15 none  mascu…
## # … with 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;, n_films &lt;int&gt;</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 12</strong>: selecciona solo las columnas que se refieren a variables de color (ojos, piel, pelo) (con sufijo <code>"color"</code>)</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Contiene "color" independientemente de que sea sufijo o prefijo</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidyselect/man/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"color"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##    hair_color    skin_color  eye_color
##    &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;    
##  1 blond         fair        blue     
##  2 &lt;NA&gt;          gold        yellow   
##  3 &lt;NA&gt;          white, blue red      
##  4 none          white       yellow   
##  5 brown         light       brown    
##  6 brown, grey   light       blue     
##  7 brown         light       blue     
##  8 &lt;NA&gt;          white, red  red      
##  9 black         light       brown    
## 10 auburn, white fair        blue-gray
## # … with 77 more rows</code></pre>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Contiene "color" como sufijo</span>
<span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/tidyselect/man/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"color"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##    hair_color    skin_color  eye_color
##    &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;    
##  1 blond         fair        blue     
##  2 &lt;NA&gt;          gold        yellow   
##  3 &lt;NA&gt;          white, blue red      
##  4 none          white       yellow   
##  5 brown         light       brown    
##  6 brown, grey   light       blue     
##  7 brown         light       blue     
##  8 &lt;NA&gt;          white, red  red      
##  9 black         light       brown    
## 10 auburn, white fair        blue-gray
## # … with 77 more rows</code></pre>
<!-- tocstop -->
</details>
</div>
<div id="profundizando-tidyverse-encuestas-electorales" class="section level2 unnumbered">
<h2>Profundizando tidyverse: encuestas electorales<a class="anchor" aria-label="anchor" href="#profundizando-tidyverse-encuestas-electorales"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script21.R"><strong>script21.R</strong></a>: profundizando tidyverse. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script21." class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script21.</a>
</li>
</ul>
</div>
<p>Vamos a profundizar un poco en el uso de funciones <a href="https://tidyverse.tidyverse.org">tidyverse</a> para el análisis de <mark><strong>datos de encuestas</strong></mark>, <mark><strong>datos de Our World in Data</strong></mark> y <mark><strong>datos de Spotify</strong></mark></p>
<p>En la denostada <mark><strong>wikipedia</strong></mark> se publican de forma <strong>bastante completa</strong> las encuestas electorales previas a las elecciones de un país, en este caso de España. El enlace donde están los datos es <a href="https://en.wikipedia.org/wiki/Opinion_polling_for_the_next_Spanish_general_election" class="uri">https://en.wikipedia.org/wiki/Opinion_polling_for_the_next_Spanish_general_election</a></p>
<p>Lo que vamos a hacer primero <mark><strong>extraer la información de la web</strong></mark>, analizando desde <code>R</code> su código HTML y quedándonos con las <mark><strong>encuestas de 2021 y 2022</strong></mark>. Para ello haremos uso del paquete <a href="https://rvest.tidyverse.org/">rvest</a> (cargaremos también <a href="https://tidyverse.tidyverse.org">tidyverse</a>):</p>
<ul>
<li>
<code><a href="https://rdrr.io/pkg/xml2/man/read_xml.html">read_html()</a></code>: nos permite obtener el código HTML de la web</li>
<li>
<code><a href="https://rdrr.io/pkg/rvest/man/html_element.html">html_elements()</a></code>: nos permite seleccionar elementos de dicho html</li>
<li>
<code><a href="https://rdrr.io/pkg/rvest/man/html_table.html">html_table()</a></code>: nos convierte una tabla HTML en un <code>tibble</code>.</li>
</ul>
<p>De esta manera leeremos el HTML, localizaremos las tablas de datos y seleccionaremos solo las dos primeras (encuestas de 2022 y 2021).</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="va">wiki</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/Opinion_polling_for_the_next_Spanish_general_election"</span><span class="op">)</span>

<span class="co"># Leemos html</span>
<span class="va">html</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xml2/man/read_xml.html">read_html</a></span><span class="op">(</span><span class="va">wiki</span><span class="op">)</span>

<span class="co"># Seleccionamos las tablas del HTML</span>
<span class="va">tablas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rvest/man/html_element.html">html_elements</a></span><span class="op">(</span><span class="va">html</span>, <span class="st">".wikitable"</span><span class="op">)</span>

<span class="co"># Obtenemos las dos primeras tablas: encuestas de 2022 y 2021</span>
<span class="va">encuestas_2022</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rvest/man/html_table.html">html_table</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">encuestas_2022</span></code></pre></div>
<pre><code>## # A tibble: 12 × 21
##    `Polling firm/Com… `Fieldwork date` `Sample size` Turnout ``     ``     ``   
##    &lt;chr&gt;              &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;
##  1 Polling firm/Comm… Fieldwork date   Sample size   Turnout ""     ""     ""   
##  2 DYM/Henneo[1]      19–23 Jan        1,008         ?       "25.7… "26.9… "17.…
##  3 KeyData/Público[2] 21 Jan           ?             68.1    "26.0… "25.6… "17.…
##  4 ElectoPanel/Elect… 14–20 Jan        1,190         ?       "24.4… "22.9… "20.…
##  5 Celeste-Tel/Onda … 10–14 Jan        1,100         ?       "26.2… "27.2… "16.…
##  6 InvyMark/laSexta[… 10–14 Jan        ?             ?       "27.3" "27.9" "16.…
##  7 CIS[7][8][9]       3–14 Jan         3,777         ?       "28.5… "21.5… "14.…
##  8 IMOP/El Confidenc… 3–14 Jan         1,312         ?       "26.4… "24.9… "17.…
##  9 ElectoPanel/Elect… 7–13 Jan         1,317         ?       "24.5… "23.3… "20.…
## 10 Simple Lógica/elD… 3–13 Jan         1,039         63.0    "24.6" "24.3" "18.…
## 11 ElectoPanel/Elect… 31 Dec–6 Jan     1,823         ?       "24.9… "23.5… "20.…
## 12 Data10/OKDiario[1… 3–5 Jan          1,000         ?       "25.4… "27.8… "17.…
## # … with 14 more variables:  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;, PNV &lt;chr&gt;,
## #    &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;, PRC &lt;chr&gt;,  &lt;chr&gt;, Lead &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rvest/man/html_table.html">html_table</a></span><span class="op">(</span><span class="va">tablas</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">encuestas_2021</span></code></pre></div>
<pre><code>## # A tibble: 209 × 21
##    `Polling firm/Com… `Fieldwork date` `Sample size` Turnout ``     ``     ``   
##    &lt;chr&gt;              &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;
##  1 Polling firm/Comm… Fieldwork date   Sample size   Turnout ""     ""     ""   
##  2 ElectoPanel/Elect… 24–30 Dec        1,189         ?       "24.9… "23.9… "19.…
##  3 40dB/Prisa[16][17] 23–30 Dec        2,000         ?       "26.1… "23.5… "18.…
##  4 IMOP/El Confidenc… 20–30 Dec        1,315         ?       "25.2… "25.0… "18.…
##  5 SocioMétrica/El E… 20–30 Dec        3,000         ?       "25.5… "24.2… "17.…
##  6 PSOE[20]           27 Dec           ?             ?       "29.0" "22.0" "17.…
##  7 Sigma Dos/Antena … 26 Dec           ?             ?       "25.7… "28.8… "15.…
##  8 Sigma Dos/El Mund… 20–24 Dec        2,619         ?       "26.0… "27.4… "16.…
##  9 ElectoPanel/Elect… 17–23 Dec        1,299         ?       "25.3… "24.6… "19.…
## 10 KeyData/Público[2… 22 Dec           ?             67.1    "25.7… "26.4… "17.…
## # … with 199 more rows, and 14 more variables:  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,
## #    &lt;chr&gt;, PNV &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;,  &lt;chr&gt;, PRC &lt;chr&gt;,
## #   TE &lt;chr&gt;, Lead &lt;chr&gt;</code></pre>
<div id="nombrar-columnas" class="section level3 unnumbered">
<h3>Nombrar columnas<a class="anchor" aria-label="anchor" href="#nombrar-columnas"><i class="fas fa-link"></i></a>
</h3>
<p>Dado que la <strong>mayoría de las columnas</strong> tienen como nombre de partido el logo del mismo, vamos a <mark><strong>renombrar las variables</strong></mark>.</p>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nombre_cols</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"casa"</span>, <span class="st">"fechas"</span>, <span class="st">"muestra"</span>, <span class="st">"participacion"</span>, <span class="st">"PSOE"</span>, <span class="st">"PP"</span>, <span class="st">"Vox"</span>,
    <span class="st">"UP"</span>, <span class="st">"Cs"</span>, <span class="st">"ERC"</span>, <span class="st">"MP"</span>, <span class="st">"JxCat"</span>,   <span class="st">"PNV"</span>,  <span class="st">"EHBildu"</span>, <span class="st">"CUP"</span>,
    <span class="st">"CC"</span>, <span class="st">"BNG"</span>, <span class="st">"NA+"</span>, <span class="st">"PRC"</span>, <span class="st">"EV"</span>, <span class="st">"ventaja"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">encuestas_2022</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">encuestas_2021</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">nombre_cols</span>
<span class="va">encuestas_2022</span></code></pre></div>
<pre><code>## # A tibble: 12 × 21
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Polli… Field… Sample… Turnout       ""    ""    ""    ""    ""    ""    ""   
##  2 DYM/H… 19–23… 1,008   ?             "25.… "26.… "17.… "11.… "3.4… "–"   "2.8…
##  3 KeyDa… 21 Jan ?       68.1          "26.… "25.… "17.… "11.… "2.9… "3.5… "3.0…
##  4 Elect… 14–20… 1,190   ?             "24.… "22.… "20.… "12.… "3.2… "3.5… "2.5…
##  5 Celes… 10–14… 1,100   ?             "26.… "27.… "16.… "11.… "3.4… "3.0… "3.6…
##  6 InvyM… 10–14… ?       ?             "27.… "27.… "16.… "10.… "1.3" "–"   "3.0"
##  7 CIS[7… 3–14 … 3,777   ?             "28.… "21.… "14.… "13.… "4.0… "3.0… "2.8…
##  8 IMOP/… 3–14 … 1,312   ?             "26.… "24.… "17.… "11.… "2.6… "3.4… "2.5…
##  9 Elect… 7–13 … 1,317   ?             "24.… "23.… "20.… "12.… "3.3… "3.5… "2.6…
## 10 Simpl… 3–13 … 1,039   63.0          "24.… "24.… "18.… "11.… "2.5" "–"   "2.3"
## 11 Elect… 31 De… 1,823   ?             "24.… "23.… "20.… "12.… "3.2… "3.5… "2.6…
## 12 Data1… 3–5 J… 1,000   ?             "25.… "27.… "17.… "10.… "2.7… "3.2… "3.2…
## # … with 10 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;, EHBildu &lt;chr&gt;, CUP &lt;chr&gt;,
## #   CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;, EV &lt;chr&gt;, ventaja &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_2021</span></code></pre></div>
<pre><code>## # A tibble: 209 × 21
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Polli… Field… Sample… Turnout       ""    ""    ""    ""    ""    ""    ""   
##  2 Elect… 24–30… 1,189   ?             "24.… "23.… "19.… "11.… "3.2… "3.5… "2.7…
##  3 40dB/… 23–30… 2,000   ?             "26.… "23.… "18.… "11.… "3.6… "?13" "3.6…
##  4 IMOP/… 20–30… 1,315   ?             "25.… "25.… "18.… "12.… "2.8… "3.2… "2.7…
##  5 Socio… 20–30… 3,000   ?             "25.… "24.… "17.… "12.… "4.3… "2.8… "3.2…
##  6 PSOE[… 27 Dec ?       ?             "29.… "22.… "17.… "11.… "–"   "–"   "–"  
##  7 Sigma… 26 Dec ?       ?             "25.… "28.… "15.… "10.… "3.2… "3.0… "3.0…
##  8 Sigma… 20–24… 2,619   ?             "26.… "27.… "16.… "10.… "3.1… "3.0… "3.1…
##  9 Elect… 17–23… 1,299   ?             "25.… "24.… "19.… "11.… "3.2… "3.5… "2.7…
## 10 KeyDa… 22 Dec ?       67.1          "25.… "26.… "17.… "11.… "3.1… "3.4… "3.1…
## # … with 199 more rows, and 10 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;,
## #   EHBildu &lt;chr&gt;, CUP &lt;chr&gt;, CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;,
## #   EV &lt;chr&gt;, ventaja &lt;chr&gt;</code></pre>
</div>
<div id="eliminar-filas" class="section level3 unnumbered">
<h3>Eliminar filas<a class="anchor" aria-label="anchor" href="#eliminar-filas"><i class="fas fa-link"></i></a>
</h3>
<p>Tras la lectura sin salirnos de <code>R</code>, tenemos <mark><strong>dos tablas de encuestas electorales</strong></mark>, a las que les vamos a quitar la primera fila (vacía) con <code><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice(-1)</a></code>.</p>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_2022</span> <span class="op">&lt;-</span> <span class="va">encuestas_2022</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="va">encuestas_2022</span></code></pre></div>
<pre><code>## # A tibble: 11 × 21
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 DYM/H… 19–23… 1,008   ?             25.7… 26.9… 17.1… 11.6… 3.42… –     2.82…
##  2 KeyDa… 21 Jan ?       68.1          26.0… 25.6… 17.4… 11.5… 2.91  3.513 3.04 
##  3 Elect… 14–20… 1,190   ?             24.4… 22.9… 20.7… 12.7… 3.21  3.514 2.55 
##  4 Celes… 10–14… 1,100   ?             26.2… 27.2… 16.5… 11.0… 3.42  3.012 3.65 
##  5 InvyM… 10–14… ?       ?             27.3  27.9  16.5  10.9  1.3   –     3.0  
##  6 CIS[7… 3–14 … 3,777   ?             28.5… 21.5… 14.7… 13.1… 4.03  3.013 2.83 
##  7 IMOP/… 3–14 … 1,312   ?             26.4… 24.9… 17.9… 11.8… 2.61  3.414 2.53 
##  8 Elect… 7–13 … 1,317   ?             24.5… 23.3… 20.5… 12.4… 3.31  3.514 2.66 
##  9 Simpl… 3–13 … 1,039   63.0          24.6  24.3  18.7  11.1  2.5   –     2.3  
## 10 Elect… 31 De… 1,823   ?             24.9… 23.5… 20.2… 12.0… 3.21  3.514 2.65 
## 11 Data1… 3–5 J… 1,000   ?             25.4… 27.8… 17.0… 10.9… 2.71  3.213 3.23 
## # … with 10 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;, EHBildu &lt;chr&gt;, CUP &lt;chr&gt;,
## #   CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;, EV &lt;chr&gt;, ventaja &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_2021</span> <span class="op">&lt;-</span> <span class="va">encuestas_2021</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="va">encuestas_2021</span></code></pre></div>
<pre><code>## # A tibble: 208 × 21
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Elect… 24–30… 1,189   ?             24.9… 23.9… 19.9… 11.8… 3.21  3.514 2.76 
##  2 40dB/… 23–30… 2,000   ?             26.1… 23.5… 18.3… 11.8… 3.62… ?13   3.63…
##  3 IMOP/… 20–30… 1,315   ?             25.2… 25.0… 18.6… 12.1… 2.81  3.213 2.73 
##  4 Socio… 20–30… 3,000   ?             25.5… 24.2… 17.7… 12.3… 4.33  2.812 3.25 
##  5 PSOE[… 27 Dec ?       ?             29.0  22.0  17.0  11.0  –     –     –    
##  6 Sigma… 26 Dec ?       ?             25.7… 28.8… 15.7… 10.6… 3.21  3.0?  3.06 
##  7 Sigma… 20–24… 2,619   ?             26.0… 27.4… 16.6… 10.9… 3.11  3.012 3.16 
##  8 Elect… 17–23… 1,299   ?             25.3… 24.6… 19.5… 11.4… 3.21  3.514 2.76 
##  9 KeyDa… 22 Dec ?       67.1          25.7… 26.4… 17.1… 11.1… 3.11  3.413 3.14 
## 10 DYM/H… 15–19… 1,012   ?             25.6… 27.6… 16.9… 10.6… 4.72… –     3.22…
## # … with 198 more rows, and 10 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;,
## #   EHBildu &lt;chr&gt;, CUP &lt;chr&gt;, CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;,
## #   EV &lt;chr&gt;, ventaja &lt;chr&gt;</code></pre>
</div>
<div id="añadir-columna-de-año" class="section level3 unnumbered">
<h3>Añadir columna de año<a class="anchor" aria-label="anchor" href="#a%C3%B1adir-columna-de-a%C3%B1o"><i class="fas fa-link"></i></a>
</h3>
<p>En cada tabla vamos a <mark><strong>añadir una nueva columna que indique el año</strong></mark>.</p>
<div class="sourceCode" id="cb389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_2022</span> <span class="op">&lt;-</span> <span class="va">encuestas_2022</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>anno <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span>
<span class="va">encuestas_2021</span> <span class="op">&lt;-</span> <span class="va">encuestas_2021</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>anno <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></code></pre></div>
</div>
<div id="juntar-tablas" class="section level3 unnumbered">
<h3>Juntar tablas<a class="anchor" aria-label="anchor" href="#juntar-tablas"><i class="fas fa-link"></i></a>
</h3>
<p>Dado que queremos <mark><strong>un solo dataset</strong></mark> con las encuestas de ambos años, vamos a juntar ambas tablas con <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> para tener una sola tabla <code>encuestas</code>.</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">encuestas_2022</span>, <span class="va">encuestas_2021</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb391"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">encuestas</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,
              caption <span class="op">=</span> <span class="st">"Encuestas de 2021 y 2022"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-dcc0f27e3b597bb8f7ca" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-dcc0f27e3b597bb8f7ca">{"x":{"filter":"none","caption":"<caption>Encuestas de 2021 y 2022<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219"],["DYM/Henneo[1]","KeyData/Público[2]","ElectoPanel/Electomanía[3]","Celeste-Tel/Onda Cero[4][5]","InvyMark/laSexta[6]","CIS[7][8][9]","IMOP/El Confidencial[10]","ElectoPanel/Electomanía[11]","Simple Lógica/elDiario.es[12]","ElectoPanel/Electomanía[13]","Data10/OKDiario[14]","ElectoPanel/Electomanía[15]","40dB/Prisa[16][17]","IMOP/El Confidencial[18]","SocioMétrica/El Español[19]","PSOE[20]","Sigma Dos/Antena 3[21][22]","Sigma Dos/El Mundo[23][24]","ElectoPanel/Electomanía[25]","KeyData/Público[26]","DYM/Henneo[27]","Celeste-Tel/Onda Cero[28][29]","IMOP/El Confidencial[30]","GAD3/ABC[31][32]","ElectoPanel/Electomanía[33]","CIS (SocioMétrica)[a][34]","CIS[35][36][37]","Simple Lógica[38]","NC Report/La Razón[39][40]","ElectoPanel/Electomanía[41]","Data10/OKDiario[42]","Hamalgama Métrica/VozPópuli[43]","Ágora Integral/Canarias Ahora[44][45]","ElectoPanel/Electomanía[46]","IMOP/El Confidencial[47]","Sigma Dos/El Mundo[48][49]","ElectoPanel/Electomanía[50]","SW Demoscopia/Publicaciones Sur[51]","KeyData/Público[52]","Sigma Dos/Antena 3[53]","DYM/Henneo[54]","InvyMark/laSexta[55]","ElectoPanel/Electomanía[56]","IMOP/El Confidencial[57]","Celeste-Tel/Onda Cero[58][59]","Simple Lógica[60]","Sigma Dos/El Mundo[61][62]","GAD3/NIUS[63][64]","ElectoPanel/Electomanía[65]","CIS[66][67][68]","Hamalgama Métrica/VozPópuli[69]","SocioMétrica/El Español[70][71]","NC Report/La Razón[72][73]","IMOP/El Confidencial[74]","InvyMark/laSexta[75]","Data10/OKDiario[76]","ElectoPanel/Electomanía[77]","Metroscopia[78][79]","SW Demoscopia[80]","ElectoPanel/Electomanía[81]","DYM/Henneo[82]","Celeste-Tel/Onda Cero[83][84]","ElectoPanel/Electomanía[85]","IMOP/El Confidencial[86]","Sigma Dos/El Mundo[87][88]","KeyData/Público[89]","NC Report/La Razón[90][91]","InvyMark/laSexta[92]","ElectoPanel/Electomanía[93]","Simple Lógica[94]","GAD3/ABC[95][96]","CIS[97][98][99]","Sigma Dos/Antena 3[100]","Metroscopia[79]","ElectoPanel/Electomanía[101]","IMOP/El Confidencial[102]","Data10/OKDiario[103]","SocioMétrica/El Español[104][105]","Hamalgama Métrica/VozPópuli[106][107]","ElectoPanel/Electomanía[108]","Ágora Integral/Canarias Ahora[109][110]","ElectoPanel/Electomanía[111]","IMOP/El Confidencial[112]","KeyData/Público[113]","Celeste-Tel/Onda Cero[114][115]","Metroscopia[79]","Data10/OKDiario[116]","DYM/Henneo[117][118]","NC Report/La Razón[119][120]","ElectoPanel/Electomanía[121]","GAD3/NIUS[122][123]","Simple Lógica[124]","CIS[125][126][127]","IMOP/El Confidencial[128]","ElectoPanel/Electomanía[129]","ElectoPanel/Electomanía[130]","Sigma Dos/El Mundo[131]","Data10/OKDiario[132]","KeyData/Público[133]","Sigma Dos/Antena 3[134]","NC Report/La Razón[135][136]","ElectoPanel/Electomanía[137]","ElectoPanel/Electomanía[138]","Celeste-Tel/Onda Cero[139][140]","ElectoPanel/Electomanía[141]","Data10/OKDiario[142]","ElectoPanel/Electomanía[143]","Simple Lógica[144]","ElectoPanel/Electomanía[145]","SocioMétrica/El Español[146][147]","Celeste-Tel/Onda Cero[148][149]","ElectoPanel/Electomanía[150]","KeyData/Público[151]","GAD3/ABC[152][153]","Sigma Dos/Antena 3[154]","DYM/Henneo[155][156]","Data10/OKDiario[157]","NC Report/La Razón[158][159]","InvyMark/laSexta[160]","ElectoPanel/Electomanía[161]","Metroscopia[79]","GESOP/El Periódico[162]","CIS (SocioMétrica)[a][163]","CIS[164][165][166]","Simple Lógica[167]","ElectoPanel/Electomanía[168]","InvyMark/laSexta[169]","ElectoPanel/Electomanía[170]","Data10/OKDiario[171]","Sigma Dos/El Mundo[172][173]","SocioMétrica/El Español[174]","ElectoPanel/Electomanía[175]","NC Report/La Razón[176][177]","KeyData/Público[178]","Sigma Dos/Antena 3[179]","DYM/Henneo[180][181]","Metroscopia[79]","Celeste-Tel/Onda Cero[182][183]","ElectoPanel/Electomanía[184]","CIS[185][186][187]","ElectoPanel/Electomanía[188]","GAD3/NIUS[189][190]","Simple Lógica[191]","ElectoPanel/Electomanía[192]","Data10/OKDiario[193]","Sigma Dos/El Mundo[194][195]","SocioMétrica/El Español[196][197]","ElectoPanel/Electomanía[198]","DYM/Henneo[199][200]","NC Report/La Razón[201][202]","ElectoPanel/Electomanía[203]","InvyMark/laSexta[204]","KeyData/Público[205]","Metroscopia[79][206]","GAD3/ABC[207][208]","Sigma Dos/Antena 3[209]","ElectoPanel/Electomanía[210]","Celeste-Tel/Onda Cero[211][212]","CIS[213][214][215]","Simple Lógica[216]","Hamalgama Métrica/OKDiario[217]","NC Report/La Razón[218][219]","InvyMark/laSexta[220]","Sigma Dos/El Mundo[221]","Demoscopia y Servicios/ESdiario[222]","ElectoPanel/Electomanía[223]","ElectoPanel/Electomanía[224]","ElectoPanel/Electomanía[225]","ElectoPanel/Electomanía[226]","GAD3/NIUS[227][228]","InvyMark/laSexta[229]","Metroscopia[79]","CIS (SocioMétrica)[a][230]","CIS[231][232][233]","Simple Lógica[234]","ElectoPanel/Electomanía[235]","ElectoPanel/Electomanía[236]","NC Report/La Razón[237][238]","ElectoPanel/Electomanía[239]","ElectoPanel/Electomanía[240]","InvyMark/laSexta[241]","ElectoPanel/Electomanía[242]","Metroscopia[79]","ElectoPanel/Electomanía[243]","CIS[244][245][246]","Simple Lógica[247]","InvyMark/laSexta[241]","ElectoPanel/Electomanía[248]","Sigma Dos/El Mundo[249][250][251]","KeyData/Público[252]","NC Report/La Razón[253][254]","ElectoPanel/Electomanía[255]","GAD3/NIUS[256][257]","DYM/Henneo[258][259]","Celeste-Tel/Onda Cero[260]","Hamalgama Métrica/OKDiario[261]","ElectoPanel/Electomanía[262]","Sigma Dos/El Mundo[263][264]","ElectoPanel/Electomanía[265]","Metroscopia[79]","ElectoPanel/Electomanía[266]","CIS (SocioMétrica)[a][267]","CIS[268][269][270]","ElectoPanel/Electomanía[271]","Simple Lógica[272]","ElectoPanel/Electomanía[273]","CIS (SocioMétrica)[a][274]","CIS[275][276][277]","ElectoPanel/Electomanía[278]","InvyMark/laSexta[279]","Metroscopia[79][206]","Celeste-Tel/Onda Cero[280]","ElectoPanel/Electomanía[281]","Hamalgama Métrica/OKDiario[282]","Simple Lógica[283]","SyM Consulting[284][285]","ElectoPanel/Electomanía[286]","SocioMétrica/El Español[287]","ElectoPanel/Electomanía[288]"],["19–23 Jan","21 Jan","14–20 Jan","10–14 Jan","10–14 Jan","3–14 Jan","3–14 Jan","7–13 Jan","3–13 Jan","31 Dec–6 Jan","3–5 Jan","24–30 Dec","23–30 Dec","20–30 Dec","20–30 Dec","27 Dec","26 Dec","20–24 Dec","17–23 Dec","22 Dec","15–19 Dec","13–17 Dec","6–17 Dec","13–16 Dec","10–16 Dec","1–13 Dec","1–13 Dec","1–13 Dec","8–11 Dec","3–10 Dec","7–9 Dec","2–9 Dec","1–5 Dec","26 Nov–3 Dec","22 Nov–3 Dec","30 Nov–1 Dec","19–26 Nov","23–24 Nov","22 Nov","22 Nov","17–21 Nov","15–19 Nov","12–19 Nov","8–19 Nov","11–16 Nov","30 Oct–15 Nov","10–11 Nov","8–11 Nov","4–11 Nov","2–11 Nov","3–10 Nov","5–8 Nov","2–6 Nov","25 Oct–6 Nov","1–5 Nov","2–4 Nov","29 Oct–4 Nov","21 Oct–4 Nov","20–30 Oct","22–29 Oct","20–24 Oct","18–22 Oct","15–22 Oct","11–22 Oct","19–21 Oct","20 Oct","13–15 Oct","11–15 Oct","8–15 Oct","30 Sep–15 Oct","8–14 Oct","1–13 Oct","11 Oct","10 Oct","1–8 Oct","27 Sep–8 Oct","5–7 Oct","4–7 Oct","1–6 Oct","24 Sep–1 Oct","23–27 Sep","17–24 Sep","13–24 Sep","23 Sep","16–21 Sep","20 Sep","19–20 Sep","16–19 Sep","14–18 Sep","10–17 Sep","13–16 Sep","1–16 Sep","1–13 Sep","30 Aug–10 Sep","3–9 Sep","27 Aug–3 Sep","30 Aug–2 Sep","30 Aug–1 Sep","30 Aug","30 Aug","24–27 Aug","20–26 Aug","14–21 Aug","16–20 Aug","6–13 Aug","4–6 Aug","31 Jul–6 Aug","2–4 Aug","23–30 Jul","26–29 Jul","20–23 Jul","16–23 Jul","22 Jul","16–22 Jul","19 Jul","15–19 Jul","16–17 Jul","12–16 Jul","12–16 Jul","11–16 Jul","15 Jul","14–15 Jul","2–15 Jul","2–15 Jul","5–12 Jul","8–10 Jul","28 Jun–2 Jul","24 Jun–2 Jul","29 Jun–1 Jul","28 Jun–1 Jul","27 Jun","24–26 Jun","23–26 Jun","21 Jun","21 Jun","17–21 Jun","20 Jun","14–18 Jun","12–18 Jun","2–15 Jun","5–11 Jun","7–10 Jun","1–9 Jun","30 May–4 Jun","1–3 Jun","31 May–1 Jun","26–29 May","23–28 May","21–24 May","17–22 May","17–22 May","17–21 May","20 May","20 May","12–18 May","17 May","10–15 May","10–14 May","4–13 May","4–12 May","10–11 May","4–8 May","5–7 May","5–6 May","5–6 May","4–6 May","24 Apr–2 May","18–24 Apr","10–17 Apr","14–16 Apr","12–16 Apr","15 Apr","5–14 Apr","5–14 Apr","5–13 Apr","2–9 Apr","26 Mar–2 Apr","26–31 Mar","22–26 Mar","16–20 Mar","15–19 Mar","15 Mar","15 Mar","12–13 Mar","1–11 Mar","1–9 Mar","1–5 Mar","28 Feb–5 Mar","1–3 Mar","1 Mar","24–28 Feb","20–27 Feb","22–25 Feb","19–23 Feb","17–23 Feb","19–22 Feb","17–20 Feb","15–17 Feb","14–16 Feb","15 Feb","6–12 Feb","3–11 Feb","3–11 Feb","30 Jan–6 Feb","1–5 Feb","22–29 Jan","7–25 Jan","7–25 Jan","18–22 Jan","18–22 Jan","15 Jan","11–15 Jan","11–15 Jan","12–14 Jan","4–13 Jan","7–10 Jan","3–9 Jan","28 Dec–5 Jan","28 Dec–2 Jan"],["1,008","?","1,190","1,100","?","3,777","1,312","1,317","1,039","1,823","1,000","1,189","2,000","1,315","3,000","?","?","2,619","1,299","?","1,012","1,100","1,297","1,003","1,305","3,733","3,733","1,041","1,000","2,177","1,000","1,000","1,500","1,132","1,316","1,633","?","610","?","?","1,021","?","1,564","1,343","1,100","1,026","1,688","1,001","1,502","3,779","1,000","1,200","1,000","1,342","?","1,000","1,479","2,400","1,203","1,228","1,000","1,100","1,822","1,338","1,928","?","1,000","?","1,863","1,056","1,001","3,660","?","?","2,119","1,317","1,000","1,200","1,000","1,193","1,000","1,651","1,304","?","1,100","?","1,000","1,000","1,000","1,233","1,002","1,027","3,780","1,309","1,084","1,640","1,050","1,000","?","?","1,000","1,422","2,208","1,100","1,399","1,000","1,170","1,062","877","1,200","1,100","1,601","?","1,030","?","1,019","1,000","1,000","?","2,001","?","802","3,798","3,798","1,076","1,883","?","2,539","1,000","1,020","?","1,627","1,000","?","?","1,002","?","1,100","1,332","3,814","1,673","1,026","1,017","1,462","1,000","1,000","1,100","1,272","1,008","1,000","1,582","?","?","?","1,202","?","1,930","1,100","3,814","1,063","1,000","1,000","?","1,000","1,000","1,825","4,320","3,125","2,450","1,001","?","?","3,823","3,823","1,053","2,300","2,000","1,000","2,000","2,513","?","2,400","?","2,576","3,820","1,023","?","1,406","1,096","?","1,000","1,406","1,000","1,002","1,100","1,000","1,406","1,145","1,240","?","2,530","3,869","3,869","1,814","1,054","1,493","3,862","3,862","1,470","?","?","1,100","1,382","1,000","1,045","2,915","1,562","1,206","1,321"],["?","68.1","?","?","?","?","?","?","63.0","?","?","?","?","?","?","?","?","?","?","67.1","?","?","?","68","?","63.9","?","65.3","62.2","?","?","?","62.5","?","?","?","?","?","65.9","?","?","?","?","?","63.4","62.9","?","66","?","?","?","?","62.6","?","?","?","?","66","?","?","?","63.3","?","?","?","65.6","63.3","?","?","64.5","75","?","?","?","?","?","?","?","65.7","?","61.9","?","?","64.2","63.6","?","?","?","63.6","?","?","64.9","?","?","?","?","?","?","63.9","?","63.8","?","?","64.1","?","?","?","62.8","?","?","64.4","?","64.3","73","?","?","?","64.2","?","?","?","?","62.2","?","64.9","?","?","?","?","?","?","?","63.8","67.4","?","?","?","64.2","?","?","?","65","64.4","?","?","?","?","?","?","64.2","?","?","68.9","?","74","?","?","64.5","?","65.5","?","64.4","?","?","?","?","?","?","?","63","?","?","62.6","?","65.6","?","?","63.1","?","?","?","?","?","?","?","64.6","?","?","?","68.5","63.3","?","62","?","64.4","?","?","?","?","?","?","64.7","?","?","62.0","?","62.6","?","?","?","?","64.7","?","?","66.3","70.0","?","?","?"],["25.7101/106","26.0106","24.494","26.2102","27.3","28.5128","26.4105","24.592","24.6","24.995","25.498","24.995","26.1102/114","25.2102","25.5103","29.0","25.7102","26.0102","25.3101","25.7103","25.6101/106","26.0102","25.7103","25.199","25.3102","24.7","28.0122","25.5","25.397/99","25.5102","25.6100","25.799","25.5101","25.8102","25.7104","26.4106","25.9104","25.9106","25.6102","25.8101","25.5100/105","26.7","25.7101","27.1107","26.1102","24.3","25.9100","24.996/100","25.8104","27.6122","25.8100","25.4105","25.298/100","26.3104","26.0","25.298","25.499","26.5107","25.3102/108","25.598","24.796/100","26.4103","25.8100","25.8101","25.599","25.8103","25.4101/103","25.7","26.2102","23.8","26.2103","28.5128","25.1100","26.6","26.6105","25.8101","24.998","25.099","26.2103","26.7106","26.1103","27.2108","26.1103","26.0104","26.1103","26.5","25.0100","26.0105/110","25.099/101","26.0103","26.3102/106","26.2","29.6130","26.6108","25.7102","25.397","24.498","24.598","25.3101","24.899","25.399/101","25.096","25.096","25.7102","25.096","24.799","25.098","27.9","25.098","24.7101","25.6101","25.499","25.2102","25.1101","25.1103","24.096/100","24.597","25.9101/103","26.2","25.499","26.0","27.3118/120","25.1","28.6128","23.0","26.0101","25.9","24.995","24.396","25.9103","24.196","25.197","24.797/99","25.2103","24.596","25.7101/105","26.1","25.398","25.9102","27.4122","25.399","25.5101/103","23.0","25.498","25.5103","25.0100","25.4102","25.497","24.599/103","25.8100/102","25.297","26.9","26.2110","22.8","25.4103","26.0101","26.4107","26.0100","27.9124","26.0","25.599","26.1106/108","26.7","25.7","25.3107","26.9108","27.1113","27.0112","26.6107","28.7121/123","28.0","29.8","30.0","31.5136","27.9","26.2106","26.5107","26.6108/110","26.4107","26.2105","28.4","26.2103","27.9","29.9123","31.3140","27.1","26.8","28.5118","27.2","27.8119","27.4115/117","29.0121","28.6120/124","25.4116/120","28.3118","28.7118","29.4123","27.6","29.0123","28.7","27.3117","28.1","30.7141","27.2117","28.8","27.0116","28.6","30.7139","27.1116","27.0","27.2","27.0113","27.2118","26.4109","26.3","26.7","27.2117","26.7112","27.3117"],["26.9114/119","25.6106","22.994","27.2115","27.9","21.594","24.9103","23.396","24.3","23.598","27.8117","23.998","23.595/102","25.0102","24.2101","22.0","28.8125","27.4118","24.699","26.4113","27.6119/124","27.9118","24.7101","28.5122","25.3101","20.7","20.892","23.1","28.8123/125","25.7105","28.1119","28.1118","24.5104","25.8105","25.8105","28.6126","26.2109","23.097","27.3116","29.3130","25.8106/111","28.0","25.7105","26.8113","28.5121","23.0","29.1130","29.5124/128","26.2107","20.992","28.3120","25.5107","29.3125/127","27.1117","28.2","28.8126","27.3116","25.2104","25.5104/110","27.7117","29.2124/129","28.9123","27.9118","28.0120","28.9129","28.2121","29.6127/129","28.4","28.2119","25.5","29.2123","22.199","28.5130","26.2","28.0118","26.8115","29.0127","27.2118","28.7121","27.5114","26.3118","27.5117","26.6113","28.0120","29.2124","26.2","28.7126","26.1108/114","29.9128/130","28.1120","28.2118/122","22.5","20.592","26.4113","28.6121","28.1120","29.1131","29.8129","28.8125","28.9132","30.1129/131","28.6124","28.5122","29.7129","28.6124","30.0131","28.3120","24.6","28.4121","26.4116","30.0131","28.1120","28.3122","31.1139","28.8130","28.0121/125","30.3133","29.8126/128","28.0","27.7117","28.4","26.0116/118","26.8","23.4103","26.9","27.9118","28.3","28.4124","30.2134","29.4130","26.2115","28.6123","30.4129/131","28.2121","30.1133","27.9120/125","30.2","29.8131","28.6121","23.9103","28.4121","30.7136/138","27.1","27.9121","28.7124","29.5132","26.5114","27.9121","28.1121/126","30.0127/129","27.3119","27.2","27.0115","30.3","30.5138","30.7133","26.9115","28.1117","23.4103","26.2","27.3111","26.9109/111","27.3","30.2","25.9113","25.8110","24.0100","23.999","24.299","27.0114/116","24.5","24.1","20.8","20.688","22.9","24.199","24.1101","24.8105/107","24.5104","24.5103","23.9","24.6103","20.9","23.092","17.974","17.5","23.2","21.290","22.9","21.390","23.797/99","20.884","22.292/96","19.686/90","22.396","22.191","20.988","23.4","21.689","19.6","22.997","19.7","18.878","23.5101","18.8","23.4102","22.2","20.588","23.2101","23.2","22.8","23.7101","23.197","24.4103","21.1","24.6","22.896","22.997","23.097"],["17.155/59","17.464","20.778","16.559","16.5","14.750","17.966","20.577","18.7","20.276","17.060","19.975","18.363/71","18.667","17.765","17.0","15.752","16.658","19.570","17.159","16.954/58","16.155","19.168","17.156","18.769","18.8","14.649","19.4","15.551/53","18.567","16.556","16.357","16.958","18.166","18.264","15.047","17.962","18.868","16.456","15.247","18.362/66","16.6","18.267","16.757","15.452","18.3","15.448","14.747/49","17.961","14.348","16.155","16.858","15.249/51","16.451","16.9","16.252","17.458","18.066","17.955/62","17.358","14.646/50","15.150","17.357","15.952","15.047","15.753","15.147/49","16.6","16.755","17.6","15.451","13.241","14.645","17.0","16.954","16.858","16.052","16.355","15.953","17.056","15.454","16.552","17.059","15.552","15.150","18.1","16.152","15.650/54","14.947/49","16.453","15.450/52","17.7","13.843","16.556","16.253","16.355","14.947","15.551","15.149","14.746","14.746/48","16.354","16.355","14.848","16.354","15.350","16.455","15.9","16.555","16.156","14.947","17.056","15.752","12.437","14.144","16.754/58","15.449","15.350/52","17.7","17.358","14.7","13.140/42","15.6","13.641","17.4","16.755","18.1","16.354","15.549","14.444","16.658","16.254","15.149/51","15.852","15.548","16.053/57","14.6","15.549","15.851","13.041","16.254","12.437/39","17.0","16.855","15.852","15.451","16.960","16.755","16.053/57","14.948/50","16.455","18.4","16.454","12.2","13.840","15.749","15.852","16.259","13.743","15.9","17.967","17.159/61","18.9","15.2","16.961","16.657","16.959","16.959","17.263","14.546/48","18.3","17.6","18.8","15.453","17.6","17.061","16.860","17.459/61","16.656","16.757","18.6","16.656","19.9","18.164","15.053","18.5","17.4","18.968","17.4","17.764","18.060/62","19.070","17.159/61","18.166/69","18.260","19.164","18.465","15.6","17.963","19.1","15.853","16.3","13.645","15.249","16.9","15.450","15.9","13.040","15.651","16.9","16.5","14.851","15.853","15.655","15.2","14.2","16.155","16.760","16.054"],["11.627/30","11.529","12.733","11.026","10.9","13.138","11.829","12.433","11.1","12.030","10.928","11.829","11.828/34","12.130","12.333","11.0","10.625","10.925","11.428","11.129","10.623/26","10.225","11.830","9.824","11.126","14.1","13.740","10.6","9.924/26","10.825","10.626","10.226","11.832","11.126","11.628","10.124","10.925","12.733","11.129","11.026","12.229/32","9.4","11.526","11.027","10.526","11.4","10.524","11.832/34","11.528","13.640","10.326","12.434","9.824/26","11.530","8.7","10.324","11.227","11.028","11.226/33","10.827","13.231/34","10.025","10.525","11.028","10.925","10.425","9.622/24","9.0","10.425","12.4","10.124","11.833","11.124","10.0","10.024","10.828","9.822","11.430","10.124","10.224","11.530","10.124","10.927","10.225","9.924","9.8","9.622","12.830/33","9.521/23","10.425","11.027/29","11.3","11.333","10.626","10.325","10.526","10.322","9.322","9.723","9.821","9.321/23","10.024","10.224","9.721","10.024","8.919","10.125","10.8","10.124","10.326","9.621","9.924","9.825","10.023","10.025","10.523/26","9.017","9.220/22","9.3","10.024","11.1","10.024/26","10.1","10.629","12.1","9.924","8.9","10.125","9.118","10.525","10.426","10.024","9.019/21","9.725","11.427","9.921/24","10.5","9.521","9.623","12.033","10.024","9.219/21","9.3","10.425","8.618","10.224","9.320","10.726","9.320/22","9.219/21","11.027","8.2","10.225","11.3","8.317","10.023","10.926","9.625","10.429","8.7","9.023","9.923/25","7.9","13.0","10.319","11.428","12.331","12.533","12.431","9.218/20","9.3","11.2","10.8","10.729","11.1","12.834","13.035","11.528/30","13.437","13.739","9.8","13.438","11.8","9.921","9.622","11.0","10.3","10.525","11.7","11.128","10.927/29","10.525","10.122/24","12.532/35","10.125","9.926","10.020","11.9","10.223","11.3","10.726","11.3","11.230","10.826","10.3","11.026","10.0","10.727","11.026","10.2","11.5","11.830","11.127","12.531","10.7","9.6","11.228","10.525","11.228"],["3.42/3","2.91","3.21","3.42","1.3","4.03","2.61","3.31","2.5","3.21","2.71","3.21","3.62/3","2.81","4.33","–","3.21","3.11","3.21","3.11","4.72/3","3.42","2.41","2.51","3.21","4.6","5.99","3.6","3.01","3.31","2.81","2.91","3.22","3.31","2.31","3.51","3.21","3.01","2.81","3.41","4.72/3","1.3","3.01","2.20","3.42","2.8","3.01","2.51","3.01","5.79","2.81","3.92","2.91","2.41","1.5","2.51","3.01","2.71","3.00/3","2.91","3.72","3.42","2.71","2.61","3.11","3.01","2.71","1.5","2.91","4.0","2.82","6.010","3.31","2.5","2.81","2.61","2.81","4.32","2.71","3.01","3.22","3.21","2.61","3.01","3.52","2.0","2.91","3.92/3","2.72","3.31","2.81","3.3","6.510","2.91","3.31","3.41","3.11","2.81","3.32","2.91","2.72","3.41","3.42","3.52","3.41","2.91","3.52","2.9","3.42","5.03","3.32","3.01","3.31","3.52","2.81","4.02/3","2.31","2.71","1.4","2.91","2.5","3.92/3","3.1","5.57","2.4","2.91","1.5","3.11","2.81","2.51","5.24","3.01","2.61","3.01","2.51","3.52/3","2.0","2.41","3.01","5.78","3.11","2.91/2","3.4","3.01","2.71","3.22","3.11","3.01","3.42/3","2.91/2","2.91","1.4","3.51","2.2","3.32","3.11","2.91","2.51","5.37","4.0","2.31","2.81/2","1.2","3.6","2.31","3.21","4.03","4.03","3.83","4.53","3.6","2.1","4.0","6.710","3.8","3.93","3.72","4.01/3","3.21","2.81","4.4","2.41","3.0","2.51","9.520","7.6","6.6","4.94","5.4","5.76","4.33/4","5.04","5.97","7.59/12","4.65","3.13","5.67","6.3","5.66","4.6","7.512","9.0","9.317","7.412","9.2","7.312","7.4","9.317","7.312","7.0","6.4","6.79","7.111","5.27","8.9","6.6","6.910","6.710","6.810"],["–","3.513","3.514","3.012","–","3.013","3.414","3.514","–","3.514","3.213","3.514","?13","3.213","2.812","–","3.0?","3.012","3.514","3.413","–","3.213","3.213","3.315","3.513","2.6","2.512","–","3.413/14","3.513","3.213","3.313","3.713","3.413","2.913","3.012","3.413","?13","3.613","3.012","–","–","3.513","3.013","3.113","–","3.012","3.313/14","3.414","2.612","3.313","3.213","3.413","3.113","–","3.213","3.414","–","3.6?","3.313","–","3.213","3.313","3.213","3.112","3.613","3.413","–","3.213","–","3.013","3.113","3.113","–","3.314","3.213","3.314","3.013","3.313","3.414","3.512","3.314","3.113","3.613","3.213","–","3.314","–","3.312","3.413","3.814","–","3.213","2.913","3.313","3.414","3.414","3.414","3.713","3.313","3.312","3.414","3.414","3.213","3.414","3.514","3.313","–","3.313","3.113","3.213","3.414","3.613","3.313","3.413","–","3.413","3.313","–","3.414","–","3.412/14","3.7","3.314","–","3.414","–","3.414","3.313","3.012","3.113","3.414","3.313","3.513","3.516","–","–","3.213","3.414","3.614","3.414","3.011/12","–","3.514","3.313","3.210","3.614","3.514","–","3.313","3.514","–","3.513","–","3.013","3.012","3.513","3.213","3.013","–","3.113","3.413","–","3.1","3.412","3.513","3.613","3.614","3.614","3.213/14","–","–","3.2","2.812","–","3.614","3.613","3.313","3.513","3.614","–","3.614","–","3.614","3.213","–","–","3.413","3.2","3.613","3.313","3.413","3.713","–","3.614","3.414","3.413","3.2","3.413","–","3.313","3.3","3.515","3.413","–","3.413","2.9","2.912","3.413","–","–","3.914","3.313","3.814","–","3.7","3.313","3.413","3.313"],["2.82/3","3.04","2.55","3.65","3.0","2.83","2.53","2.66","2.3","2.65","3.23","2.76","3.63/4","2.73","3.25","–","3.06","3.16","2.76","3.14","3.22/3","3.95","2.53","2.53","2.86","2.7","2.23","2.8","2.85/6","2.76","3.45","3.36","4.47","2.86","2.73","3.57","2.86","2.53","3.15","2.96","2.52/3","4.0","2.86","3.04","4.05","3.8","3.67","2.83","2.86","3.14","3.46","3.35","3.06","3.14","4.5","3.85","2.86","3.04","3.42/6","2.96","2.22/3","4.15","3.17","3.54","3.17","3.65","3.27","4.2","3.06","2.3","2.43","3.03","3.47","2.4","2.86","4.15","4.26","3.55","3.66","3.07","3.75","3.16","3.84","3.65","4.16","2.2","4.46","3.03/4","3.46","3.16","2.23","4.9","3.35","3.74","3.47","3.68","4.18","4.67","3.77","4.08","3.46","3.88","3.68","4.57","3.88","4.88","3.78","4.6","3.57","4.59","4.67","3.57","3.96","3.35","4.810","2.53/4","4.910","3.76","4.5","3.88","3.0","3.84/6","4.0","3.75","3.5","3.98","4.4","4.28","5.010","5.010","4.69","4.18","4.65/7","4.37","4.49","2.32/3","4.4","5.79","4.09","4.16","3.98","4.58","6.0","3.57","5.210","4.39","4.07","3.57","5.04/6","3.94/6","3.37","4.8","3.34","6.7","4.16","4.07","2.96","6.09","3.86","4.0","5.910","3.75/7","4.4","2.0","5.18","2.14","1.73","1.63","1.73","2.33","–","1.7","2.3","1.92","2.6","1.73","1.73","2.53","1.73","1.73","–","1.84","1.7","1.94","2.02","2.7","–","1.83","0.9","1.62","2.5?","1.73","1.52","–","2.63","2.4?","1.73","0.9","1.73","1.9","1.73","2.6","1.72","1.83","2.2","1.83","1.9","1.52","1.73","–","1.8","2.53","1.73","?2","2.6","–","1.73","2.53","1.73"],["–","2.28","2.38","2.38","–","1.47","1.77","2.38","–","2.38","2.08","2.49","?8","1.87","2.08","–","1.0?","2.08","2.49","2.18","–","2.49","1.88","2.18","2.410","1.7","1.47","–","2.28","2.410","2.19","2.39","2.18","2.410","2.18","2.07","2.410","?8","2.18","2.08","–","–","2.410","2.28","2.28","–","2.08","1.97/8","2.39","1.56","2.39","1.87","2.28","2.08","–","2.210","2.39","–","2.1?","2.39","–","2.28","2.39","1.98","2.08","2.18","2.28","–","2.29","–","2.08","1.67","2.08","–","2.29","2.08","2.310","2.18","2.39","2.39","2.38","2.39","2.18","2.29","2.38","–","2.410","–","2.39","2.39","2.110","–","1.57","2.18","2.39","2.39","2.08","2.49","2.29","2.18","2.49","2.39","2.39","2.38","2.39","2.39","2.39","–","2.310","2.310","2.28","2.39","2.29","2.410","2.18","–","2.310","2.49","–","2.29","–","–","2.1","1.98","–","2.29","–","2.29","2.310","1.87","2.310","2.39","2.49","2.18","1.97","–","–","2.28","2.39","1.67","2.39","2.610/11","–","2.39","2.410","1.88","2.611","2.39","–","2.39","2.410","–","2.28","–","2.410","2.08","2.410","2.07","1.67","–","2.38","2.38","–","2.0","2.710","2.510","2.38","2.38","2.48","2.08","–","–","1.2","1.57","–","2.48","2.59","2.28","2.69","2.69","–","2.59","–","2.510","1.57","–","–","2.49","2.0","2.28","2.28/9","2.510","2.28","–","2.18","–","2.410","2.2","2.410","–","2.49","1.3","1.34","2.39","–","2.39","1.6","1.57","2.39","–","–","2.28","2.39","?9","–","2.0","2.49","2.710","2.49"],["–","1.56","1.46","1.56","–","1.36","1.56","1.46","–","1.56","1.67","1.56","?6","1.67","1.46","–","1.9?","1.98","1.56","1.66","–","1.56","1.67","1.67","1.56","1.2","1.26","–","1.77","1.56","1.67","1.56","1.67","1.56","1.77","1.98","1.56","?6","1.56","1.98","–","–","1.56","1.66","1.66","–","1.88","1.67","1.56","1.47","1.56","1.46","1.77","1.77","–","1.67","1.56","–","1.6?","1.67","–","1.66","1.56","1.77","1.97","1.66","1.76","–","1.66","–","1.77","1.36","1.97","–","1.56","1.56","1.67","1.26","1.56","1.66","1.97","1.66","1.67","1.67","1.56","–","1.67","–","1.76","1.67","1.67","–","1.36","1.66","1.66","1.67","1.98","1.67","1.77","1.98","1.66","1.67","1.77","1.56","1.67","1.77","1.67","–","1.67","1.46","1.56","1.67","1.66","1.46","1.88","–","1.77","1.66","–","1.77","–","–","1.2","1.46","–","1.77","–","1.77","1.77","1.58","1.57","1.77","1.77","1.66","2.09","–","–","1.46","1.77","1.46","1.77","1.46/7","–","1.77","1.66","1.77","1.78","1.77","–","1.67","1.77","–","1.56","–","1.87","1.97","1.77","1.36","1.16","–","1.66","1.56","–","1.9","1.66","1.66","1.66","1.66","1.67","1.97/8","–","–","1.7","1.56","–","1.67","1.67","1.56","1.67","1.67","–","1.67","–","1.66","1.78","–","–","1.46","2.1","1.56","1.56","1.36","1.76/7","–","1.66","?6","1.36","2.0","1.36","–","1.56","1.2","1.57","1.56","–","1.56","1.7","1.68","1.56","–","–","1.66","1.56","?6","–","1.6","1.56","1.87","1.56"],["–","1.15","1.46","1.15","–","0.94","1.46","1.46","–","1.36","1.15","1.36","?4","1.35","1.04","–","–","–","1.35","1.15","–","1.25","1.25","1.35","1.35","0.8","0.83","–","1.05","1.35","1.15","1.15","1.25","1.35","1.25","–","1.25","?5","1.15","–","–","–","1.25","1.04","1.15","–","–","1.04","1.25","0.82","1.15","1.04","1.05","1.15","–","1.15","1.25","–","1.1?","1.15","–","1.15","1.15","1.25","–","1.15","1.15","–","1.15","–","1.25","0.72","–","–","1.15","1.05","1.15","1.15","1.15","1.15","1.25","1.15","1.15","1.15","1.15","–","1.15","–","1.25","1.15","1.15","–","0.94","1.25","1.15","1.15","–","1.15","1.25","–","1.25","1.15","1.15","1.15","1.15","1.25","1.15","–","1.15","0.94","1.15","1.15","1.25","1.15","–","–","1.15","1.25","–","1.15","–","–","0.8","0.72","–","1.15","–","1.15","1.15","–","1.05","1.15","1.25","1.25","–","–","–","1.15","1.25","1.04","1.25","1.25","–","1.15","1.15","–","1.25","1.15","–","1.25","1.25","–","1.25","–","1.25","–","1.25","1.15","1.15","–","1.35","1.35","–","–","1.35","1.35","1.35","1.35","1.35","1.15","–","–","0.9","0.93","–","1.35","1.35","1.35","1.35","1.35","–","1.45","–","1.45","1.05","–","–","1.35","–","1.25","1.35","1.46","1.25","–","1.25","?5","1.46","–","1.46","–","1.45","0.7","0.82","1.35","–","1.35","0.8","0.92","1.35","–","–","1.25","1.35","?5","–","1.1","1.35","1.35","1.35"],["–","0.92","1.02","0.92","–","0.71","1.23","1.02","–","1.02","1.03","1.02","?2","1.34","1.02","–","–","–","1.02","0.92","–","0.92","1.23","0.82","1.02","1.0","0.81","–","–","1.02","0.92","0.92","1.02","1.02","1.13","–","0.92","–","0.92","–","–","–","0.92","1.03","0.92","–","–","0.82","0.92","1.03","0.92","0.92","–","1.13","–","0.92","0.92","–","0.9?","0.92","–","0.92","0.92","1.03","–","1.02","–","–","0.92","–","0.93","0.92","–","–","0.92","0.92","0.81","0.92","0.92","0.92","1.02","0.92","1.03","1.12","0.92","–","0.81","–","–","0.92","0.81","–","0.81","1.03","0.92","0.92","–","0.81","1.12","–","–","0.92","0.92","0.92","0.92","0.71","0.92","–","0.92","0.81","0.92","0.92","1.02","1.02","–","–","0.81","–","–","0.92","–","–","0.7","0.71","–","0.92","–","0.92","0.81","–","0.81","0.92","–","1.02","–","–","–","0.92","1.02","0.81","0.92","1.12","–","0.92","0.81","–","0.92","0.92","–","–","0.92","–","1.02","–","1.02","–","0.92","0.92","0.61","–","0.91","?1","–","–","1.02","0.92","0.92","0.92","0.92","0.81","–","–","0.6","0.61","–","0.92","0.92","?1","0.92","0.91","–","1.12","–","1.02","0.81","–","–","0.92","–","1.02","–","0.81","1.11/2","–","1.12","–","0.81","–","0.81","–","0.81","1.1","0.92","0.81","–","0.81","0.7","0.61","0.81","–","–","1.02","0.81","?1","–","–","0.81","–","0.81"],["–","0.41","0.62","0.62","–","0.41","0.52","0.62","–","0.72","0.41","0.72","?2","0.41","0.62","–","–","–","0.62","0.52","–","0.62","0.52","0.62","0.62","0.2","0.31","–","–","0.62","0.41","0.52","0.41","0.62","0.41","–","0.51","–","0.52","–","–","–","0.51","0.41","0.52","–","–","0.62","0.51","0.41","0.52","0.62","–","0.41","–","0.41","0.51","–","0.6?","0.51","–","0.52","0.51","0.31","–","0.52","–","–","0.51","–","0.52","0.42","–","–","0.51","0.52","0.41","0.52","0.52","0.51","0.41","0.51","0.52","0.62","0.41","–","0.41","–","–","0.51","0.52","–","0.42","0.52","0.51","0.51","–","0.41","0.62","–","–","0.51","0.51","0.41","0.51","0.41","0.51","–","0.51","0.41","0.41","0.51","0.52","0.52","–","–","0.51","–","–","0.51","–","–","0.6","0.30","–","0.51","–","0.50","0.41","–","0.41","0.51","–","0.52","–","–","–","0.41","0.51","0.20","0.51","0.62","–","0.51","0.52","–","0.41","0.51","–","–","0.51","–","0.52","–","0.41","–","0.51","0.41","0.31","–","0.51","–","–","–","0.41","0.51","0.51","0.50","0.52","0.41","–","–","0.2","0.30","–","0.52","0.51","?2","0.51","0.51","–","0.52","–","0.52","0.21","–","–","0.51","–","0.52","–","0.51","0.41/2","–","0.52","–","0.52","–","0.51","–","0.52","0.2","0.41","0.52","–","0.51","0.3","0.52","0.51","–","–","0.52","0.52","?2","–","–","0.52","0.83","0.52"],["–","?1","0.92","0.82","–","0.61","1.02","0.92","–","0.92","0.72","0.92","–","1.14","0.72","–","–","–","0.92","?1","–","0.72","1.02","0.82","0.92","0.5","0.61","–","–","0.92","0.72","0.72","0.51","0.92","1.14","–","0.82","–","?1","–","–","–","0.82","1.13","0.72","–","–","0.71","0.82","0.61","0.61","0.61","–","1.02","–","0.72","0.82","–","–","0.72","–","0.72","0.72","1.13","–","?1","–","–","0.72","–","0.72","0.51","–","–","0.61","0.92","0.72","0.51","0.61","0.61","0.51","0.61","0.61","?1","0.72","–","0.61","–","–","0.61","0.51","–","0.51","0.61","0.61","0.61","–","0.61","?1","–","–","0.61","0.61","0.72","0.61","0.61","0.61","–","0.61","0.61","0.72","0.61","?1","0.61","–","–","0.61","–","–","0.61","–","–","1.0","0.82","–","0.61","–","0.61","0.61","–","0.51","0.61","–","?1","–","–","–","0.72","0.61","0.72","0.61","0.72","–","0.61","0.61","–","0.51","0.61","–","–","0.61","–","?1","–","0.72","–","0.61","0.61","0.51","–","0.61","–","–","–","0.61","0.61","0.61","0.61","0.61","0.61","–","–","0.4","0.51","–","0.61","0.61","?2","0.51","0.51","–","0.72","–","0.72","0.62","–","–","0.72","–","?1","–","0.72","0.62","–","0.72","–","0.72","–","0.72","–","0.72","0.7","0.72","0.72","–","0.72","0.6","0.51","0.72","–","–","0.92","0.71","?2","–","–","0.61","0.62","0.61"],["–","?2","0.52","0.42","–","0.10","0.31","0.52","–","0.52","0.42","0.52","?2","0.42","0.42","–","–","–","0.52","?2","–","0.42","0.42","0.42","0.52","0.3","0.42","–","0.42","0.52","0.42","0.42","–","0.42","0.42","–","0.42","–","?2","–","–","–","0.42","0.42","0.42","–","–","0.42","0.42","0.42","0.42","0.42","0.42","0.52","–","0.42","0.42","0.42","0.4?","0.42","–","0.42","0.42","0.52","–","?2","0.42","–","0.42","–","0.42","0.42","–","–","0.42","0.42","0.42","0.42","0.42","0.42","–","0.42","0.42","?2","0.42","–","0.42","–","0.42","0.42","0.42","–","0.42","0.42","0.42","0.42","–","0.42","?2","–","0.42","0.42","0.42","0.42","0.42","0.42","0.42","–","0.42","0.31","0.42","0.42","?2","0.42","–","–","0.43","0.42","–","0.42","–","–","0.4","0.32","–","0.42","–","0.42","0.42","–","0.32","0.42","0.42","?2","–","–","–","0.42","0.42","0.42","0.42","0.42","–","0.42","0.42","–","0.42","0.42","–","0.42","0.42","–","?2","–","0.42","–","0.42","0.42","0.42","–","0.42","0.42","–","–","0.42","0.42","0.42","0.42","0.42","0.42","–","–","0.3","0.42","–","0.42","0.42","0.42","0.42","0.42","–","0.42","–","0.42","0.42","–","–","0.42","–","?2","0.42","0.42","0.42","–","0.42","0.42","0.42","–","0.42","–","0.42","0.3","0.42","0.42","–","0.42","0.8","0.63","0.42","–","–","0.42","0.42","0.42","–","–","0.42","0.31","0.42"],["–","?1","0.21","0.21","–","0.10","0.21","0.21","–","0.21","0.21","0.21","?1","0.21","0.21","–","–","–","0.21","?1","–","0.21","0.21","0.21","0.21","0.1","0.21","–","–","0.21","0.21","0.21","0.31","0.21","0.21","–","0.21","–","?1","–","–","–","0.31","0.21","0.21","–","–","0.21","0.31","0.10","0.21","0.21","–","0.21","–","0.21","0.31","–","0.2?","0.31","–","0.21","0.31","0.21","–","?1","–","–","0.31","–","0.21","0.10","–","–","0.21","0.31","0.31","0.31","0.21","0.21","0.31","0.31","0.31","?1","0.21","–","0.31","–","–","0.31","0.21","–","0.10","0.31","0.31","0.31","–","0.31","?1","–","–","0.31","0.31","0.21","0.31","0.31","0.31","–","0.31","0.41","0.21","0.31","?1","0.21","–","–","0.31","–","–","0.31","–","–","0.1","0.21","–","0.31","–","0.31","0.31","–","0.41","0.31","–","?1","–","–","–","0.21","0.31","0.10","0.31","0.21","–","0.31","0.31","–","0.21","0.31","–","–","0.31","–","?1","–","0.21","–","0.31","0.31","0.21","–","0.21","–","–","–","0.31","0.31","0.31","0.31","0.31","0.21","–","–","0.0","–","–","0.31","0.31","?1","0.31","0.31","–","0.31","–","0.31","–","–","–","0.31","–","?1","–","0.31","0.21","–","0.31","–","0.31","–","0.31","–","0.31","0.2","0.21","0.31","–","0.31","0.1","0.31","0.31","–","–","0.31","0.31","?1","–","–","0.31","0.31","0.31"],["–","?1","0.11","0.11","–","0.11","0.11","0.11","–","0.11","0.11","0.11","?1","0.11","0.11","–","–","–","0.11","?1","–","0.11","0.11","0.11","0.11","0.0","0.11","–","–","0.11","0.11","0.11","0.9[b]8","0.11","0.11","–","0.11","–","?1","–","–","–","0.11","0.11","0.11","–","–","0.11","0.11","0.11","0.11","0.11","–","0.11","–","0.11","0.11","–","–","0.11","–","0.11","0.11","0.11","–","?1","–","–","0.11","–","0.11","0.11","–","–","0.11","0.11","0.11","0.11","0.11","0.11","0.11","0.11","0.11","?1","0.11","–","0.11","–","–","0.11","0.11","–","0.11","0.11","0.11","0.11","–","0.11","?1","–","–","0.11","0.11","0.11","0.11","0.11","0.11","–","0.11","0.11","0.11","0.11","?1","0.11","–","–","0.11","–","–","0.11","–","–","0.1","0.11","–","0.11","–","0.11","0.11","–","0.11","0.11","–","?1","–","–","–","0.11","0.11","0.11","0.11","0.11","–","0.11","0.11","–","0.11","0.11","–","–","0.11","–","?1","–","0.11","–","0.11","0.11","0.11","–","0.11","–","–","–","0.11","0.11","0.11","0.11","0.11","0.11","–","–","0.1","–","–","0.11","0.11","?1","0.11","0.11","–","0.11","–","0.11","0.11","–","–","0.11","–","?1","–","0.11","0.11","–","0.11","–","0.11","–","0.11","–","0.11","0.3","0.11","0.11","–","0.11","0.0","–","0.11","–","–","0.11","0.11","?1","–","–","0.11","0.11","0.11"],["1.2","0.4","1.5","1.0","0.6","7.0","1.5","1.2","0.3","1.4","2.4","1.0","2.6","0.2","1.3","7.0","3.1","1.4","0.7","0.7","2.0","1.9","1.0","3.4","Tie","4.0","7.2","2.4","3.5","0.2","2.5","2.4","1.0","Tie","0.1","2.2","0.3","2.9","1.7","3.5","0.3","1.3","Tie","0.3","2.4","1.3","3.2","4.6","0.4","6.7","2.5","0.1","4.1","0.8","2.2","3.6","1.9","1.3","0.2","2.2","4.5","2.5","2.1","2.2","3.4","2.4","4.2","2.7","2.0","1.7","3.0","6.4","3.4","0.4","1.4","1.0","4.1","2.2","2.5","0.8","0.2","0.3","0.5","2.0","3.1","0.3","3.7","0.1","4.9","2.1","1.9","3.7","9.1","0.2","2.9","2.8","4.7","5.4","3.5","4.1","4.8","3.6","3.5","4.0","3.6","5.3","3.3","3.3","3.4","1.7","4.4","2.7","3.1","6.0","3.7","4.0","5.8","3.9","1.8","2.3","2.4","1.3","1.7","5.2","3.9","1.9","2.4","3.5","5.9","3.5","2.1","3.5","5.7","3.0","5.6","2.2","4.1","4.5","2.7","3.5","3.1","5.2","4.1","2.5","3.6","4.5","1.1","2.5","3.6","4.2","2.1","0.3","0.8","7.5","5.1","4.7","0.5","2.1","4.5","0.2","1.8","0.8","0.6","4.5","0.6","1.1","3.1","3.1","2.4","1.7","3.5","5.7","9.2","10.9","5.0","2.1","2.4","1.8","1.9","1.7","4.5","1.6","7.0","6.9","13.4","8.6","3.6","7.3","4.3","6.5","3.7","8.2","6.4","5.8","6.0","6.6","8.5","4.2","7.4","9.1","4.4","8.4","11.9","3.7","10.0","3.6","6.4","10.2","3.9","3.8","4.4","3.3","4.1","2.0","5.2","2.1","4.4","3.8","4.3"],[2022,2022,2022,2022,2022,2022,2022,2022,2022,2022,2022,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021,2021]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>casa<\/th>\n      <th>fechas<\/th>\n      <th>muestra<\/th>\n      <th>participacion<\/th>\n      <th>PSOE<\/th>\n      <th>PP<\/th>\n      <th>Vox<\/th>\n      <th>UP<\/th>\n      <th>Cs<\/th>\n      <th>ERC<\/th>\n      <th>MP<\/th>\n      <th>JxCat<\/th>\n      <th>PNV<\/th>\n      <th>EHBildu<\/th>\n      <th>CUP<\/th>\n      <th>CC<\/th>\n      <th>BNG<\/th>\n      <th>NA+<\/th>\n      <th>PRC<\/th>\n      <th>EV<\/th>\n      <th>ventaja<\/th>\n      <th>anno<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":22},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="convertir-a-numéricas" class="section level3 unnumbered">
<h3>Convertir a numéricas<a class="anchor" aria-label="anchor" href="#convertir-a-num%C3%A9ricas"><i class="fas fa-link"></i></a>
</h3>
<p>Si te fijas los <mark><strong>valores de muchas variables son erróneos</strong></mark>, como tamaño de la muestra o participación: son de tipo texto cuando <strong>deberían ser numéricas</strong>.</p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas</span></code></pre></div>
<pre><code>## # A tibble: 219 × 22
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 DYM/H… 19–23… 1,008   ?             25.7… 26.9… 17.1… 11.6… 3.42… –     2.82…
##  2 KeyDa… 21 Jan ?       68.1          26.0… 25.6… 17.4… 11.5… 2.91  3.513 3.04 
##  3 Elect… 14–20… 1,190   ?             24.4… 22.9… 20.7… 12.7… 3.21  3.514 2.55 
##  4 Celes… 10–14… 1,100   ?             26.2… 27.2… 16.5… 11.0… 3.42  3.012 3.65 
##  5 InvyM… 10–14… ?       ?             27.3  27.9  16.5  10.9  1.3   –     3.0  
##  6 CIS[7… 3–14 … 3,777   ?             28.5… 21.5… 14.7… 13.1… 4.03  3.013 2.83 
##  7 IMOP/… 3–14 … 1,312   ?             26.4… 24.9… 17.9… 11.8… 2.61  3.414 2.53 
##  8 Elect… 7–13 … 1,317   ?             24.5… 23.3… 20.5… 12.4… 3.31  3.514 2.66 
##  9 Simpl… 3–13 … 1,039   63.0          24.6  24.3  18.7  11.1  2.5   –     2.3  
## 10 Elect… 31 De… 1,823   ?             24.9… 23.5… 20.2… 12.0… 3.21  3.514 2.65 
## # … with 209 more rows, and 11 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;,
## #   EHBildu &lt;chr&gt;, CUP &lt;chr&gt;, CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;,
## #   EV &lt;chr&gt;, ventaja &lt;chr&gt;, anno &lt;dbl&gt;</code></pre>
<p>Para ello vamos antes a <mark><strong>eliminar las comas</strong></mark><code>","</code> que separan los millares de los números, con <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code>. Dicha orden nos permite <mark><strong>sustituir en un vector los caracteres</strong></mark> que queramos. Por ejemplo, de un vector de palabras vamos a cambiar la letra <code>a</code> por un punto <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code>: primero le indicamos el patrón a buscar, después el valor nuevo que le daremos, y por último la variable en la que lo vamos a aplicar.</p>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hola"</span>, <span class="st">"cama"</span>, <span class="st">"elefante"</span>, <span class="st">"cerrojo"</span>, <span class="st">"león"</span>, <span class="st">"gata"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"*"</span>, <span class="va">variable</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "hol*"     "c*m*"     "elef*nte" "cerrojo"  "león"     "g*t*"</code></pre>
<p>Con esta función localizaremos las <code>","</code> de <code>muestra</code> para sustituirlas por <code>""</code> (sin nada), y lo mismo haremos con <code>"?"</code> en la variable <code>participacion</code> con los datos ausentes <code>"?"</code>.</p>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">&lt;-</span>
  <span class="va">encuestas</span> <span class="op">%&gt;%</span>
  <span class="co"># Quitamos "," como millares en números</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>muestra <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"?"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">","</span>, <span class="st">""</span>, <span class="va">muestra</span><span class="op">)</span><span class="op">)</span>,
         participacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"?"</span>, <span class="cn">NA</span>, <span class="va">participacion</span><span class="op">)</span><span class="op">)</span>
<span class="va">encuestas_depurado</span></code></pre></div>
<pre><code>## # A tibble: 219 × 22
##    casa   fechas muestra participacion PSOE  PP    Vox   UP    Cs    ERC   MP   
##    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 DYM/H… 19–23… 1008    &lt;NA&gt;          25.7… 26.9… 17.1… 11.6… 3.42… –     2.82…
##  2 KeyDa… 21 Jan ?       &lt;NA&gt;          26.0… 25.6… 17.4… 11.5… 2.91  3.513 3.04 
##  3 Elect… 14–20… 1190    &lt;NA&gt;          24.4… 22.9… 20.7… 12.7… 3.21  3.514 2.55 
##  4 Celes… 10–14… 1100    &lt;NA&gt;          26.2… 27.2… 16.5… 11.0… 3.42  3.012 3.65 
##  5 InvyM… 10–14… ?       &lt;NA&gt;          27.3  27.9  16.5  10.9  1.3   –     3.0  
##  6 CIS[7… 3–14 … 3777    &lt;NA&gt;          28.5… 21.5… 14.7… 13.1… 4.03  3.013 2.83 
##  7 IMOP/… 3–14 … 1312    &lt;NA&gt;          26.4… 24.9… 17.9… 11.8… 2.61  3.414 2.53 
##  8 Elect… 7–13 … 1317    &lt;NA&gt;          24.5… 23.3… 20.5… 12.4… 3.31  3.514 2.66 
##  9 Simpl… 3–13 … 1039    &lt;NA&gt;          24.6  24.3  18.7  11.1  2.5   –     2.3  
## 10 Elect… 31 De… 1823    &lt;NA&gt;          24.9… 23.5… 20.2… 12.0… 3.21  3.514 2.65 
## # … with 209 more rows, and 11 more variables: JxCat &lt;chr&gt;, PNV &lt;chr&gt;,
## #   EHBildu &lt;chr&gt;, CUP &lt;chr&gt;, CC &lt;chr&gt;, BNG &lt;chr&gt;, NA+ &lt;chr&gt;, PRC &lt;chr&gt;,
## #   EV &lt;chr&gt;, ventaja &lt;chr&gt;, anno &lt;dbl&gt;</code></pre>
<p>Tras estos cambios, aunque muchas variables numéricas siguen siendo caracter, ya podemos aplicar la función <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>, que aplicaremos a todas las variables menos <code>casa</code> y <code>fechas</code>, con <code>mutate_at</code>, indicándole con <code><a href="https://rdrr.io/pkg/dplyr/man/vars.html">vars()</a></code> primero las columnas a seleccionar (aquellas que no contengan la palabra <code>casa</code> ni <code>fechas</code>), y después la función a aplicar.</p>
<div class="sourceCode" id="cb398"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">&lt;-</span>
  <span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate_all.html">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/vars.html">vars</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/pkg/tidyselect/man/starts_with.html">contains</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"casa"</span>, <span class="st">"fechas"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">as.numeric</span><span class="op">)</span>
<span class="va">encuestas_depurado</span></code></pre></div>
<pre><code>## # A tibble: 219 × 22
##    casa   fechas muestra participacion  PSOE    PP   Vox    UP    Cs   ERC    MP
##    &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 DYM/H… 19–23…    1008            NA  NA    NA    NA    NA   NA    NA    NA   
##  2 KeyDa… 21 Jan      NA            NA  26.0  25.6  17.5  11.5  2.91  3.51  3.04
##  3 Elect… 14–20…    1190            NA  24.5  23.0  20.8  12.7  3.21  3.51  2.55
##  4 Celes… 10–14…    1100            NA  26.2  27.2  16.6  11.0  3.42  3.01  3.65
##  5 InvyM… 10–14…      NA            NA  27.3  27.9  16.5  10.9  1.3  NA     3   
##  6 CIS[7… 3–14 …    3777            NA  28.5  21.6  14.8  13.1  4.03  3.01  2.83
##  7 IMOP/… 3–14 …    1312            NA  26.4  24.9  18.0  11.8  2.61  3.41  2.53
##  8 Elect… 7–13 …    1317            NA  24.6  23.4  20.6  12.4  3.31  3.51  2.66
##  9 Simpl… 3–13 …    1039            NA  24.6  24.3  18.7  11.1  2.5  NA     2.3 
## 10 Elect… 31 De…    1823            NA  25.0  23.6  20.3  12.0  3.21  3.51  2.65
## # … with 209 more rows, and 11 more variables: JxCat &lt;dbl&gt;, PNV &lt;dbl&gt;,
## #   EHBildu &lt;dbl&gt;, CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;, PRC &lt;dbl&gt;,
## #   EV &lt;dbl&gt;, ventaja &lt;dbl&gt;, anno &lt;dbl&gt;</code></pre>
</div>
<div id="convertir-las-fechas-de-campo" class="section level3 unnumbered">
<h3>Convertir las fechas de campo<a class="anchor" aria-label="anchor" href="#convertir-las-fechas-de-campo"><i class="fas fa-link"></i></a>
</h3>
<p>Las <mark><strong>fechas del trabajo de campo</strong></mark> deben ser tratadas previamente:</p>
<ul>
<li><p>las fechas de tipo <code>"28 Dec–2 Jan"</code> (por ejemplo, de 2021) deberemos de convertirlas en dos fechas, <code>2021-12-28</code> y <code>2022-01-02</code>.</p></li>
<li><p>las fechas de tipo <code>"12–14 Jan"</code> (por ejemplo, de 2021) deberemos de convertirlas en dos fechas, <code>2021-01-12</code> y <code>2021-01-14</code>.</p></li>
<li><p>las fechas de tipo <code>"15 Jan"</code> (por ejemplo, de 2021), las convertiremos a dos fechas, <code>2021-01-15</code> y <code>2021-01-15</code>.</p></li>
</ul>
<p>Para ello primero que vamos a hacer va a ser <mark><strong>separar las fechas por los guiones <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code></strong></mark> con <code>str_plit()</code> (que nos devolverá una lista).</p>
<div class="sourceCode" id="cb400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fechas_intermedias</span> <span class="op">&lt;-</span> <span class="fu">str_split</span><span class="op">(</span><span class="va">encuestas_depurado</span><span class="op">$</span><span class="va">fechas</span>, <span class="st">"–"</span><span class="op">)</span>
<span class="va">fechas_intermedias</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></code></pre></div>
<pre><code>## [[1]]
## [1] "19"     "23 Jan"
## 
## [[2]]
## [1] "21 Jan"
## 
## [[3]]
## [1] "14"     "20 Jan"
## 
## [[4]]
## [1] "10"     "14 Jan"
## 
## [[5]]
## [1] "10"     "14 Jan"
## 
## [[6]]
## [1] "3"      "14 Jan"</code></pre>
<p>En cada lugar de la lista vemos que tenemos dos fechas en la mayoría de casos: las pondremos en columnas <code>fecha_inicio</code> y <code>fecha_inicial</code>, devolviendo un <code>tibble</code> con <code>map_dfr</code> aplicado a la lista</p>
<div class="sourceCode" id="cb402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fechas_intermedias</span> <span class="op">&lt;-</span>
  <span class="fu">map_dfr</span><span class="op">(</span><span class="va">fechas_intermedias</span>,
          <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/pkg/tibble/man/tibble.html">tibble</a></span><span class="op">(</span><span class="st">"fecha_inicio"</span> <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                               <span class="st">"fecha_final"</span> <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span>
<span class="va">fechas_intermedias</span></code></pre></div>
<pre><code>## # A tibble: 219 × 2
##    fecha_inicio fecha_final
##    &lt;chr&gt;        &lt;chr&gt;      
##  1 19           23 Jan     
##  2 21 Jan       &lt;NA&gt;       
##  3 14           20 Jan     
##  4 10           14 Jan     
##  5 10           14 Jan     
##  6 3            14 Jan     
##  7 3            14 Jan     
##  8 7            13 Jan     
##  9 3            13 Jan     
## 10 31 Dec       6 Jan      
## # … with 209 more rows</code></pre>
<p>Los registros donde <code>fecha_final</code> está ausente significa que toma el mismo valor que la fecha de inicio, y así lo modificaremos.</p>
<div class="sourceCode" id="cb404"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fechas_intermedias</span> <span class="op">&lt;-</span>
  <span class="va">fechas_intermedias</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>fecha_final <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">fecha_final</span><span class="op">)</span>,
                              <span class="va">fecha_inicio</span>, <span class="va">fecha_final</span><span class="op">)</span><span class="op">)</span>
<span class="va">fechas_intermedias</span></code></pre></div>
<pre><code>## # A tibble: 219 × 2
##    fecha_inicio fecha_final
##    &lt;chr&gt;        &lt;chr&gt;      
##  1 19           23 Jan     
##  2 21 Jan       21 Jan     
##  3 14           20 Jan     
##  4 10           14 Jan     
##  5 10           14 Jan     
##  6 3            14 Jan     
##  7 3            14 Jan     
##  8 7            13 Jan     
##  9 3            13 Jan     
## 10 31 Dec       6 Jan      
## # … with 209 more rows</code></pre>
<p>Las fechas que no tenga mes en <code>fecha_inicio</code>, asumiremos que es el mismo mes que <code>fecha_final</code>: si solo hay números (dos o menos caracteres), obtenemos el mes de la <code>fecha_final</code> (últimos 3 caracteres) y lo pegamos al día.</p>
<div class="sourceCode" id="cb406"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fechas_intermedias</span> <span class="op">&lt;-</span>
  <span class="va">fechas_intermedias</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>fecha_inicio <span class="op">=</span>
           <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">fecha_inicio</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">2</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">fecha_inicio</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu">str_split</span><span class="op">(</span><span class="va">fecha_final</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,
                               collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span>, <span class="va">fecha_inicio</span><span class="op">)</span><span class="op">)</span>
<span class="va">fechas_intermedias</span></code></pre></div>
<pre><code>## # A tibble: 219 × 2
##    fecha_inicio fecha_final
##    &lt;chr&gt;        &lt;chr&gt;      
##  1 19 Jan       23 Jan     
##  2 21 Jan       21 Jan     
##  3 14 Jan       20 Jan     
##  4 10 Jan       14 Jan     
##  5 10 Jan       14 Jan     
##  6 3 Jan        14 Jan     
##  7 3 Jan        14 Jan     
##  8 7 Jan        13 Jan     
##  9 3 Jan        13 Jan     
## 10 31 Dec       6 Jan      
## # … with 209 more rows</code></pre>
<p>Esas fechas intermedias las vamos añadir como columnas y, pegándole el año, <strong>vamos a convertirlas en datos de tipo fecha</strong>. De todas las fechas nos vamos a quedar solo con la <code>fecha_final</code> (recolocando dicha columna tras el nombre de la casa encuestadora).</p>
<div class="sourceCode" id="cb408"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="va">encuestas_depurado</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">encuestas_depurado</span>,
            <span class="va">fechas_intermedias</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>fecha_inicio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/ymd.html">dmy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">fecha_inicio</span>, <span class="va">anno</span><span class="op">)</span><span class="op">)</span>,
         fecha_final <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/lubridate/man/ymd.html">dmy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">fecha_final</span>, <span class="va">anno</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">fechas</span>, <span class="va">anno</span>, <span class="va">fecha_inicio</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/relocate.html">relocate</a></span><span class="op">(</span><span class="va">fecha_final</span>, .after <span class="op">=</span> <span class="va">casa</span><span class="op">)</span>
<span class="va">encuestas_depurado</span></code></pre></div>
<pre><code>## # A tibble: 219 × 21
##    casa    fecha_final muestra participacion  PSOE    PP   Vox    UP    Cs   ERC
##    &lt;chr&gt;   &lt;date&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 DYM/He… 2022-01-23     1008            NA  NA    NA    NA    NA   NA    NA   
##  2 KeyDat… 2022-01-21       NA            NA  26.0  25.6  17.5  11.5  2.91  3.51
##  3 Electo… 2022-01-20     1190            NA  24.5  23.0  20.8  12.7  3.21  3.51
##  4 Celest… 2022-01-14     1100            NA  26.2  27.2  16.6  11.0  3.42  3.01
##  5 InvyMa… 2022-01-14       NA            NA  27.3  27.9  16.5  10.9  1.3  NA   
##  6 CIS[7]… 2022-01-14     3777            NA  28.5  21.6  14.8  13.1  4.03  3.01
##  7 IMOP/E… 2022-01-14     1312            NA  26.4  24.9  18.0  11.8  2.61  3.41
##  8 Electo… 2022-01-13     1317            NA  24.6  23.4  20.6  12.4  3.31  3.51
##  9 Simple… 2022-01-13     1039            NA  24.6  24.3  18.7  11.1  2.5  NA   
## 10 Electo… 2022-01-06     1823            NA  25.0  23.6  20.3  12.0  3.21  3.51
## # … with 209 more rows, and 11 more variables: MP &lt;dbl&gt;, JxCat &lt;dbl&gt;,
## #   PNV &lt;dbl&gt;, EHBildu &lt;dbl&gt;, CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;,
## #   PRC &lt;dbl&gt;, EV &lt;dbl&gt;, ventaja &lt;dbl&gt;</code></pre>
</div>
<div id="limpiamos-nombres-de-encuestas" class="section level3 unnumbered">
<h3>Limpiamos nombres de encuestas<a class="anchor" aria-label="anchor" href="#limpiamos-nombres-de-encuestas"><i class="fas fa-link"></i></a>
</h3>
<p>Por último, vamos <mark><strong>limpiar los nombres de las encuestas</strong></mark> eliminando la referencia a los enlaces de la wikipedia</p>
<div class="sourceCode" id="cb410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">&lt;-</span>
  <span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="co"># Limpiamos nombre encuestas</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>casa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="fu">map_chr</span><span class="op">(</span><span class="fu">str_split</span><span class="op">(</span><span class="va">casa</span>, <span class="st">"\\["</span><span class="op">)</span>,
                                <span class="kw">function</span> <span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">{</span> <span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">}</span> <span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-fdee0862944743f1074f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-fdee0862944743f1074f">{"x":{"filter":"none","caption":"<caption>Encuestas depuradas de 2021 y 2022<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219"],["DYM/HENNEO","KEYDATA/PÚBLICO","ELECTOPANEL/ELECTOMANÍA","CELESTE-TEL/ONDA CERO","INVYMARK/LASEXTA","CIS","IMOP/EL CONFIDENCIAL","ELECTOPANEL/ELECTOMANÍA","SIMPLE LÓGICA/ELDIARIO.ES","ELECTOPANEL/ELECTOMANÍA","DATA10/OKDIARIO","ELECTOPANEL/ELECTOMANÍA","40DB/PRISA","IMOP/EL CONFIDENCIAL","SOCIOMÉTRICA/EL ESPAÑOL","PSOE","SIGMA DOS/ANTENA 3","SIGMA DOS/EL MUNDO","ELECTOPANEL/ELECTOMANÍA","KEYDATA/PÚBLICO","DYM/HENNEO","CELESTE-TEL/ONDA CERO","IMOP/EL CONFIDENCIAL","GAD3/ABC","ELECTOPANEL/ELECTOMANÍA","CIS (SOCIOMÉTRICA)","CIS","SIMPLE LÓGICA","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","DATA10/OKDIARIO","HAMALGAMA MÉTRICA/VOZPÓPULI","ÁGORA INTEGRAL/CANARIAS AHORA","ELECTOPANEL/ELECTOMANÍA","IMOP/EL CONFIDENCIAL","SIGMA DOS/EL MUNDO","ELECTOPANEL/ELECTOMANÍA","SW DEMOSCOPIA/PUBLICACIONES SUR","KEYDATA/PÚBLICO","SIGMA DOS/ANTENA 3","DYM/HENNEO","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","IMOP/EL CONFIDENCIAL","CELESTE-TEL/ONDA CERO","SIMPLE LÓGICA","SIGMA DOS/EL MUNDO","GAD3/NIUS","ELECTOPANEL/ELECTOMANÍA","CIS","HAMALGAMA MÉTRICA/VOZPÓPULI","SOCIOMÉTRICA/EL ESPAÑOL","NC REPORT/LA RAZÓN","IMOP/EL CONFIDENCIAL","INVYMARK/LASEXTA","DATA10/OKDIARIO","ELECTOPANEL/ELECTOMANÍA","METROSCOPIA","SW DEMOSCOPIA","ELECTOPANEL/ELECTOMANÍA","DYM/HENNEO","CELESTE-TEL/ONDA CERO","ELECTOPANEL/ELECTOMANÍA","IMOP/EL CONFIDENCIAL","SIGMA DOS/EL MUNDO","KEYDATA/PÚBLICO","NC REPORT/LA RAZÓN","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","SIMPLE LÓGICA","GAD3/ABC","CIS","SIGMA DOS/ANTENA 3","METROSCOPIA","ELECTOPANEL/ELECTOMANÍA","IMOP/EL CONFIDENCIAL","DATA10/OKDIARIO","SOCIOMÉTRICA/EL ESPAÑOL","HAMALGAMA MÉTRICA/VOZPÓPULI","ELECTOPANEL/ELECTOMANÍA","ÁGORA INTEGRAL/CANARIAS AHORA","ELECTOPANEL/ELECTOMANÍA","IMOP/EL CONFIDENCIAL","KEYDATA/PÚBLICO","CELESTE-TEL/ONDA CERO","METROSCOPIA","DATA10/OKDIARIO","DYM/HENNEO","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","GAD3/NIUS","SIMPLE LÓGICA","CIS","IMOP/EL CONFIDENCIAL","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","SIGMA DOS/EL MUNDO","DATA10/OKDIARIO","KEYDATA/PÚBLICO","SIGMA DOS/ANTENA 3","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","CELESTE-TEL/ONDA CERO","ELECTOPANEL/ELECTOMANÍA","DATA10/OKDIARIO","ELECTOPANEL/ELECTOMANÍA","SIMPLE LÓGICA","ELECTOPANEL/ELECTOMANÍA","SOCIOMÉTRICA/EL ESPAÑOL","CELESTE-TEL/ONDA CERO","ELECTOPANEL/ELECTOMANÍA","KEYDATA/PÚBLICO","GAD3/ABC","SIGMA DOS/ANTENA 3","DYM/HENNEO","DATA10/OKDIARIO","NC REPORT/LA RAZÓN","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","METROSCOPIA","GESOP/EL PERIÓDICO","CIS (SOCIOMÉTRICA)","CIS","SIMPLE LÓGICA","ELECTOPANEL/ELECTOMANÍA","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","DATA10/OKDIARIO","SIGMA DOS/EL MUNDO","SOCIOMÉTRICA/EL ESPAÑOL","ELECTOPANEL/ELECTOMANÍA","NC REPORT/LA RAZÓN","KEYDATA/PÚBLICO","SIGMA DOS/ANTENA 3","DYM/HENNEO","METROSCOPIA","CELESTE-TEL/ONDA CERO","ELECTOPANEL/ELECTOMANÍA","CIS","ELECTOPANEL/ELECTOMANÍA","GAD3/NIUS","SIMPLE LÓGICA","ELECTOPANEL/ELECTOMANÍA","DATA10/OKDIARIO","SIGMA DOS/EL MUNDO","SOCIOMÉTRICA/EL ESPAÑOL","ELECTOPANEL/ELECTOMANÍA","DYM/HENNEO","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","INVYMARK/LASEXTA","KEYDATA/PÚBLICO","METROSCOPIA","GAD3/ABC","SIGMA DOS/ANTENA 3","ELECTOPANEL/ELECTOMANÍA","CELESTE-TEL/ONDA CERO","CIS","SIMPLE LÓGICA","HAMALGAMA MÉTRICA/OKDIARIO","NC REPORT/LA RAZÓN","INVYMARK/LASEXTA","SIGMA DOS/EL MUNDO","DEMOSCOPIA Y SERVICIOS/ESDIARIO","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","GAD3/NIUS","INVYMARK/LASEXTA","METROSCOPIA","CIS (SOCIOMÉTRICA)","CIS","SIMPLE LÓGICA","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","ELECTOPANEL/ELECTOMANÍA","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","METROSCOPIA","ELECTOPANEL/ELECTOMANÍA","CIS","SIMPLE LÓGICA","INVYMARK/LASEXTA","ELECTOPANEL/ELECTOMANÍA","SIGMA DOS/EL MUNDO","KEYDATA/PÚBLICO","NC REPORT/LA RAZÓN","ELECTOPANEL/ELECTOMANÍA","GAD3/NIUS","DYM/HENNEO","CELESTE-TEL/ONDA CERO","HAMALGAMA MÉTRICA/OKDIARIO","ELECTOPANEL/ELECTOMANÍA","SIGMA DOS/EL MUNDO","ELECTOPANEL/ELECTOMANÍA","METROSCOPIA","ELECTOPANEL/ELECTOMANÍA","CIS (SOCIOMÉTRICA)","CIS","ELECTOPANEL/ELECTOMANÍA","SIMPLE LÓGICA","ELECTOPANEL/ELECTOMANÍA","CIS (SOCIOMÉTRICA)","CIS","ELECTOPANEL/ELECTOMANÍA","INVYMARK/LASEXTA","METROSCOPIA","CELESTE-TEL/ONDA CERO","ELECTOPANEL/ELECTOMANÍA","HAMALGAMA MÉTRICA/OKDIARIO","SIMPLE LÓGICA","SYM CONSULTING","ELECTOPANEL/ELECTOMANÍA","SOCIOMÉTRICA/EL ESPAÑOL","ELECTOPANEL/ELECTOMANÍA"],["2022-01-23","2022-01-21","2022-01-20","2022-01-14","2022-01-14","2022-01-14","2022-01-14","2022-01-13","2022-01-13","2022-01-06","2022-01-05","2021-12-30","2021-12-30","2021-12-30","2021-12-30","2021-12-27","2021-12-26","2021-12-24","2021-12-23","2021-12-22","2021-12-19","2021-12-17","2021-12-17","2021-12-16","2021-12-16","2021-12-13","2021-12-13","2021-12-13","2021-12-11","2021-12-10","2021-12-09","2021-12-09","2021-12-05","2021-12-03","2021-12-03","2021-12-01","2021-11-26","2021-11-24","2021-11-22","2021-11-22","2021-11-21","2021-11-19","2021-11-19","2021-11-19","2021-11-16","2021-11-15","2021-11-11","2021-11-11","2021-11-11","2021-11-11","2021-11-10","2021-11-08","2021-11-06","2021-11-06","2021-11-05","2021-11-04","2021-11-04","2021-11-04","2021-10-30","2021-10-29","2021-10-24","2021-10-22","2021-10-22","2021-10-22","2021-10-21","2021-10-20","2021-10-15","2021-10-15","2021-10-15","2021-10-15","2021-10-14","2021-10-13","2021-10-11","2021-10-10","2021-10-08","2021-10-08","2021-10-07","2021-10-07","2021-10-06","2021-10-01","2021-09-27","2021-09-24","2021-09-24","2021-09-23","2021-09-21","2021-09-20","2021-09-20","2021-09-19","2021-09-18","2021-09-17","2021-09-16","2021-09-16","2021-09-13","2021-09-10","2021-09-09","2021-09-03","2021-09-02","2021-09-01","2021-08-30","2021-08-30","2021-08-27","2021-08-26","2021-08-21","2021-08-20","2021-08-13","2021-08-06","2021-08-06","2021-08-04","2021-07-30","2021-07-29","2021-07-23","2021-07-23","2021-07-22","2021-07-22","2021-07-19","2021-07-19","2021-07-17","2021-07-16","2021-07-16","2021-07-16","2021-07-15","2021-07-15","2021-07-15","2021-07-15","2021-07-12","2021-07-10","2021-07-02","2021-07-02","2021-07-01","2021-07-01","2021-06-27","2021-06-26","2021-06-26","2021-06-21","2021-06-21","2021-06-21","2021-06-20","2021-06-18","2021-06-18","2021-06-15","2021-06-11","2021-06-10","2021-06-09","2021-06-04","2021-06-03","2021-06-01","2021-05-29","2021-05-28","2021-05-24","2021-05-22","2021-05-22","2021-05-21","2021-05-20","2021-05-20","2021-05-18","2021-05-17","2021-05-15","2021-05-14","2021-05-13","2021-05-12","2021-05-11","2021-05-08","2021-05-07","2021-05-06","2021-05-06","2021-05-06","2021-05-02","2021-04-24","2021-04-17","2021-04-16","2021-04-16","2021-04-15","2021-04-14","2021-04-14","2021-04-13","2021-04-09","2021-04-02","2021-03-31","2021-03-26","2021-03-20","2021-03-19","2021-03-15","2021-03-15","2021-03-13","2021-03-11","2021-03-09","2021-03-05","2021-03-05","2021-03-03","2021-03-01","2021-02-28","2021-02-27","2021-02-25","2021-02-23","2021-02-23","2021-02-22","2021-02-20","2021-02-17","2021-02-16","2021-02-15","2021-02-12","2021-02-11","2021-02-11","2021-02-06","2021-02-05","2021-01-29","2021-01-25","2021-01-25","2021-01-22","2021-01-22","2021-01-15","2021-01-15","2021-01-15","2021-01-14","2021-01-13","2021-01-10","2021-01-09","2021-01-05","2021-01-02"],[1008,null,1190,1100,null,3777,1312,1317,1039,1823,1000,1189,2000,1315,3000,null,null,2619,1299,null,1012,1100,1297,1003,1305,3733,3733,1041,1000,2177,1000,1000,1500,1132,1316,1633,null,610,null,null,1021,null,1564,1343,1100,1026,1688,1001,1502,3779,1000,1200,1000,1342,null,1000,1479,2400,1203,1228,1000,1100,1822,1338,1928,null,1000,null,1863,1056,1001,3660,null,null,2119,1317,1000,1200,1000,1193,1000,1651,1304,null,1100,null,1000,1000,1000,1233,1002,1027,3780,1309,1084,1640,1050,1000,null,null,1000,1422,2208,1100,1399,1000,1170,1062,877,1200,1100,1601,null,1030,null,1019,1000,1000,null,2001,null,802,3798,3798,1076,1883,null,2539,1000,1020,null,1627,1000,null,null,1002,null,1100,1332,3814,1673,1026,1017,1462,1000,1000,1100,1272,1008,1000,1582,null,null,null,1202,null,1930,1100,3814,1063,1000,1000,null,1000,1000,1825,4320,3125,2450,1001,null,null,3823,3823,1053,2300,2000,1000,2000,2513,null,2400,null,2576,3820,1023,null,1406,1096,null,1000,1406,1000,1002,1100,1000,1406,1145,1240,null,2530,3869,3869,1814,1054,1493,3862,3862,1470,null,null,1100,1382,1000,1045,2915,1562,1206,1321],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,26.0106,24.494,26.2102,27.3,28.5128,26.4105,24.592,24.6,24.995,25.498,24.995,null,25.2102,25.5103,29,25.7102,26.0102,25.3101,25.7103,null,26.0102,25.7103,25.199,25.3102,24.7,28.0122,25.5,null,25.5102,25.61,25.799,25.5101,25.8102,25.7104,26.4106,25.9104,25.9106,25.6102,25.8101,null,26.7,25.7101,27.1107,26.1102,24.3,25.91,null,25.8104,27.6122,25.81,25.4105,null,26.3104,26,25.298,25.499,26.5107,null,25.598,null,26.4103,25.81,25.8101,25.599,25.8103,null,25.7,26.2102,23.8,26.2103,28.5128,25.11,26.6,26.6105,25.8101,24.998,25.099,26.2103,26.7106,26.1103,27.2108,26.1103,26.0104,26.1103,26.5,25.01,null,null,26.0103,null,26.2,29.613,26.6108,25.7102,25.397,24.498,24.598,25.3101,24.899,null,25.096,25.096,25.7102,25.096,24.799,25.098,27.9,25.098,24.7101,25.6101,25.499,25.2102,25.1101,25.1103,null,24.597,null,26.2,25.499,26,null,25.1,28.6128,23,26.0101,25.9,24.995,24.396,25.9103,24.196,25.197,null,25.2103,24.596,null,26.1,25.398,25.9102,27.4122,25.399,null,23,25.498,25.5103,25.01,25.4102,25.497,null,null,25.297,26.9,26.211,22.8,25.4103,26.0101,26.4107,26.01,27.9124,26,25.599,null,26.7,25.7,25.3107,26.9108,27.1113,27.0112,26.6107,null,28,29.8,30,31.5136,27.9,26.2106,26.5107,null,26.4107,26.2105,28.4,26.2103,27.9,29.9123,31.314,27.1,26.8,28.5118,27.2,27.8119,null,29.0121,null,null,28.3118,28.7118,29.4123,27.6,29.0123,28.7,27.3117,28.1,30.7141,27.2117,28.8,27.0116,28.6,30.7139,27.1116,27,27.2,27.0113,27.2118,26.4109,26.3,26.7,27.2117,26.7112,27.3117],[null,25.6106,22.994,27.2115,27.9,21.594,24.9103,23.396,24.3,23.598,27.8117,23.998,null,25.0102,24.2101,22,28.8125,27.4118,24.699,26.4113,null,27.9118,24.7101,28.5122,25.3101,20.7,20.892,23.1,null,25.7105,28.1119,28.1118,24.5104,25.8105,25.8105,28.6126,26.2109,23.097,27.3116,29.313,null,28,25.7105,26.8113,28.5121,23,29.113,null,26.2107,20.992,28.312,25.5107,null,27.1117,28.2,28.8126,27.3116,25.2104,null,27.7117,null,28.9123,27.9118,28.012,28.9129,28.2121,null,28.4,28.2119,25.5,29.2123,22.199,28.513,26.2,28.0118,26.8115,29.0127,27.2118,28.7121,27.5114,26.3118,27.5117,26.6113,28.012,29.2124,26.2,28.7126,null,null,28.112,null,22.5,20.592,26.4113,28.6121,28.112,29.1131,29.8129,28.8125,28.9132,null,28.6124,28.5122,29.7129,28.6124,30.0131,28.312,24.6,28.4121,26.4116,30.0131,28.112,28.3122,31.1139,28.813,null,30.3133,null,28,27.7117,28.4,null,26.8,23.4103,26.9,27.9118,28.3,28.4124,30.2134,29.413,26.2115,28.6123,null,28.2121,30.1133,null,30.2,29.8131,28.6121,23.9103,28.4121,null,27.1,27.9121,28.7124,29.5132,26.5114,27.9121,null,null,27.3119,27.2,27.0115,30.3,30.5138,30.7133,26.9115,28.1117,23.4103,26.2,27.3111,null,27.3,30.2,25.9113,25.811,24.01,23.999,24.299,null,24.5,24.1,20.8,20.688,22.9,24.199,24.1101,null,24.5104,24.5103,23.9,24.6103,20.9,23.092,17.974,17.5,23.2,21.29,22.9,21.39,null,20.884,null,null,22.396,22.191,20.988,23.4,21.689,19.6,22.997,19.7,18.878,23.5101,18.8,23.4102,22.2,20.588,23.2101,23.2,22.8,23.7101,23.197,24.4103,21.1,24.6,22.896,22.997,23.097],[null,17.464,20.778,16.559,16.5,14.75,17.966,20.577,18.7,20.276,17.06,19.975,null,18.667,17.765,17,15.752,16.658,19.57,17.159,null,16.155,19.168,17.156,18.769,18.8,14.649,19.4,null,18.567,16.556,16.357,16.958,18.166,18.264,15.047,17.962,18.868,16.456,15.247,null,16.6,18.267,16.757,15.452,18.3,15.448,null,17.961,14.348,16.155,16.858,null,16.451,16.9,16.252,17.458,18.066,null,17.358,null,15.15,17.357,15.952,15.047,15.753,null,16.6,16.755,17.6,15.451,13.241,14.645,17,16.954,16.858,16.052,16.355,15.953,17.056,15.454,16.552,17.059,15.552,15.15,18.1,16.152,null,null,16.453,null,17.7,13.843,16.556,16.253,16.355,14.947,15.551,15.149,14.746,null,16.354,16.355,14.848,16.354,15.35,16.455,15.9,16.555,16.156,14.947,17.056,15.752,12.437,14.144,null,15.449,null,17.7,17.358,14.7,null,15.6,13.641,17.4,16.755,18.1,16.354,15.549,14.444,16.658,16.254,null,15.852,15.548,null,14.6,15.549,15.851,13.041,16.254,null,17,16.855,15.852,15.451,16.96,16.755,null,null,16.455,18.4,16.454,12.2,13.84,15.749,15.852,16.259,13.743,15.9,17.967,null,18.9,15.2,16.961,16.657,16.959,16.959,17.263,null,18.3,17.6,18.8,15.453,17.6,17.061,16.86,null,16.656,16.757,18.6,16.656,19.9,18.164,15.053,18.5,17.4,18.968,17.4,17.764,null,19.07,null,null,18.26,19.164,18.465,15.6,17.963,19.1,15.853,16.3,13.645,15.249,16.9,15.45,15.9,13.04,15.651,16.9,16.5,14.851,15.853,15.655,15.2,14.2,16.155,16.76,16.054],[null,11.529,12.733,11.026,10.9,13.138,11.829,12.433,11.1,12.03,10.928,11.829,null,12.13,12.333,11,10.625,10.925,11.428,11.129,null,10.225,11.83,9.824,11.126,14.1,13.74,10.6,null,10.825,10.626,10.226,11.832,11.126,11.628,10.124,10.925,12.733,11.129,11.026,null,9.4,11.526,11.027,10.526,11.4,10.524,null,11.528,13.64,10.326,12.434,null,11.53,8.7,10.324,11.227,11.028,null,10.827,null,10.025,10.525,11.028,10.925,10.425,null,9,10.425,12.4,10.124,11.833,11.124,10,10.024,10.828,9.822,11.43,10.124,10.224,11.53,10.124,10.927,10.225,9.924,9.8,9.622,null,null,10.425,null,11.3,11.333,10.626,10.325,10.526,10.322,9.322,9.723,9.821,null,10.024,10.224,9.721,10.024,8.919,10.125,10.8,10.124,10.326,9.621,9.924,9.825,10.023,10.025,null,9.017,null,9.3,10.024,11.1,null,10.1,10.629,12.1,9.924,8.9,10.125,9.118,10.525,10.426,10.024,null,9.725,11.427,null,10.5,9.521,9.623,12.033,10.024,null,9.3,10.425,8.618,10.224,9.32,10.726,null,null,11.027,8.2,10.225,11.3,8.317,10.023,10.926,9.625,10.429,8.7,9.023,null,7.9,13,10.319,11.428,12.331,12.533,12.431,null,9.3,11.2,10.8,10.729,11.1,12.834,13.035,null,13.437,13.739,9.8,13.438,11.8,9.921,9.622,11,10.3,10.525,11.7,11.128,null,10.525,null,null,10.125,9.926,10.02,11.9,10.223,11.3,10.726,11.3,11.23,10.826,10.3,11.026,10,10.727,11.026,10.2,11.5,11.83,11.127,12.531,10.7,9.6,11.228,10.525,11.228],[null,2.91,3.21,3.42,1.3,4.03,2.61,3.31,2.5,3.21,2.71,3.21,null,2.81,4.33,null,3.21,3.11,3.21,3.11,null,3.42,2.41,2.51,3.21,4.6,5.99,3.6,3.01,3.31,2.81,2.91,3.22,3.31,2.31,3.51,3.21,3.01,2.81,3.41,null,1.3,3.01,2.2,3.42,2.8,3.01,2.51,3.01,5.79,2.81,3.92,2.91,2.41,1.5,2.51,3.01,2.71,null,2.91,3.72,3.42,2.71,2.61,3.11,3.01,2.71,1.5,2.91,4,2.82,6.01,3.31,2.5,2.81,2.61,2.81,4.32,2.71,3.01,3.22,3.21,2.61,3.01,3.52,2,2.91,null,2.72,3.31,2.81,3.3,6.51,2.91,3.31,3.41,3.11,2.81,3.32,2.91,2.72,3.41,3.42,3.52,3.41,2.91,3.52,2.9,3.42,5.03,3.32,3.01,3.31,3.52,2.81,null,2.31,2.71,1.4,2.91,2.5,null,3.1,5.57,2.4,2.91,1.5,3.11,2.81,2.51,5.24,3.01,2.61,3.01,2.51,null,2,2.41,3.01,5.78,3.11,null,3.4,3.01,2.71,3.22,3.11,3.01,null,null,2.91,1.4,3.51,2.2,3.32,3.11,2.91,2.51,5.37,4,2.31,null,1.2,3.6,2.31,3.21,4.03,4.03,3.83,4.53,3.6,2.1,4,6.71,3.8,3.93,3.72,null,3.21,2.81,4.4,2.41,3,2.51,9.52,7.6,6.6,4.94,5.4,5.76,null,5.04,5.97,null,4.65,3.13,5.67,6.3,5.66,4.6,7.512,9,9.317,7.412,9.2,7.312,7.4,9.317,7.312,7,6.4,6.79,7.111,5.27,8.9,6.6,6.91,6.71,6.81],[null,3.513,3.514,3.012,null,3.013,3.414,3.514,null,3.514,3.213,3.514,null,3.213,2.812,null,null,3.012,3.514,3.413,null,3.213,3.213,3.315,3.513,2.6,2.512,null,null,3.513,3.213,3.313,3.713,3.413,2.913,3.012,3.413,null,3.613,3.012,null,null,3.513,3.013,3.113,null,3.012,null,3.414,2.612,3.313,3.213,3.413,3.113,null,3.213,3.414,null,null,3.313,null,3.213,3.313,3.213,3.112,3.613,3.413,null,3.213,null,3.013,3.113,3.113,null,3.314,3.213,3.314,3.013,3.313,3.414,3.512,3.314,3.113,3.613,3.213,null,3.314,null,3.312,3.413,3.814,null,3.213,2.913,3.313,3.414,3.414,3.414,3.713,3.313,3.312,3.414,3.414,3.213,3.414,3.514,3.313,null,3.313,3.113,3.213,3.414,3.613,3.313,3.413,null,3.413,3.313,null,3.414,null,null,3.7,3.314,null,3.414,null,3.414,3.313,3.012,3.113,3.414,3.313,3.513,3.516,null,null,3.213,3.414,3.614,3.414,null,null,3.514,3.313,3.21,3.614,3.514,null,3.313,3.514,null,3.513,null,3.013,3.012,3.513,3.213,3.013,null,3.113,3.413,null,3.1,3.412,3.513,3.613,3.614,3.614,null,null,null,3.2,2.812,null,3.614,3.613,3.313,3.513,3.614,null,3.614,null,3.614,3.213,null,null,3.413,3.2,3.613,3.313,3.413,3.713,null,3.614,3.414,3.413,3.2,3.413,null,3.313,3.3,3.515,3.413,null,3.413,2.9,2.912,3.413,null,null,3.914,3.313,3.814,null,3.7,3.313,3.413,3.313],[null,3.04,2.55,3.65,3,2.83,2.53,2.66,2.3,2.65,3.23,2.76,null,2.73,3.25,null,3.06,3.16,2.76,3.14,null,3.95,2.53,2.53,2.86,2.7,2.23,2.8,null,2.76,3.45,3.36,4.47,2.86,2.73,3.57,2.86,2.53,3.15,2.96,null,4,2.86,3.04,4.05,3.8,3.67,2.83,2.86,3.14,3.46,3.35,3.06,3.14,4.5,3.85,2.86,3.04,null,2.96,null,4.15,3.17,3.54,3.17,3.65,3.27,4.2,3.06,2.3,2.43,3.03,3.47,2.4,2.86,4.15,4.26,3.55,3.66,3.07,3.75,3.16,3.84,3.65,4.16,2.2,4.46,null,3.46,3.16,2.23,4.9,3.35,3.74,3.47,3.68,4.18,4.67,3.77,4.08,3.46,3.88,3.68,4.57,3.88,4.88,3.78,4.6,3.57,4.59,4.67,3.57,3.96,3.35,4.81,null,4.91,3.76,4.5,3.88,3,null,4,3.75,3.5,3.98,4.4,4.28,5.01,5.01,4.69,4.18,null,4.37,4.49,null,4.4,5.79,4.09,4.16,3.98,4.58,6,3.57,5.21,4.39,4.07,3.57,null,null,3.37,4.8,3.34,6.7,4.16,4.07,2.96,6.09,3.86,4,5.91,null,4.4,2,5.18,2.14,1.73,1.63,1.73,2.33,null,1.7,2.3,1.92,2.6,1.73,1.73,2.53,1.73,1.73,null,1.84,1.7,1.94,2.02,2.7,null,1.83,0.9,1.62,null,1.73,1.52,null,2.63,null,1.73,0.9,1.73,1.9,1.73,2.6,1.72,1.83,2.2,1.83,1.9,1.52,1.73,null,1.8,2.53,1.73,null,2.6,null,1.73,2.53,1.73],[null,2.28,2.38,2.38,null,1.47,1.77,2.38,null,2.38,2.08,2.49,null,1.87,2.08,null,null,2.08,2.49,2.18,null,2.49,1.88,2.18,2.41,1.7,1.47,null,2.28,2.41,2.19,2.39,2.18,2.41,2.18,2.07,2.41,null,2.18,2.08,null,null,2.41,2.28,2.28,null,2.08,null,2.39,1.56,2.39,1.87,2.28,2.08,null,2.21,2.39,null,null,2.39,null,2.28,2.39,1.98,2.08,2.18,2.28,null,2.29,null,2.08,1.67,2.08,null,2.29,2.08,2.31,2.18,2.39,2.39,2.38,2.39,2.18,2.29,2.38,null,2.41,null,2.39,2.39,2.11,null,1.57,2.18,2.39,2.39,2.08,2.49,2.29,2.18,2.49,2.39,2.39,2.38,2.39,2.39,2.39,null,2.31,2.31,2.28,2.39,2.29,2.41,2.18,null,2.31,2.49,null,2.29,null,null,2.1,1.98,null,2.29,null,2.29,2.31,1.87,2.31,2.39,2.49,2.18,1.97,null,null,2.28,2.39,1.67,2.39,null,null,2.39,2.41,1.88,2.611,2.39,null,2.39,2.41,null,2.28,null,2.41,2.08,2.41,2.07,1.67,null,2.38,2.38,null,2,2.71,2.51,2.38,2.38,2.48,2.08,null,null,1.2,1.57,null,2.48,2.59,2.28,2.69,2.69,null,2.59,null,2.51,1.57,null,null,2.49,2,2.28,null,2.51,2.28,null,2.18,null,2.41,2.2,2.41,null,2.49,1.3,1.34,2.39,null,2.39,1.6,1.57,2.39,null,null,2.28,2.39,null,null,2,2.49,2.71,2.49],[null,1.56,1.46,1.56,null,1.36,1.56,1.46,null,1.56,1.67,1.56,null,1.67,1.46,null,null,1.98,1.56,1.66,null,1.56,1.67,1.67,1.56,1.2,1.26,null,1.77,1.56,1.67,1.56,1.67,1.56,1.77,1.98,1.56,null,1.56,1.98,null,null,1.56,1.66,1.66,null,1.88,1.67,1.56,1.47,1.56,1.46,1.77,1.77,null,1.67,1.56,null,null,1.67,null,1.66,1.56,1.77,1.97,1.66,1.76,null,1.66,null,1.77,1.36,1.97,null,1.56,1.56,1.67,1.26,1.56,1.66,1.97,1.66,1.67,1.67,1.56,null,1.67,null,1.76,1.67,1.67,null,1.36,1.66,1.66,1.67,1.98,1.67,1.77,1.98,1.66,1.67,1.77,1.56,1.67,1.77,1.67,null,1.67,1.46,1.56,1.67,1.66,1.46,1.88,null,1.77,1.66,null,1.77,null,null,1.2,1.46,null,1.77,null,1.77,1.77,1.58,1.57,1.77,1.77,1.66,2.09,null,null,1.46,1.77,1.46,1.77,null,null,1.77,1.66,1.77,1.78,1.77,null,1.67,1.77,null,1.56,null,1.87,1.97,1.77,1.36,1.16,null,1.66,1.56,null,1.9,1.66,1.66,1.66,1.66,1.67,null,null,null,1.7,1.56,null,1.67,1.67,1.56,1.67,1.67,null,1.67,null,1.66,1.78,null,null,1.46,2.1,1.56,1.56,1.36,null,null,1.66,null,1.36,2,1.36,null,1.56,1.2,1.57,1.56,null,1.56,1.7,1.68,1.56,null,null,1.66,1.56,null,null,1.6,1.56,1.87,1.56],[null,1.15,1.46,1.15,null,0.94,1.46,1.46,null,1.36,1.15,1.36,null,1.35,1.04,null,null,null,1.35,1.15,null,1.25,1.25,1.35,1.35,0.8,0.83,null,1.05,1.35,1.15,1.15,1.25,1.35,1.25,null,1.25,null,1.15,null,null,null,1.25,1.04,1.15,null,null,1.04,1.25,0.82,1.15,1.04,1.05,1.15,null,1.15,1.25,null,null,1.15,null,1.15,1.15,1.25,null,1.15,1.15,null,1.15,null,1.25,0.72,null,null,1.15,1.05,1.15,1.15,1.15,1.15,1.25,1.15,1.15,1.15,1.15,null,1.15,null,1.25,1.15,1.15,null,0.94,1.25,1.15,1.15,null,1.15,1.25,null,1.25,1.15,1.15,1.15,1.15,1.25,1.15,null,1.15,0.94,1.15,1.15,1.25,1.15,null,null,1.15,1.25,null,1.15,null,null,0.8,0.72,null,1.15,null,1.15,1.15,null,1.05,1.15,1.25,1.25,null,null,null,1.15,1.25,1.04,1.25,1.25,null,1.15,1.15,null,1.25,1.15,null,1.25,1.25,null,1.25,null,1.25,null,1.25,1.15,1.15,null,1.35,1.35,null,null,1.35,1.35,1.35,1.35,1.35,1.15,null,null,0.9,0.93,null,1.35,1.35,1.35,1.35,1.35,null,1.45,null,1.45,1.05,null,null,1.35,null,1.25,1.35,1.46,1.25,null,1.25,null,1.46,null,1.46,null,1.45,0.7,0.82,1.35,null,1.35,0.8,0.92,1.35,null,null,1.25,1.35,null,null,1.1,1.35,1.35,1.35],[null,0.92,1.02,0.92,null,0.71,1.23,1.02,null,1.02,1.03,1.02,null,1.34,1.02,null,null,null,1.02,0.92,null,0.92,1.23,0.82,1.02,1,0.81,null,null,1.02,0.92,0.92,1.02,1.02,1.13,null,0.92,null,0.92,null,null,null,0.92,1.03,0.92,null,null,0.82,0.92,1.03,0.92,0.92,null,1.13,null,0.92,0.92,null,null,0.92,null,0.92,0.92,1.03,null,1.02,null,null,0.92,null,0.93,0.92,null,null,0.92,0.92,0.81,0.92,0.92,0.92,1.02,0.92,1.03,1.12,0.92,null,0.81,null,null,0.92,0.81,null,0.81,1.03,0.92,0.92,null,0.81,1.12,null,null,0.92,0.92,0.92,0.92,0.71,0.92,null,0.92,0.81,0.92,0.92,1.02,1.02,null,null,0.81,null,null,0.92,null,null,0.7,0.71,null,0.92,null,0.92,0.81,null,0.81,0.92,null,1.02,null,null,null,0.92,1.02,0.81,0.92,1.12,null,0.92,0.81,null,0.92,0.92,null,null,0.92,null,1.02,null,1.02,null,0.92,0.92,0.61,null,0.91,null,null,null,1.02,0.92,0.92,0.92,0.92,0.81,null,null,0.6,0.61,null,0.92,0.92,null,0.92,0.91,null,1.12,null,1.02,0.81,null,null,0.92,null,1.02,null,0.81,null,null,1.12,null,0.81,null,0.81,null,0.81,1.1,0.92,0.81,null,0.81,0.7,0.61,0.81,null,null,1.02,0.81,null,null,null,0.81,null,0.81],[null,0.41,0.62,0.62,null,0.41,0.52,0.62,null,0.72,0.41,0.72,null,0.41,0.62,null,null,null,0.62,0.52,null,0.62,0.52,0.62,0.62,0.2,0.31,null,null,0.62,0.41,0.52,0.41,0.62,0.41,null,0.51,null,0.52,null,null,null,0.51,0.41,0.52,null,null,0.62,0.51,0.41,0.52,0.62,null,0.41,null,0.41,0.51,null,null,0.51,null,0.52,0.51,0.31,null,0.52,null,null,0.51,null,0.52,0.42,null,null,0.51,0.52,0.41,0.52,0.52,0.51,0.41,0.51,0.52,0.62,0.41,null,0.41,null,null,0.51,0.52,null,0.42,0.52,0.51,0.51,null,0.41,0.62,null,null,0.51,0.51,0.41,0.51,0.41,0.51,null,0.51,0.41,0.41,0.51,0.52,0.52,null,null,0.51,null,null,0.51,null,null,0.6,0.3,null,0.51,null,0.5,0.41,null,0.41,0.51,null,0.52,null,null,null,0.41,0.51,0.2,0.51,0.62,null,0.51,0.52,null,0.41,0.51,null,null,0.51,null,0.52,null,0.41,null,0.51,0.41,0.31,null,0.51,null,null,null,0.41,0.51,0.51,0.5,0.52,0.41,null,null,0.2,0.3,null,0.52,0.51,null,0.51,0.51,null,0.52,null,0.52,0.21,null,null,0.51,null,0.52,null,0.51,null,null,0.52,null,0.52,null,0.51,null,0.52,0.2,0.41,0.52,null,0.51,0.3,0.52,0.51,null,null,0.52,0.52,null,null,null,0.52,0.83,0.52],[null,null,0.92,0.82,null,0.61,1.02,0.92,null,0.92,0.72,0.92,null,1.14,0.72,null,null,null,0.92,null,null,0.72,1.02,0.82,0.92,0.5,0.61,null,null,0.92,0.72,0.72,0.51,0.92,1.14,null,0.82,null,null,null,null,null,0.82,1.13,0.72,null,null,0.71,0.82,0.61,0.61,0.61,null,1.02,null,0.72,0.82,null,null,0.72,null,0.72,0.72,1.13,null,null,null,null,0.72,null,0.72,0.51,null,null,0.61,0.92,0.72,0.51,0.61,0.61,0.51,0.61,0.61,null,0.72,null,0.61,null,null,0.61,0.51,null,0.51,0.61,0.61,0.61,null,0.61,null,null,null,0.61,0.61,0.72,0.61,0.61,0.61,null,0.61,0.61,0.72,0.61,null,0.61,null,null,0.61,null,null,0.61,null,null,1,0.82,null,0.61,null,0.61,0.61,null,0.51,0.61,null,null,null,null,null,0.72,0.61,0.72,0.61,0.72,null,0.61,0.61,null,0.51,0.61,null,null,0.61,null,null,null,0.72,null,0.61,0.61,0.51,null,0.61,null,null,null,0.61,0.61,0.61,0.61,0.61,0.61,null,null,0.4,0.51,null,0.61,0.61,null,0.51,0.51,null,0.72,null,0.72,0.62,null,null,0.72,null,null,null,0.72,0.62,null,0.72,null,0.72,null,0.72,null,0.72,0.7,0.72,0.72,null,0.72,0.6,0.51,0.72,null,null,0.92,0.71,null,null,null,0.61,0.62,0.61],[null,null,0.52,0.42,null,0.1,0.31,0.52,null,0.52,0.42,0.52,null,0.42,0.42,null,null,null,0.52,null,null,0.42,0.42,0.42,0.52,0.3,0.42,null,0.42,0.52,0.42,0.42,null,0.42,0.42,null,0.42,null,null,null,null,null,0.42,0.42,0.42,null,null,0.42,0.42,0.42,0.42,0.42,0.42,0.52,null,0.42,0.42,0.42,null,0.42,null,0.42,0.42,0.52,null,null,0.42,null,0.42,null,0.42,0.42,null,null,0.42,0.42,0.42,0.42,0.42,0.42,null,0.42,0.42,null,0.42,null,0.42,null,0.42,0.42,0.42,null,0.42,0.42,0.42,0.42,null,0.42,null,null,0.42,0.42,0.42,0.42,0.42,0.42,0.42,null,0.42,0.31,0.42,0.42,null,0.42,null,null,0.43,0.42,null,0.42,null,null,0.4,0.32,null,0.42,null,0.42,0.42,null,0.32,0.42,0.42,null,null,null,null,0.42,0.42,0.42,0.42,0.42,null,0.42,0.42,null,0.42,0.42,null,0.42,0.42,null,null,null,0.42,null,0.42,0.42,0.42,null,0.42,0.42,null,null,0.42,0.42,0.42,0.42,0.42,0.42,null,null,0.3,0.42,null,0.42,0.42,0.42,0.42,0.42,null,0.42,null,0.42,0.42,null,null,0.42,null,null,0.42,0.42,0.42,null,0.42,0.42,0.42,null,0.42,null,0.42,0.3,0.42,0.42,null,0.42,0.8,0.63,0.42,null,null,0.42,0.42,0.42,null,null,0.42,0.31,0.42],[null,null,0.21,0.21,null,0.1,0.21,0.21,null,0.21,0.21,0.21,null,0.21,0.21,null,null,null,0.21,null,null,0.21,0.21,0.21,0.21,0.1,0.21,null,null,0.21,0.21,0.21,0.31,0.21,0.21,null,0.21,null,null,null,null,null,0.31,0.21,0.21,null,null,0.21,0.31,0.1,0.21,0.21,null,0.21,null,0.21,0.31,null,null,0.31,null,0.21,0.31,0.21,null,null,null,null,0.31,null,0.21,0.1,null,null,0.21,0.31,0.31,0.31,0.21,0.21,0.31,0.31,0.31,null,0.21,null,0.31,null,null,0.31,0.21,null,0.1,0.31,0.31,0.31,null,0.31,null,null,null,0.31,0.31,0.21,0.31,0.31,0.31,null,0.31,0.41,0.21,0.31,null,0.21,null,null,0.31,null,null,0.31,null,null,0.1,0.21,null,0.31,null,0.31,0.31,null,0.41,0.31,null,null,null,null,null,0.21,0.31,0.1,0.31,0.21,null,0.31,0.31,null,0.21,0.31,null,null,0.31,null,null,null,0.21,null,0.31,0.31,0.21,null,0.21,null,null,null,0.31,0.31,0.31,0.31,0.31,0.21,null,null,0,null,null,0.31,0.31,null,0.31,0.31,null,0.31,null,0.31,null,null,null,0.31,null,null,null,0.31,0.21,null,0.31,null,0.31,null,0.31,null,0.31,0.2,0.21,0.31,null,0.31,0.1,0.31,0.31,null,null,0.31,0.31,null,null,null,0.31,0.31,0.31],[null,null,0.11,0.11,null,0.11,0.11,0.11,null,0.11,0.11,0.11,null,0.11,0.11,null,null,null,0.11,null,null,0.11,0.11,0.11,0.11,0,0.11,null,null,0.11,0.11,0.11,null,0.11,0.11,null,0.11,null,null,null,null,null,0.11,0.11,0.11,null,null,0.11,0.11,0.11,0.11,0.11,null,0.11,null,0.11,0.11,null,null,0.11,null,0.11,0.11,0.11,null,null,null,null,0.11,null,0.11,0.11,null,null,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,null,0.11,null,0.11,null,null,0.11,0.11,null,0.11,0.11,0.11,0.11,null,0.11,null,null,null,0.11,0.11,0.11,0.11,0.11,0.11,null,0.11,0.11,0.11,0.11,null,0.11,null,null,0.11,null,null,0.11,null,null,0.1,0.11,null,0.11,null,0.11,0.11,null,0.11,0.11,null,null,null,null,null,0.11,0.11,0.11,0.11,0.11,null,0.11,0.11,null,0.11,0.11,null,null,0.11,null,null,null,0.11,null,0.11,0.11,0.11,null,0.11,null,null,null,0.11,0.11,0.11,0.11,0.11,0.11,null,null,0.1,null,null,0.11,0.11,null,0.11,0.11,null,0.11,null,0.11,0.11,null,null,0.11,null,null,null,0.11,0.11,null,0.11,null,0.11,null,0.11,null,0.11,0.3,0.11,0.11,null,0.11,0,null,0.11,null,null,0.11,0.11,null,null,null,0.11,0.11,0.11],[1.2,0.4,1.5,1,0.6,7,1.5,1.2,0.3,1.4,2.4,1,2.6,0.2,1.3,7,3.1,1.4,0.7,0.7,2,1.9,1,3.4,null,4,7.2,2.4,3.5,0.2,2.5,2.4,1,null,0.1,2.2,0.3,2.9,1.7,3.5,0.3,1.3,null,0.3,2.4,1.3,3.2,4.6,0.4,6.7,2.5,0.1,4.1,0.8,2.2,3.6,1.9,1.3,0.2,2.2,4.5,2.5,2.1,2.2,3.4,2.4,4.2,2.7,2,1.7,3,6.4,3.4,0.4,1.4,1,4.1,2.2,2.5,0.8,0.2,0.3,0.5,2,3.1,0.3,3.7,0.1,4.9,2.1,1.9,3.7,9.1,0.2,2.9,2.8,4.7,5.4,3.5,4.1,4.8,3.6,3.5,4,3.6,5.3,3.3,3.3,3.4,1.7,4.4,2.7,3.1,6,3.7,4,5.8,3.9,1.8,2.3,2.4,1.3,1.7,5.2,3.9,1.9,2.4,3.5,5.9,3.5,2.1,3.5,5.7,3,5.6,2.2,4.1,4.5,2.7,3.5,3.1,5.2,4.1,2.5,3.6,4.5,1.1,2.5,3.6,4.2,2.1,0.3,0.8,7.5,5.1,4.7,0.5,2.1,4.5,0.2,1.8,0.8,0.6,4.5,0.6,1.1,3.1,3.1,2.4,1.7,3.5,5.7,9.2,10.9,5,2.1,2.4,1.8,1.9,1.7,4.5,1.6,7,6.9,13.4,8.6,3.6,7.3,4.3,6.5,3.7,8.2,6.4,5.8,6,6.6,8.5,4.2,7.4,9.1,4.4,8.4,11.9,3.7,10,3.6,6.4,10.2,3.9,3.8,4.4,3.3,4.1,2,5.2,2.1,4.4,3.8,4.3]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>casa<\/th>\n      <th>fecha_final<\/th>\n      <th>muestra<\/th>\n      <th>participacion<\/th>\n      <th>PSOE<\/th>\n      <th>PP<\/th>\n      <th>Vox<\/th>\n      <th>UP<\/th>\n      <th>Cs<\/th>\n      <th>ERC<\/th>\n      <th>MP<\/th>\n      <th>JxCat<\/th>\n      <th>PNV<\/th>\n      <th>EHBildu<\/th>\n      <th>CUP<\/th>\n      <th>CC<\/th>\n      <th>BNG<\/th>\n      <th>NA+<\/th>\n      <th>PRC<\/th>\n      <th>EV<\/th>\n      <th>ventaja<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="consultas" class="section level3 unnumbered">
<h3>Consultas<a class="anchor" aria-label="anchor" href="#consultas"><i class="fas fa-link"></i></a>
</h3>
<p>Una vez que tenemos los datos depurados vamos a <mark><strong>realizar algunas consultas sencillas</strong></mark> usando <a href="https://tidyverse.tidyverse.org">tidyverse</a>.</p>
<p><mark><strong>¿Cuáles son las 10 encuestas con mayor tamaño muestral?</strong></mark></p>
<div class="sourceCode" id="cb411"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">muestra</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 21
##    casa    fecha_final muestra participacion  PSOE    PP   Vox    UP    Cs   ERC
##    &lt;chr&gt;   &lt;date&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ELECTO… 2021-05-02     4320            NA  27.1  24.0  17.0 12.3   4.03  3.61
##  2 CIS (S… 2021-02-11     3869            NA  28.1  19.7  16.3 11.3   9     3.3 
##  3 CIS     2021-02-11     3869            NA  30.7  18.9  13.6 11.2   9.32  3.52
##  4 CIS (S… 2021-01-25     3862            NA  28.6  22.2  15.9 10     7.4   2.9 
##  5 CIS     2021-01-25     3862            NA  30.7  20.6  13.0 10.7   9.32  2.91
##  6 CIS (S… 2021-04-14     3823            NA  30    20.8  18.8 10.8   4     3.2 
##  7 CIS     2021-04-14     3823            NA  31.5  20.7  15.5 10.7   6.71  2.81
##  8 CIS     2021-03-11     3820            NA  31.3  18.0  15.1  9.62  9.52  3.21
##  9 CIS     2021-06-15     3814            NA  27.4  23.9  13.0 12.0   5.78  3.61
## 10 CIS     2021-05-13     3814            NA  27.9  23.4  13.7 10.4   5.37  3.01
## # … with 11 more variables: MP &lt;dbl&gt;, JxCat &lt;dbl&gt;, PNV &lt;dbl&gt;, EHBildu &lt;dbl&gt;,
## #   CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;, PRC &lt;dbl&gt;, EV &lt;dbl&gt;,
## #   ventaja &lt;dbl&gt;</code></pre>
<p><mark><strong>¿Cuáles son las encuestas más recientes?</strong></mark></p>
<div class="sourceCode" id="cb413"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/desc.html">desc</a></span><span class="op">(</span><span class="va">fecha_final</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 219 × 21
##    casa    fecha_final muestra participacion  PSOE    PP   Vox    UP    Cs   ERC
##    &lt;chr&gt;   &lt;date&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 DYM/HE… 2022-01-23     1008            NA  NA    NA    NA    NA   NA    NA   
##  2 KEYDAT… 2022-01-21       NA            NA  26.0  25.6  17.5  11.5  2.91  3.51
##  3 ELECTO… 2022-01-20     1190            NA  24.5  23.0  20.8  12.7  3.21  3.51
##  4 CELEST… 2022-01-14     1100            NA  26.2  27.2  16.6  11.0  3.42  3.01
##  5 INVYMA… 2022-01-14       NA            NA  27.3  27.9  16.5  10.9  1.3  NA   
##  6 CIS     2022-01-14     3777            NA  28.5  21.6  14.8  13.1  4.03  3.01
##  7 IMOP/E… 2022-01-14     1312            NA  26.4  24.9  18.0  11.8  2.61  3.41
##  8 ELECTO… 2022-01-13     1317            NA  24.6  23.4  20.6  12.4  3.31  3.51
##  9 SIMPLE… 2022-01-13     1039            NA  24.6  24.3  18.7  11.1  2.5  NA   
## 10 ELECTO… 2022-01-06     1823            NA  25.0  23.6  20.3  12.0  3.21  3.51
## # … with 209 more rows, and 11 more variables: MP &lt;dbl&gt;, JxCat &lt;dbl&gt;,
## #   PNV &lt;dbl&gt;, EHBildu &lt;dbl&gt;, CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;,
## #   PRC &lt;dbl&gt;, EV &lt;dbl&gt;, ventaja &lt;dbl&gt;</code></pre>
<p><mark><strong>¿Cuáles son las 5 encuestas en las que el PSOE tiene mayor proyección?</strong></mark></p>
<div class="sourceCode" id="cb415"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">PSOE</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 21
##   casa     fecha_final muestra participacion  PSOE    PP   Vox    UP    Cs   ERC
##   &lt;chr&gt;    &lt;date&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 CIS      2021-04-14     3823            NA  31.5  20.7  15.5 10.7   6.71  2.81
## 2 CIS      2021-03-11     3820            NA  31.3  18.0  15.1  9.62  9.52  3.21
## 3 CIS      2021-02-11     3869            NA  30.7  18.9  13.6 11.2   9.32  3.52
## 4 CIS      2021-01-25     3862            NA  30.7  20.6  13.0 10.7   9.32  2.91
## 5 CIS (SO… 2021-04-14     3823            NA  30    20.8  18.8 10.8   4     3.2 
## # … with 11 more variables: MP &lt;dbl&gt;, JxCat &lt;dbl&gt;, PNV &lt;dbl&gt;, EHBildu &lt;dbl&gt;,
## #   CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;, PRC &lt;dbl&gt;, EV &lt;dbl&gt;,
## #   ventaja &lt;dbl&gt;</code></pre>
<p><mark><strong>¿Cuál es la encuesta del CIS en la que el PP tiene mayor proyección?</strong></mark></p>
<div class="sourceCode" id="cb417"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="va">casa</span> <span class="op">==</span> <span class="st">"CIS"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">PP</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 21
##   casa  fecha_final muestra participacion  PSOE    PP   Vox    UP    Cs   ERC
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 CIS   2021-06-15     3814            NA  27.4  23.9  13.0  12.0  5.78  3.61
## # … with 11 more variables: MP &lt;dbl&gt;, JxCat &lt;dbl&gt;, PNV &lt;dbl&gt;, EHBildu &lt;dbl&gt;,
## #   CUP &lt;dbl&gt;, CC &lt;dbl&gt;, BNG &lt;dbl&gt;, NA+ &lt;dbl&gt;, PRC &lt;dbl&gt;, EV &lt;dbl&gt;,
## #   ventaja &lt;dbl&gt;</code></pre>
<p><mark><strong>¿Cuál es el promedio de las encuestas del PSOE y PP por casa encuestadora?</strong></mark></p>
<div class="sourceCode" id="cb419"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">fecha_final</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span><span class="op">(</span><span class="va">casa</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/summarise.html">summarise</a></span><span class="op">(</span>media_PSOE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PSOE</span><span class="op">)</span>, media_PP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PP</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 28 × 3
##    casa                            media_PSOE media_PP
##    &lt;chr&gt;                                &lt;dbl&gt;    &lt;dbl&gt;
##  1 40DB/PRISA                            NA       NA  
##  2 ÁGORA INTEGRAL/CANARIAS AHORA         25.8     25.4
##  3 CELESTE-TEL/ONDA CERO                 26.3     27.8
##  4 CIS                                   29.2     21.3
##  5 CIS (SOCIOMÉTRICA)                    27.3     22.0
##  6 DATA10/OKDIARIO                       25.0     29.2
##  7 DEMOSCOPIA Y SERVICIOS/ESDIARIO       25.3     25.9
##  8 DYM/HENNEO                            NA       NA  
##  9 ELECTOPANEL/ELECTOMANÍA               26.2     25.7
## 10 GAD3/ABC                              25.5     29.8
## # … with 18 more rows</code></pre>
<p><mark><strong>¿Cuál es son las 3 casas encuestadoras más sesgada hacia el PSOE (con mayor diferencia de promedio de PSOE vs PP)? ¿Y hacia el PP?</strong></mark></p>
<div class="sourceCode" id="cb421"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">fecha_final</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span><span class="op">(</span><span class="va">casa</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/summarise.html">summarise</a></span><span class="op">(</span>media_PSOE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PSOE</span><span class="op">)</span>, media_PP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PP</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>diferencia <span class="op">=</span> <span class="va">media_PSOE</span> <span class="op">-</span> <span class="va">media_PP</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">diferencia</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   casa               media_PSOE media_PP diferencia
##   &lt;chr&gt;                   &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 CIS                      29.2     21.3       7.94
## 2 PSOE                     29       22         7   
## 3 CIS (SOCIOMÉTRICA)       27.3     22.0       5.26</code></pre>
<div class="sourceCode" id="cb423"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">encuestas_depurado</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">fecha_final</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span><span class="op">(</span><span class="va">casa</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/summarise.html">summarise</a></span><span class="op">(</span>media_PSOE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PSOE</span><span class="op">)</span>, media_PP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PP</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>diferencia <span class="op">=</span> <span class="va">media_PP</span> <span class="op">-</span> <span class="va">media_PSOE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">diferencia</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   casa               media_PSOE media_PP diferencia
##   &lt;chr&gt;                   &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 GAD3/ABC                 25.5     29.8       4.36
## 2 DATA10/OKDIARIO          25.0     29.2       4.12
## 3 SIGMA DOS/ANTENA 3       25.3     29.3       3.99</code></pre>
</div>
</div>
<div id="visualizando-datos-incursión-a-ggplot2" class="section level2 unnumbered">
<h2>Visualizando datos: incursión a ggplot2<a class="anchor" aria-label="anchor" href="#visualizando-datos-incursi%C3%B3n-a-ggplot2"><i class="fas fa-link"></i></a>
</h2>
<div class="blackbox">
<p>Scripts usados:</p>
<ul>
<li>
<a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script22.R"><strong>script22.R</strong></a>: incursión a ggplot2. Ver en <a href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script22." class="uri">https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script22.</a>
</li>
</ul>
</div>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: del conjunto <code>starwars</code> (del entorno de paquetes <a href="https://tidyverse.tidyverse.org">tidyverse</a>), filtra solo los registros que no tenga ausente <code>NA</code> en las columnas <code>mass, height, eye_color</code> </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb425"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co"># Eliminamos NA</span>
<span class="va">starwars_filtro</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/drop_na.html">drop_na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">mass</span>, <span class="va">height</span>, <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: con ese conjunto filtrado dibuja un diagrama de puntos enfrentando <code>x = height</code> en el eje X e <code>y = mass</code> en el eje Y.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb426"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-151-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: modifica el código del gráfico anterior para asignar el tamaño de los puntos en función de la variable <code>mass</code>.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb427"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>, size <span class="op">=</span> <span class="va">mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-152-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: modifica el código del gráfico anterior para asignar el color en función de su color de ojos guardado en <code>eye_color</code>. Antes procesa la variable para quedarte con colores reales: si hay dos colores, quédate con el primero; el color <code>"hazel"</code> pásalo a <code>"brown"</code>; los colores <code>"unknown"</code> pásalo a gris.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb428"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Transformar colores</span>
<span class="va">starwars_filtro</span> <span class="op">&lt;-</span>
   <span class="va">starwars_filtro</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span><span class="op">(</span>eye_color <span class="op">=</span>
             <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/case_when.html">case_when</a></span><span class="op">(</span><span class="va">eye_color</span> <span class="op">==</span> <span class="st">"blue-gray"</span> <span class="op">~</span> <span class="st">"blue"</span>,
                       <span class="va">eye_color</span> <span class="op">==</span> <span class="st">"hazel"</span> <span class="op">~</span> <span class="st">"brown"</span>,
                       <span class="va">eye_color</span> <span class="op">==</span> <span class="st">"unknown"</span> <span class="op">~</span> <span class="st">"gray"</span>,
                       <span class="va">eye_color</span> <span class="op">==</span> <span class="st">"green, yellow"</span> <span class="op">~</span> <span class="st">"green"</span>,
                       <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Visualizamos</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>, size <span class="op">=</span> <span class="va">mass</span>, color <span class="op">=</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span>
                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span>, <span class="st">"gray"</span>, <span class="st">"green"</span>,
                         <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"yellow"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-153-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: repite el gráfico anterior localizando ese dato con un peso extremadamente elevado (outlier), elimínalo y vuelve a repetir la visualización.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb429"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Localizamos el valor</span>
<span class="va">starwars_filtro</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">mass</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 14
##   name    height  mass hair_color skin_color  eye_color birth_year sex    gender
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 Jabba …    175  1358 &lt;NA&gt;       green-tan,… orange         600   herma… mascu…
## 2 Grievo…    216   159 none       brown, whi… green           NA   male   mascu…
## 3 IG-88      200   140 none       metal       red             15   none   mascu…
## 4 Darth …    202   136 none       white       yellow          41.9 male   mascu…
## 5 Tarfful    234   136 brown      brown       blue            NA   male   mascu…
## # … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
<div class="sourceCode" id="cb431"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars_filtro</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/slice.html">slice_max</a></span><span class="op">(</span><span class="va">mass</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/pull.html">pull</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Jabba Desilijic Tiure" "Grievous"              "IG-88"                
## [4] "Darth Vader"           "Tarfful"</code></pre>
<div class="sourceCode" id="cb433"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">starwars_filtro</span> <span class="op">&lt;-</span> <span class="va">starwars_filtro</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">!=</span> <span class="st">"Jabba Desilijic Tiure"</span><span class="op">)</span>

<span class="co"># Visualizamos</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>,
           size <span class="op">=</span> <span class="va">mass</span>, color <span class="op">=</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span>
                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span>, <span class="st">"gray"</span>, <span class="st">"green"</span>,
                         <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"yellow"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-154-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: repite el gráfico anterior eliminando la leyenda del tamaño del punto y cambia el título de la leyenda del color de ojos a castellano. Añade además transparencia <code>alpha = 0.6</code> a los puntos.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb434"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>,
           size <span class="op">=</span> <span class="va">mass</span>, color <span class="op">=</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">guides</span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span>
                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span>, <span class="st">"gray"</span>, <span class="st">"green"</span>,
                         <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"yellow"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"color de ojos"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-155-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 7</strong>: repite el gráfico modificando los títulos de los ejes (a castellano) y escribiendo título, subtítulo y caption.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb435"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>,
           size <span class="op">=</span> <span class="va">mass</span>, color <span class="op">=</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">guides</span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span>
                       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span>, <span class="st">"gray"</span>, <span class="st">"green"</span>,
                         <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"yellow"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"color de ojos"</span>,
       x <span class="op">=</span> <span class="st">"altura (cm)"</span>, y <span class="op">=</span> <span class="st">"peso (kg)"</span>,
       title <span class="op">=</span> <span class="st">"STARWARS"</span>,
       subtitle <span class="op">=</span> <span class="st">"Diagrama de puntos altura vs peso"</span>,
       caption <span class="op">=</span> <span class="st">"Autor: Javier Álvarez Liébana | Datos: starwars"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-156-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 8</strong>: repite el gráfico anterior explicitando los cortes en los ejes con <code>scale_x_continuous()</code> y <code>scale_y_continuous()</code>: el eje X de 60 a 240 (de 30 en 30 cada marca), el eje Y de 20 a 160 (de 20 en 20 cada marca).</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb436"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">height</span>, y <span class="op">=</span> <span class="va">mass</span>,
           size <span class="op">=</span> <span class="va">mass</span>, color <span class="op">=</span> <span class="va">eye_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">guides</span><span class="op">(</span>size <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span>
                           <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"blue"</span>, <span class="st">"brown"</span>, <span class="st">"gray"</span>, <span class="st">"green"</span>,
                             <span class="st">"orange"</span>, <span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"yellow"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">160</span>, by <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">240</span>, by <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"color de ojos"</span>,
       x <span class="op">=</span> <span class="st">"altura (cm)"</span>, y <span class="op">=</span> <span class="st">"peso (kg)"</span>,
       title <span class="op">=</span> <span class="st">"STARWARS"</span>,
       subtitle <span class="op">=</span> <span class="st">"Diagrama de puntos altura vs peso"</span>,
       caption <span class="op">=</span> <span class="st">"Autor: Javier Álvarez Liébana | Datos: starwars"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-157-1.png" width="768"></div>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 9</strong>: del conjunto de datos original, elimina los registros que tengan ausente la variable <code>sex</code>. Agrupa por dicha variable y contabiliza los personajes de cada sexo. Visualízalo en un diagrama de barras vertical, con la escala de colores de <code><a href="https://rdrr.io/pkg/ggthemes/man/scale_color_tableau.html">scale_fill_tableau()</a></code>, cambiando el nombre de leyenda y de ejes, y poniéndo títulos y subtítulos.</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb437"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span>
<span class="va">starwars_filtro</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/tidyr/man/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span>

<span class="co"># Vertical</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/count.html">count</a></span><span class="op">(</span><span class="op">)</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sex</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/scale_color_tableau.html">scale_fill_tableau</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Sexo"</span>,
       x <span class="op">=</span> <span class="st">"Sexo"</span>, y <span class="op">=</span> <span class="st">"Número de personajes"</span>,
       title <span class="op">=</span> <span class="st">"STARWARS"</span>,
       subtitle <span class="op">=</span> <span class="st">"Diagrama de barras verticales"</span>,
       caption <span class="op">=</span> <span class="st">"Autor: Javier Álvarez Liébana | Datos: starwars"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-158-1.png" width="768"></div>
<div class="sourceCode" id="cb438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Horizontal</span>
<span class="fu">ggplot</span><span class="op">(</span><span class="va">starwars_filtro</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/dplyr/man/count.html">count</a></span><span class="op">(</span><span class="op">)</span>,
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sex</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/scale_color_tableau.html">scale_fill_tableau</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"Sexo"</span>,
       x <span class="op">=</span> <span class="st">"Sexo"</span>, y <span class="op">=</span> <span class="st">"Número de personajes"</span>,
       title <span class="op">=</span> <span class="st">"STARWARS"</span>,
       subtitle <span class="op">=</span> <span class="st">"Diagrama de barras vertical"</span>,
       caption <span class="op">=</span> <span class="st">"Autor: Javier Álvarez Liébana | Datos: starwars"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="curso_R_ECI_files/figure-html/unnamed-chunk-158-2.png" width="768"></div>
<!-- tocstop -->
</details>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html">Prefacio</a></div>
<div class="next"><a href="recursos-de-aprendizaje.html">📚 Recursos de aprendizaje</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ejercicios-recopilados">📝 Ejercicios recopilados</a></li>
<li><a class="nav-link" href="#primeros-pasos">Primeros pasos</a></li>
<li><a class="nav-link" href="#tipos-de-datos">Tipos de datos</a></li>
<li><a class="nav-link" href="#vectores">Vectores</a></li>
<li><a class="nav-link" href="#operaciones-con-vectores">Operaciones con vectores</a></li>
<li><a class="nav-link" href="#estructuras-de-datos-matrices-y-tablas-data.frame">Estructuras de datos: matrices y tablas (data.frame)</a></li>
<li><a class="nav-link" href="#repaso-empezando-a-trastear-datos">Repaso: empezando a trastear datos</a></li>
<li><a class="nav-link" href="#estructuras-condicionales">Estructuras condicionales</a></li>
<li><a class="nav-link" href="#bucles">Bucles</a></li>
<li><a class="nav-link" href="#funciones">Funciones</a></li>
<li><a class="nav-link" href="#listas">Listas</a></li>
<li><a class="nav-link" href="#tibble">Tibble</a></li>
<li><a class="nav-link" href="#tidy-data">Tidy data</a></li>
<li><a class="nav-link" href="#intro-a-tidyverse">Intro a tidyverse</a></li>
<li>
<a class="nav-link" href="#profundizando-tidyverse-encuestas-electorales">Profundizando tidyverse: encuestas electorales</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#nombrar-columnas">Nombrar columnas</a></li>
<li><a class="nav-link" href="#eliminar-filas">Eliminar filas</a></li>
<li><a class="nav-link" href="#a%C3%B1adir-columna-de-a%C3%B1o">Añadir columna de año</a></li>
<li><a class="nav-link" href="#juntar-tablas">Juntar tablas</a></li>
<li><a class="nav-link" href="#convertir-a-num%C3%A9ricas">Convertir a numéricas</a></li>
<li><a class="nav-link" href="#convertir-las-fechas-de-campo">Convertir las fechas de campo</a></li>
<li><a class="nav-link" href="#limpiamos-nombres-de-encuestas">Limpiamos nombres de encuestas</a></li>
<li><a class="nav-link" href="#consultas">Consultas</a></li>
</ul>
</li>
<li><a class="nav-link" href="#visualizando-datos-incursi%C3%B3n-a-ggplot2">Visualizando datos: incursión a ggplot2</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dadosdelaplace/courses-ECI-2022/blob/master/01a-ejercicios_recopilados.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dadosdelaplace/courses-ECI-2022/edit/master/01a-ejercicios_recopilados.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Analizando datos, visualizando información, contando historias</strong>" was written by Javier Álvarez Liébana y Gabriel Valverde Castilla. It was last built on Última actualización: 28-01-2022.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
